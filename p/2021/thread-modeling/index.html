<!DOCTYPE html>
<html lang="zh-CN,en,default">
    <head hexo-theme='https://github.com/volantis-x/hexo-theme-volantis/#5.7.7'>
  <meta name="generator" content="Hexo 5.4.1">
  <meta name="Volantis" content="5.7.7">
  <meta charset="utf-8">
  <!-- SEO相关 -->
  
  <link rel="canonical" href="https://tari.moe/p/2021/thread-modeling/"/>
  <!-- 渲染优化 -->
    <meta http-equiv='x-dns-prefetch-control' content='on' />
      <link rel='dns-prefetch' href='https://unpkg.com'>
      <link rel="preconnect" href="https://unpkg.com" crossorigin>
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Content-Security-Policy" content=" default-src 'self' https:; block-all-mixed-content; base-uri 'self' https:; form-action 'self' https:; worker-src 'self' https:; connect-src 'self' https: *; img-src 'self' data: https: *; media-src 'self' https: *; font-src 'self' data: https: *; frame-src 'self' https: *; manifest-src 'self' https: *; child-src https:; script-src 'self' https: 'unsafe-inline' *; style-src 'self' https: 'unsafe-inline' *; ">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
  <meta content="black-translucent" name="apple-mobile-web-app-status-bar-style">
  <meta content="telephone=no" name="format-detection">
  <!-- import head_begin begin -->
  <!-- import head_begin end -->
  <!-- Custom Files headBegin begin-->
  
  <!-- Custom Files headBegin end-->
    <link rel="shortcut icon" type='image/x-icon' href="https://gcore.jsdelivr.net/gh/volantis-x/cdn-org/blog/favicon/favicon.ico">
  <link rel="preload" href="/css/style.css" as="style">
  <link rel="preload" href="https://unpkg.com/volantis-static@0.0.1654736714924/media/fonts/VarelaRound/VarelaRound-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
<link rel="preload" href="https://unpkg.com/volantis-static@0.0.1654736714924/media/fonts/UbuntuMono/UbuntuMono-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">

  <!-- feed -->
  <!-- 页面元数据 -->
  <title>威胁建模安全基础知识 - TARI TARI</title>
  <meta name="keywords" content="SDL,威胁建模,tarimoe,tari">
  <meta desc name="description" content="tari,tarimoe,taritari - TARI TARI - TARI TARI">
  
<meta property="og:type" content="article">
<meta property="og:title" content="威胁建模安全基础知识">
<meta property="og:url" content="https://tari.moe/p/2021/thread-modeling/index.html">
<meta property="og:site_name" content="TARI TARI">
<meta property="og:description" content="实习过程中零零碎碎学了一些，但还没系统学过，发现微软有个挺全面的，打算系统学习一波~ https:&#x2F;&#x2F;docs.microsoft.com&#x2F;zh-cn&#x2F;learn&#x2F;paths&#x2F;tm-threat-modeling-fundamentals&#x2F; 感觉讲的特别好…所以就直接索性一边看一边补充的 copy 下来了 威胁建模简介威胁建模是一种有助于保护系统、应用程序、网络和服务的有效技术。它可帮助你在开发生">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png">
<meta property="article:published_time" content="2021-04-04T04:54:33.000Z">
<meta property="article:modified_time" content="2022-02-01T04:24:06.068Z">
<meta property="article:author" content="TARI TARI">
<meta property="article:tag" content="SDL">
<meta property="article:tag" content="威胁建模">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png">
  <style>
    /* 首屏样式 */
    #safearea {
  display: none;
}
:root {
  --color-site-body: #f4f4f4;
  --color-site-bg: #f4f4f4;
  --color-site-inner: #fff;
  --color-site-footer: #666;
  --color-card: #fff;
  --color-text: #444;
  --color-block: #f6f6f6;
  --color-inlinecode: #c74f00;
  --color-codeblock: #fff7ea;
  --color-h1: #3a3a3a;
  --color-h2: #3a3a3a;
  --color-h3: #333;
  --color-h4: #444;
  --color-h5: #555;
  --color-h6: #666;
  --color-p: #444;
  --color-list: #666;
  --color-list-hl: #30ad91;
  --color-meta: #888;
  --color-read-bkg: #e0d8c8;
  --color-read-post: #f8f1e2;
  --color-copyright-bkg: #f5f5f5;
}
* {
  box-sizing: border-box;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  outline: none;
  margin: 0;
  padding: 0;
}
*::-webkit-scrollbar {
  height: 4px;
  width: 4px;
}
*::-webkit-scrollbar-track-piece {
  background: transparent;
}
*::-webkit-scrollbar-thumb {
  background: #3dd9b6;
  cursor: pointer;
  border-radius: 2px;
  -webkit-border-radius: 2px;
}
*::-webkit-scrollbar-thumb:hover {
  background: #ff5722;
}
html {
  color: var(--color-text);
  width: 100%;
  height: 100%;
  font-family: UbuntuMono, "Varela Round", "PingFang SC", "Microsoft YaHei", Helvetica, Arial, Menlo, Monaco, monospace, sans-serif;
  font-size: 16px;
}
html >::-webkit-scrollbar {
  height: 4px;
  width: 4px;
}
html >::-webkit-scrollbar-track-piece {
  background: transparent;
}
html >::-webkit-scrollbar-thumb {
  background: #3dd9b6;
  cursor: pointer;
  border-radius: 2px;
  -webkit-border-radius: 2px;
}
html >::-webkit-scrollbar-thumb:hover {
  background: #ff5722;
}
body {
  background-color: var(--color-site-body);
  text-rendering: optimizelegibility;
  -webkit-tap-highlight-color: rgba(0,0,0,0);
  line-height: 1.6;
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
}
body.modal-active {
  overflow: hidden;
}
@media screen and (max-width: 680px) {
  body.modal-active {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }
}
a {
  color: #2092ec;
  cursor: pointer;
  text-decoration: none;
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
}
a:hover {
  color: #ff5722;
}
a:active,
a:hover {
  outline: 0;
}
ul,
ol {
  padding-left: 0;
}
ul li,
ol li {
  list-style: none;
}
header {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
}
img {
  border: 0;
  background: none;
  max-width: 100%;
}
svg:not(:root) {
  overflow: hidden;
}
hr {
  -moz-box-sizing: content-box;
  box-sizing: content-box;
  -webkit-box-sizing: content-box;
  -moz-box-sizing: content-box;
  height: 0;
  border: 0;
  border-radius: 1px;
  -webkit-border-radius: 1px;
  border-bottom: 1px solid rgba(68,68,68,0.1);
}
button,
input {
  color: inherit;
  font: inherit;
  margin: 0;
}
button {
  overflow: visible;
  text-transform: none;
  -webkit-appearance: button;
  cursor: pointer;
}
@supports (backdrop-filter: blur(20px)) {
  .blur {
    background: rgba(255,255,255,0.9) !important;
    backdrop-filter: saturate(200%) blur(20px);
  }
}
.shadow {
  box-shadow: 0 1px 2px 0px rgba(0,0,0,0.1);
  -webkit-box-shadow: 0 1px 2px 0px rgba(0,0,0,0.1);
}
.shadow.floatable {
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
}
.shadow.floatable:hover {
  box-shadow: 0 2px 4px 0px rgba(0,0,0,0.1), 0 4px 8px 0px rgba(0,0,0,0.1), 0 8px 16px 0px rgba(0,0,0,0.1);
  -webkit-box-shadow: 0 2px 4px 0px rgba(0,0,0,0.1), 0 4px 8px 0px rgba(0,0,0,0.1), 0 8px 16px 0px rgba(0,0,0,0.1);
}
#l_cover {
  min-height: 64px;
}
.cover-wrapper {
  top: 0;
  left: 0;
  max-width: 100%;
  height: 100vh;
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  flex-wrap: nowrap;
  -webkit-flex-wrap: nowrap;
  -khtml-flex-wrap: nowrap;
  -moz-flex-wrap: nowrap;
  -o-flex-wrap: nowrap;
  -ms-flex-wrap: nowrap;
  -webkit-box-direction: normal;
  -moz-box-direction: normal;
  -webkit-box-orient: vertical;
  -moz-box-orient: vertical;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
  align-items: center;
  align-self: center;
  align-content: center;
  color: var(--color-site-inner);
  padding: 0 16px;
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  position: relative;
  overflow: hidden;
  margin-bottom: -100px;
}
.cover-wrapper .cover-bg {
  position: absolute;
  width: 100%;
  height: 100%;
  background-position: center;
  background-size: cover;
  -webkit-background-size: cover;
  -moz-background-size: cover;
}
.cover-wrapper .cover-bg.lazyload:not(.loaded) {
  opacity: 0;
  -webkit-opacity: 0;
  -moz-opacity: 0;
}
.cover-wrapper .cover-bg.lazyload.loaded {
  animation-delay: 0s;
  animation-duration: 0.5s;
  animation-fill-mode: forwards;
  animation-timing-function: ease-out;
  animation-name: fadeIn;
}
@-moz-keyframes fadeIn {
  0% {
    opacity: 0;
    -webkit-opacity: 0;
    -moz-opacity: 0;
    filter: blur(12px);
    transform: scale(1.02);
    -webkit-transform: scale(1.02);
    -khtml-transform: scale(1.02);
    -moz-transform: scale(1.02);
    -o-transform: scale(1.02);
    -ms-transform: scale(1.02);
  }
  100% {
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@-webkit-keyframes fadeIn {
  0% {
    opacity: 0;
    -webkit-opacity: 0;
    -moz-opacity: 0;
    filter: blur(12px);
    transform: scale(1.02);
    -webkit-transform: scale(1.02);
    -khtml-transform: scale(1.02);
    -moz-transform: scale(1.02);
    -o-transform: scale(1.02);
    -ms-transform: scale(1.02);
  }
  100% {
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@-o-keyframes fadeIn {
  0% {
    opacity: 0;
    -webkit-opacity: 0;
    -moz-opacity: 0;
    filter: blur(12px);
    transform: scale(1.02);
    -webkit-transform: scale(1.02);
    -khtml-transform: scale(1.02);
    -moz-transform: scale(1.02);
    -o-transform: scale(1.02);
    -ms-transform: scale(1.02);
  }
  100% {
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@keyframes fadeIn {
  0% {
    opacity: 0;
    -webkit-opacity: 0;
    -moz-opacity: 0;
    filter: blur(12px);
    transform: scale(1.02);
    -webkit-transform: scale(1.02);
    -khtml-transform: scale(1.02);
    -moz-transform: scale(1.02);
    -o-transform: scale(1.02);
    -ms-transform: scale(1.02);
  }
  100% {
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
.cover-wrapper .cover-body {
  z-index: 1;
  position: relative;
  width: 100%;
  height: 100%;
}
.cover-wrapper#full {
  height: calc(100vh + 100px);
  padding-bottom: 100px;
}
.cover-wrapper#half {
  max-height: 640px;
  min-height: 400px;
  height: calc(36vh - 64px + 200px);
}
.cover-wrapper #scroll-down {
  width: 100%;
  height: 64px;
  position: absolute;
  bottom: 100px;
  text-align: center;
  cursor: pointer;
}
.cover-wrapper #scroll-down .scroll-down-effects {
  color: #fff;
  font-size: 24px;
  line-height: 64px;
  position: absolute;
  width: 24px;
  left: calc(50% - 12px);
  text-shadow: 0 1px 2px rgba(0,0,0,0.1);
  animation: scroll-down-effect 1.5s infinite;
  -webkit-animation: scroll-down-effect 1.5s infinite;
  -khtml-animation: scroll-down-effect 1.5s infinite;
  -moz-animation: scroll-down-effect 1.5s infinite;
  -o-animation: scroll-down-effect 1.5s infinite;
  -ms-animation: scroll-down-effect 1.5s infinite;
}
@-moz-keyframes scroll-down-effect {
  0% {
    top: 0;
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
  50% {
    top: -16px;
    opacity: 0.4;
    -webkit-opacity: 0.4;
    -moz-opacity: 0.4;
  }
  100% {
    top: 0;
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@-webkit-keyframes scroll-down-effect {
  0% {
    top: 0;
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
  50% {
    top: -16px;
    opacity: 0.4;
    -webkit-opacity: 0.4;
    -moz-opacity: 0.4;
  }
  100% {
    top: 0;
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@-o-keyframes scroll-down-effect {
  0% {
    top: 0;
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
  50% {
    top: -16px;
    opacity: 0.4;
    -webkit-opacity: 0.4;
    -moz-opacity: 0.4;
  }
  100% {
    top: 0;
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@keyframes scroll-down-effect {
  0% {
    top: 0;
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
  50% {
    top: -16px;
    opacity: 0.4;
    -webkit-opacity: 0.4;
    -moz-opacity: 0.4;
  }
  100% {
    top: 0;
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
.cover-wrapper .cover-body {
  margin-top: 64px;
  margin-bottom: 100px;
}
.cover-wrapper .cover-body,
.cover-wrapper .cover-body .top,
.cover-wrapper .cover-body .bottom {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  -webkit-box-direction: normal;
  -moz-box-direction: normal;
  -webkit-box-orient: vertical;
  -moz-box-orient: vertical;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  -webkit-justify-content: center;
  -khtml-justify-content: center;
  -moz-justify-content: center;
  -o-justify-content: center;
  -ms-justify-content: center;
  max-width: 100%;
}
.cover-wrapper .cover-body .bottom {
  margin-top: 32px;
}
.cover-wrapper .cover-body .title {
  font-family: "Varela Round", "PingFang SC", "Microsoft YaHei", Helvetica, Arial, Helvetica, monospace;
  font-size: 3.125rem;
  line-height: 1.2;
  text-shadow: 0 1px 2px rgba(0,0,0,0.1);
}
.cover-wrapper .cover-body .subtitle {
  font-size: 20px;
}
.cover-wrapper .cover-body .logo {
  max-height: 120px;
  max-width: calc(100% - 4 * 16px);
}
@media screen and (min-height: 1024px) {
  .cover-wrapper .cover-body .title {
    font-size: 3rem;
  }
  .cover-wrapper .cover-body .subtitle {
    font-size: 1.05rem;
  }
  .cover-wrapper .cover-body .logo {
    max-height: 150px;
  }
}
.cover-wrapper .cover-body .m_search {
  position: relative;
  max-width: calc(100% - 16px);
  width: 320px;
  vertical-align: middle;
}
.cover-wrapper .cover-body .m_search .form {
  position: relative;
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
  width: 100%;
}
.cover-wrapper .cover-body .m_search .icon,
.cover-wrapper .cover-body .m_search .input {
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
}
.cover-wrapper .cover-body .m_search .icon {
  position: absolute;
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
  line-height: 2.5rem;
  width: 32px;
  top: 0;
  left: 5px;
  color: rgba(68,68,68,0.75);
}
.cover-wrapper .cover-body .m_search .input {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
  height: 2.5rem;
  width: 100%;
  box-shadow: none;
  -webkit-box-shadow: none;
  box-sizing: border-box;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  font-size: 0.875rem;
  -webkit-appearance: none;
  padding-left: 36px;
  border-radius: 1.4rem;
  -webkit-border-radius: 1.4rem;
  background: rgba(255,255,255,0.6);
  backdrop-filter: blur(10px);
  border: none;
  color: var(--color-text);
}
@media screen and (max-width: 500px) {
  .cover-wrapper .cover-body .m_search .input {
    padding-left: 36px;
  }
}
.cover-wrapper .cover-body .m_search .input:hover {
  background: rgba(255,255,255,0.8);
}
.cover-wrapper .cover-body .m_search .input:focus {
  background: #fff;
}
.cover-wrapper .list-h {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  -webkit-box-direction: normal;
  -moz-box-direction: normal;
  -webkit-box-orient: horizontal;
  -moz-box-orient: horizontal;
  -webkit-flex-direction: row;
  -ms-flex-direction: row;
  flex-direction: row;
  flex-wrap: wrap;
  -webkit-flex-wrap: wrap;
  -khtml-flex-wrap: wrap;
  -moz-flex-wrap: wrap;
  -o-flex-wrap: wrap;
  -ms-flex-wrap: wrap;
  align-items: stretch;
  border-radius: 4px;
  -webkit-border-radius: 4px;
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}
.cover-wrapper .list-h a {
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -webkit-flex: 1 0;
  -ms-flex: 1 0;
  flex: 1 0;
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  font-weight: 600;
}
.cover-wrapper .list-h a img {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
  border-radius: 2px;
  -webkit-border-radius: 2px;
  margin: 4px;
  min-width: 40px;
  max-width: 44px;
}
@media screen and (max-width: 768px) {
  .cover-wrapper .list-h a img {
    min-width: 36px;
    max-width: 40px;
  }
}
@media screen and (max-width: 500px) {
  .cover-wrapper .list-h a img {
    margin: 2px 4px;
    min-width: 32px;
    max-width: 36px;
  }
}
@media screen and (max-width: 375px) {
  .cover-wrapper .list-h a img {
    min-width: 28px;
    max-width: 32px;
  }
}
.cover-wrapper {
  max-width: 100%;
}
.cover-wrapper.search .bottom .menu {
  margin-top: 16px;
}
.cover-wrapper.search .bottom .menu .list-h a {
  white-space: nowrap;
  -webkit-box-direction: normal;
  -moz-box-direction: normal;
  -webkit-box-orient: horizontal;
  -moz-box-orient: horizontal;
  -webkit-flex-direction: row;
  -ms-flex-direction: row;
  flex-direction: row;
  align-items: baseline;
  padding: 2px;
  margin: 4px;
  color: var(--color-site-inner);
  opacity: 0.75;
  -webkit-opacity: 0.75;
  -moz-opacity: 0.75;
  text-shadow: 0 1px 2px rgba(0,0,0,0.05);
  border-bottom: 2px solid transparent;
}
.cover-wrapper.search .bottom .menu .list-h a i {
  margin-right: 4px;
}
.cover-wrapper.search .bottom .menu .list-h a p {
  font-size: 0.9375rem;
}
.cover-wrapper.search .bottom .menu .list-h a:hover,
.cover-wrapper.search .bottom .menu .list-h a.active,
.cover-wrapper.search .bottom .menu .list-h a:active {
  opacity: 1;
  -webkit-opacity: 1;
  -moz-opacity: 1;
  border-bottom: 2px solid var(--color-site-inner);
}
.cover-wrapper.dock .menu,
.cover-wrapper.featured .menu,
.cover-wrapper.focus .menu {
  border-radius: 6px;
  -webkit-border-radius: 6px;
}
.cover-wrapper.dock .menu .list-h a,
.cover-wrapper.featured .menu .list-h a,
.cover-wrapper.focus .menu .list-h a {
  -webkit-box-direction: normal;
  -moz-box-direction: normal;
  -webkit-box-orient: vertical;
  -moz-box-orient: vertical;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
  align-items: center;
  padding: 12px;
  line-height: 24px;
  border-radius: 4px;
  -webkit-border-radius: 4px;
  border-bottom: none;
  text-align: center;
  align-content: flex-end;
  color: rgba(68,68,68,0.7);
  font-size: 1.5rem;
}
@media screen and (max-width: 500px) {
  .cover-wrapper.dock .menu .list-h a,
  .cover-wrapper.featured .menu .list-h a,
  .cover-wrapper.focus .menu .list-h a {
    padding: 12px 8px;
  }
}
.cover-wrapper.dock .menu .list-h a i,
.cover-wrapper.featured .menu .list-h a i,
.cover-wrapper.focus .menu .list-h a i {
  margin: 8px;
}
.cover-wrapper.dock .menu .list-h a p,
.cover-wrapper.featured .menu .list-h a p,
.cover-wrapper.focus .menu .list-h a p {
  font-size: 0.875rem;
}
.cover-wrapper.dock .menu .list-h a.active,
.cover-wrapper.featured .menu .list-h a.active,
.cover-wrapper.focus .menu .list-h a.active {
  background: var(--color-card);
  backdrop-filter: none;
}
.cover-wrapper.dock .menu .list-h a.active i,
.cover-wrapper.featured .menu .list-h a.active i,
.cover-wrapper.focus .menu .list-h a.active i,
.cover-wrapper.dock .menu .list-h a.active i+p,
.cover-wrapper.featured .menu .list-h a.active i+p,
.cover-wrapper.focus .menu .list-h a.active i+p {
  color: #3dd9b6;
}
.cover-wrapper.dock .menu .list-h a.active img+p,
.cover-wrapper.featured .menu .list-h a.active img+p,
.cover-wrapper.focus .menu .list-h a.active img+p {
  color: var(--color-text);
}
.cover-wrapper.dock .menu .list-h a:hover,
.cover-wrapper.featured .menu .list-h a:hover,
.cover-wrapper.focus .menu .list-h a:hover {
  background: var(--color-card);
}
.cover-wrapper.dock .top {
  margin-bottom: 48px;
}
.cover-wrapper.dock .menu {
  background: rgba(255,255,255,0.5);
  position: absolute;
  bottom: 0;
  max-width: 100%;
}
.cover-wrapper.dock .menu .list-h {
  flex-wrap: nowrap;
  -webkit-flex-wrap: nowrap;
  -khtml-flex-wrap: nowrap;
  -moz-flex-wrap: nowrap;
  -o-flex-wrap: nowrap;
  -ms-flex-wrap: nowrap;
  margin: 4px;
}
.cover-wrapper.dock .menu .list-h a+a {
  margin-left: 4px;
}
@media screen and (max-width: 500px) {
  .cover-wrapper.dock .menu .list-h {
    overflow-x: scroll;
  }
  .cover-wrapper.dock .menu .list-h::-webkit-scrollbar {
    height: 0;
    width: 0;
  }
  .cover-wrapper.dock .menu .list-h::-webkit-scrollbar-track-piece {
    background: transparent;
  }
  .cover-wrapper.dock .menu .list-h::-webkit-scrollbar-thumb {
    background: #3dd9b6;
    cursor: pointer;
    border-radius: 0;
    -webkit-border-radius: 0;
  }
  .cover-wrapper.dock .menu .list-h::-webkit-scrollbar-thumb:hover {
    background: #ff5722;
  }
}
@supports (backdrop-filter: blur(20px)) {
  .cover-wrapper.dock .menu {
    background: rgba(255,255,255,0.5);
    backdrop-filter: saturate(200%) blur(20px);
  }
}
@font-face {
  font-family: 'UbuntuMono';
  src: url("https://unpkg.com/volantis-static@0.0.1654736714924/media/fonts/UbuntuMono/UbuntuMono-Regular.ttf");
  font-weight: 'normal';
  font-style: 'normal';
  font-display: swap;
}
@font-face {
  font-family: 'Varela Round';
  src: url("https://unpkg.com/volantis-static@0.0.1654736714924/media/fonts/VarelaRound/VarelaRound-Regular.ttf");
  font-weight: 'normal';
  font-style: 'normal';
  font-display: swap;
}
.l_header {
  position: fixed;
  z-index: 1000;
  top: 0;
  width: 100%;
  height: 64px;
  background: var(--color-card);
  box-shadow: 0 1px 2px 0px rgba(0,0,0,0.1);
  -webkit-box-shadow: 0 1px 2px 0px rgba(0,0,0,0.1);
}
.l_header.auto {
  transition: opacity 0.4s ease;
  -webkit-transition: opacity 0.4s ease;
  -khtml-transition: opacity 0.4s ease;
  -moz-transition: opacity 0.4s ease;
  -o-transition: opacity 0.4s ease;
  -ms-transition: opacity 0.4s ease;
  visibility: hidden;
}
.l_header.auto.show {
  opacity: 1 !important;
  -webkit-opacity: 1 !important;
  -moz-opacity: 1 !important;
  visibility: visible;
}
.l_header .container {
  margin-left: 16px;
  margin-right: 16px;
}
.l_header #wrapper {
  height: 100%;
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}
.l_header #wrapper .nav-main,
.l_header #wrapper .nav-sub {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  flex-wrap: nowrap;
  -webkit-flex-wrap: nowrap;
  -khtml-flex-wrap: nowrap;
  -moz-flex-wrap: nowrap;
  -o-flex-wrap: nowrap;
  -ms-flex-wrap: nowrap;
  justify-content: space-between;
  -webkit-justify-content: space-between;
  -khtml-justify-content: space-between;
  -moz-justify-content: space-between;
  -o-justify-content: space-between;
  -ms-justify-content: space-between;
  align-items: center;
}
.l_header #wrapper .nav-main {
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
}
.l_header #wrapper.sub .nav-main {
  transform: translateY(-64px);
  -webkit-transform: translateY(-64px);
  -khtml-transform: translateY(-64px);
  -moz-transform: translateY(-64px);
  -o-transform: translateY(-64px);
  -ms-transform: translateY(-64px);
}
.l_header #wrapper .nav-sub {
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
  opacity: 0;
  -webkit-opacity: 0;
  -moz-opacity: 0;
  height: 64px;
  width: calc(100% - 2 * 16px);
  position: absolute;
}
.l_header #wrapper .nav-sub ::-webkit-scrollbar {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: none;
}
@media screen and (min-width: 2048px) {
  .l_header #wrapper .nav-sub {
    max-width: 55vw;
    margin: auto;
  }
}
.l_header #wrapper.sub .nav-sub {
  opacity: 1;
  -webkit-opacity: 1;
  -moz-opacity: 1;
}
.l_header #wrapper .title {
  position: relative;
  color: var(--color-text);
  padding-left: 24px;
  max-height: 64px;
}
.l_header #wrapper .nav-main .title {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  flex-shrink: 0;
  line-height: 64px;
  padding: 0 24px;
  font-size: 1.25rem;
  font-family: "Varela Round", "PingFang SC", "Microsoft YaHei", Helvetica, Arial, Helvetica, monospace;
}
.l_header #wrapper .nav-main .title img {
  height: 64px;
}
.l_header .nav-sub {
  max-width: 1080px;
  margin: auto;
}
.l_header .nav-sub .title {
  font-weight: bold;
  font-family: UbuntuMono, "Varela Round", "PingFang SC", "Microsoft YaHei", Helvetica, Arial, Menlo, Monaco, monospace, sans-serif;
  line-height: 1.2;
  max-height: 64px;
  white-space: normal;
  flex-shrink: 1;
}
.l_header .switcher {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: none;
  line-height: 64px;
  align-items: center;
}
.l_header .switcher .s-toc {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: none;
}
@media screen and (max-width: 768px) {
  .l_header .switcher .s-toc {
    display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
    display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
    display: -ms-flexbox /* TWEENER - IE 10 */;
    display: -webkit-flex /* NEW - Chrome */;
    display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
    display: flex;
  }
}
.l_header .switcher >li {
  height: 48px;
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
  margin: 2px;
}
@media screen and (max-width: 500px) {
  .l_header .switcher >li {
    margin: 0 1px;
    height: 48px;
  }
}
.l_header .switcher >li >a {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  justify-content: center;
  -webkit-justify-content: center;
  -khtml-justify-content: center;
  -moz-justify-content: center;
  -o-justify-content: center;
  -ms-justify-content: center;
  align-items: center;
  width: 48px;
  height: 48px;
  padding: 0.85em 1.1em;
  border-radius: 100px;
  -webkit-border-radius: 100px;
  border: none;
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
  color: #3dd9b6;
}
.l_header .switcher >li >a:hover {
  border: none;
}
.l_header .switcher >li >a.active,
.l_header .switcher >li >a:active {
  border: none;
  background: var(--color-site-bg);
}
@media screen and (max-width: 500px) {
  .l_header .switcher >li >a {
    width: 36px;
    height: 48px;
  }
}
.l_header .nav-sub .switcher {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
}
.l_header .m_search {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  height: 64px;
  width: 240px;
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
}
@media screen and (max-width: 1024px) {
  .l_header .m_search {
    width: 44px;
    min-width: 44px;
  }
  .l_header .m_search input::placeholder {
    opacity: 0;
    -webkit-opacity: 0;
    -moz-opacity: 0;
  }
  .l_header .m_search:hover {
    width: 240px;
  }
  .l_header .m_search:hover input::placeholder {
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@media screen and (min-width: 500px) {
  .l_header .m_search:hover .input {
    width: 100%;
  }
  .l_header .m_search:hover .input::placeholder {
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
@media screen and (max-width: 500px) {
  .l_header .m_search {
    min-width: 0;
  }
  .l_header .m_search input::placeholder {
    opacity: 1;
    -webkit-opacity: 1;
    -moz-opacity: 1;
  }
}
.l_header .m_search .form {
  position: relative;
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  width: 100%;
  align-items: center;
}
.l_header .m_search .icon {
  position: absolute;
  width: 36px;
  left: 5px;
  color: var(--color-meta);
}
@media screen and (max-width: 500px) {
  .l_header .m_search .icon {
    display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
    display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
    display: none;
  }
}
.l_header .m_search .input {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
  padding-top: 8px;
  padding-bottom: 8px;
  line-height: 1.3;
  width: 100%;
  color: var(--color-text);
  background: #fafafa;
  box-shadow: none;
  -webkit-box-shadow: none;
  box-sizing: border-box;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  padding-left: 40px;
  font-size: 0.875rem;
  border-radius: 8px;
  -webkit-border-radius: 8px;
  border: none;
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
}
@media screen and (min-width: 500px) {
  .l_header .m_search .input:focus {
    box-shadow: 0 4px 8px 0px rgba(0,0,0,0.1);
    -webkit-box-shadow: 0 4px 8px 0px rgba(0,0,0,0.1);
  }
}
@media screen and (max-width: 500px) {
  .l_header .m_search .input {
    background: var(--color-block);
    padding-left: 8px;
    border: none;
  }
  .l_header .m_search .input:hover,
  .l_header .m_search .input:focus {
    border: none;
  }
}
@media (max-width: 500px) {
  .l_header .m_search {
    left: 0;
    width: 0;
    overflow: hidden;
    position: absolute;
    background: #fff;
    transition: all 0.28s ease;
    -webkit-transition: all 0.28s ease;
    -khtml-transition: all 0.28s ease;
    -moz-transition: all 0.28s ease;
    -o-transition: all 0.28s ease;
    -ms-transition: all 0.28s ease;
  }
  .l_header .m_search .input {
    border-radius: 32px;
    -webkit-border-radius: 32px;
    margin-left: 16px;
    padding-left: 16px;
  }
  .l_header.z_search-open .m_search {
    width: 100%;
  }
  .l_header.z_search-open .m_search .input {
    width: calc(100% - 120px);
  }
}
ul.m-pc >li>a {
  color: inherit;
  border-bottom: 2px solid transparent;
}
ul.m-pc >li>a:active,
ul.m-pc >li>a.active {
  border-bottom: 2px solid #3dd9b6;
}
ul.m-pc li:hover >ul.list-v,
ul.list-v li:hover >ul.list-v {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
}
ul.nav-list-h {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: -ms-flexbox /* TWEENER - IE 10 */;
  display: -webkit-flex /* NEW - Chrome */;
  display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
  display: flex;
  align-items: stretch;
}
ul.nav-list-h>li {
  position: relative;
  justify-content: center;
  -webkit-justify-content: center;
  -khtml-justify-content: center;
  -moz-justify-content: center;
  -o-justify-content: center;
  -ms-justify-content: center;
  height: 100%;
  line-height: 2.4;
  border-radius: 4px;
  -webkit-border-radius: 4px;
}
ul.nav-list-h>li >a {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  font-weight: 600;
}
ul.list-v {
  z-index: 1;
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: none;
  position: absolute;
  background: var(--color-card);
  box-shadow: 0 2px 4px 0px rgba(0,0,0,0.08), 0 4px 8px 0px rgba(0,0,0,0.08), 0 8px 16px 0px rgba(0,0,0,0.08);
  -webkit-box-shadow: 0 2px 4px 0px rgba(0,0,0,0.08), 0 4px 8px 0px rgba(0,0,0,0.08), 0 8px 16px 0px rgba(0,0,0,0.08);
  margin-top: -6px;
  border-radius: 4px;
  -webkit-border-radius: 4px;
  padding: 8px 0;
}
ul.list-v.show {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
}
ul.list-v hr {
  margin-top: 8px;
  margin-bottom: 8px;
}
ul.list-v >li {
  white-space: nowrap;
  word-break: keep-all;
}
ul.list-v >li.header {
  font-size: 0.78125rem;
  font-weight: bold;
  line-height: 2em;
  color: var(--color-meta);
  margin: 8px 16px 4px;
}
ul.list-v >li.header i {
  margin-right: 8px;
}
ul.list-v >li ul {
  margin-left: 0;
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: none;
  margin-top: -40px;
}
ul.list-v .aplayer-container {
  min-height: 64px;
  padding: 6px 16px;
}
ul.list-v >li>a {
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
  color: var(--color-list);
  font-size: 0.875rem;
  font-weight: bold;
  line-height: 36px;
  padding: 0 20px 0 16px;
  text-overflow: ellipsis;
  margin: 0 4px;
  border-radius: 4px;
  -webkit-border-radius: 4px;
}
@media screen and (max-width: 1024px) {
  ul.list-v >li>a {
    line-height: 40px;
  }
}
ul.list-v >li>a >i {
  margin-right: 8px;
}
ul.list-v >li>a:active,
ul.list-v >li>a.active {
  color: var(--color-list-hl);
}
ul.list-v >li>a:hover {
  color: var(--color-list-hl);
  background: var(--color-site-bg);
}
.l_header .menu >ul>li>a {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: block;
  padding: 0 8px;
}
.l_header .menu >ul>li>a >i {
  margin-right: 4px;
}
.l_header ul.nav-list-h>li {
  color: var(--color-list);
  line-height: 64px;
}
.l_header ul.nav-list-h>li >a {
  max-height: 64px;
  overflow: hidden;
  color: inherit;
}
.l_header ul.nav-list-h>li >a:active,
.l_header ul.nav-list-h>li >a.active {
  color: #3dd9b6;
}
.l_header ul.nav-list-h>li:hover>a {
  color: var(--color-list-hl);
}
.l_header ul.nav-list-h>li i.music {
  animation: rotate-effect 1.5s linear infinite;
  -webkit-animation: rotate-effect 1.5s linear infinite;
  -khtml-animation: rotate-effect 1.5s linear infinite;
  -moz-animation: rotate-effect 1.5s linear infinite;
  -o-animation: rotate-effect 1.5s linear infinite;
  -ms-animation: rotate-effect 1.5s linear infinite;
}
@-moz-keyframes rotate-effect {
  0% {
    transform: rotate(0);
    -webkit-transform: rotate(0);
    -khtml-transform: rotate(0);
    -moz-transform: rotate(0);
    -o-transform: rotate(0);
    -ms-transform: rotate(0);
  }
  25% {
    transform: rotate(90deg);
    -webkit-transform: rotate(90deg);
    -khtml-transform: rotate(90deg);
    -moz-transform: rotate(90deg);
    -o-transform: rotate(90deg);
    -ms-transform: rotate(90deg);
  }
  50% {
    transform: rotate(180deg);
    -webkit-transform: rotate(180deg);
    -khtml-transform: rotate(180deg);
    -moz-transform: rotate(180deg);
    -o-transform: rotate(180deg);
    -ms-transform: rotate(180deg);
  }
  75% {
    transform: rotate(270deg);
    -webkit-transform: rotate(270deg);
    -khtml-transform: rotate(270deg);
    -moz-transform: rotate(270deg);
    -o-transform: rotate(270deg);
    -ms-transform: rotate(270deg);
  }
  100% {
    transform: rotate(360deg);
    -webkit-transform: rotate(360deg);
    -khtml-transform: rotate(360deg);
    -moz-transform: rotate(360deg);
    -o-transform: rotate(360deg);
    -ms-transform: rotate(360deg);
  }
}
@-webkit-keyframes rotate-effect {
  0% {
    transform: rotate(0);
    -webkit-transform: rotate(0);
    -khtml-transform: rotate(0);
    -moz-transform: rotate(0);
    -o-transform: rotate(0);
    -ms-transform: rotate(0);
  }
  25% {
    transform: rotate(90deg);
    -webkit-transform: rotate(90deg);
    -khtml-transform: rotate(90deg);
    -moz-transform: rotate(90deg);
    -o-transform: rotate(90deg);
    -ms-transform: rotate(90deg);
  }
  50% {
    transform: rotate(180deg);
    -webkit-transform: rotate(180deg);
    -khtml-transform: rotate(180deg);
    -moz-transform: rotate(180deg);
    -o-transform: rotate(180deg);
    -ms-transform: rotate(180deg);
  }
  75% {
    transform: rotate(270deg);
    -webkit-transform: rotate(270deg);
    -khtml-transform: rotate(270deg);
    -moz-transform: rotate(270deg);
    -o-transform: rotate(270deg);
    -ms-transform: rotate(270deg);
  }
  100% {
    transform: rotate(360deg);
    -webkit-transform: rotate(360deg);
    -khtml-transform: rotate(360deg);
    -moz-transform: rotate(360deg);
    -o-transform: rotate(360deg);
    -ms-transform: rotate(360deg);
  }
}
@-o-keyframes rotate-effect {
  0% {
    transform: rotate(0);
    -webkit-transform: rotate(0);
    -khtml-transform: rotate(0);
    -moz-transform: rotate(0);
    -o-transform: rotate(0);
    -ms-transform: rotate(0);
  }
  25% {
    transform: rotate(90deg);
    -webkit-transform: rotate(90deg);
    -khtml-transform: rotate(90deg);
    -moz-transform: rotate(90deg);
    -o-transform: rotate(90deg);
    -ms-transform: rotate(90deg);
  }
  50% {
    transform: rotate(180deg);
    -webkit-transform: rotate(180deg);
    -khtml-transform: rotate(180deg);
    -moz-transform: rotate(180deg);
    -o-transform: rotate(180deg);
    -ms-transform: rotate(180deg);
  }
  75% {
    transform: rotate(270deg);
    -webkit-transform: rotate(270deg);
    -khtml-transform: rotate(270deg);
    -moz-transform: rotate(270deg);
    -o-transform: rotate(270deg);
    -ms-transform: rotate(270deg);
  }
  100% {
    transform: rotate(360deg);
    -webkit-transform: rotate(360deg);
    -khtml-transform: rotate(360deg);
    -moz-transform: rotate(360deg);
    -o-transform: rotate(360deg);
    -ms-transform: rotate(360deg);
  }
}
@keyframes rotate-effect {
  0% {
    transform: rotate(0);
    -webkit-transform: rotate(0);
    -khtml-transform: rotate(0);
    -moz-transform: rotate(0);
    -o-transform: rotate(0);
    -ms-transform: rotate(0);
  }
  25% {
    transform: rotate(90deg);
    -webkit-transform: rotate(90deg);
    -khtml-transform: rotate(90deg);
    -moz-transform: rotate(90deg);
    -o-transform: rotate(90deg);
    -ms-transform: rotate(90deg);
  }
  50% {
    transform: rotate(180deg);
    -webkit-transform: rotate(180deg);
    -khtml-transform: rotate(180deg);
    -moz-transform: rotate(180deg);
    -o-transform: rotate(180deg);
    -ms-transform: rotate(180deg);
  }
  75% {
    transform: rotate(270deg);
    -webkit-transform: rotate(270deg);
    -khtml-transform: rotate(270deg);
    -moz-transform: rotate(270deg);
    -o-transform: rotate(270deg);
    -ms-transform: rotate(270deg);
  }
  100% {
    transform: rotate(360deg);
    -webkit-transform: rotate(360deg);
    -khtml-transform: rotate(360deg);
    -moz-transform: rotate(360deg);
    -o-transform: rotate(360deg);
    -ms-transform: rotate(360deg);
  }
}
.menu-phone li ul.list-v {
  right: calc(100% - 0.5 * 16px);
}
.menu-phone li ul.list-v ul {
  right: calc(100% - 0.5 * 16px);
}
#wrapper {
  max-width: 1080px;
  margin: auto;
}
@media screen and (min-width: 2048px) {
  #wrapper {
    max-width: 55vw;
  }
}
#wrapper .menu {
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -webkit-flex: 1 1;
  -ms-flex: 1 1;
  flex: 1 1;
  margin: 0 16px 0 0;
}
#wrapper .menu .list-v ul {
  left: calc(100% - 0.5 * 16px);
}
.menu-phone {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: none;
  margin-top: 16px;
  right: 8px;
  transition: all 0.28s ease;
  -webkit-transition: all 0.28s ease;
  -khtml-transition: all 0.28s ease;
  -moz-transition: all 0.28s ease;
  -o-transition: all 0.28s ease;
  -ms-transition: all 0.28s ease;
}
.menu-phone ul {
  right: calc(100% - 0.5 * 16px);
}
@media screen and (max-width: 500px) {
  .menu-phone {
    display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
    display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
    display: block;
  }
}
.l_header {
  max-width: 65vw;
  left: calc((100% - 65vw) * 0.5);
  border-bottom-left-radius: 8px;
  border-bottom-right-radius: 8px;
}
@media screen and (max-width: 2048px) {
  .l_header {
    max-width: 1112px;
    left: calc((100% - 1112px) * 0.5);
  }
}
@media screen and (max-width: 1112px) {
  .l_header {
    left: 0;
    border-radius: 0;
    -webkit-border-radius: 0;
    max-width: 100%;
  }
}
@media screen and (max-width: 500px) {
  .l_header .container {
    margin-left: 0;
    margin-right: 0;
  }
  .l_header #wrapper .nav-main .title {
    padding-left: 16px;
    padding-right: 16px;
  }
  .l_header #wrapper .nav-sub {
    width: 100%;
  }
  .l_header #wrapper .nav-sub .title {
    overflow-y: scroll;
    margin-top: 2px;
    padding: 8px 16px;
  }
  .l_header #wrapper .switcher {
    display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
    display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
    display: -ms-flexbox /* TWEENER - IE 10 */;
    display: -webkit-flex /* NEW - Chrome */;
    display: flex /* NEW, Spec - Opera 12.1, Firefox 20+ */;
    display: flex;
    margin-right: 8px;
  }
  .l_header .menu {
    display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
    display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
    display: none;
  }
}
@media screen and (max-width: 500px) {
  .list-v li {
    max-width: 270px;
  }
}
#u-search {
  display: -webkit-box /* OLD - iOS 6-, Safari 3.1-6 */;
  display: -moz-box /* OLD - Firefox 19- (buggy but mostly works) */;
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  padding: 60px 20px;
  z-index: 1001;
}
@media screen and (max-width: 680px) {
  #u-search {
    padding: 0px;
  }
}

  </style>
  <link rel="stylesheet" href="/css/style.css" media="print" onload="this.media='all';this.onload=null">
  <noscript><link rel="stylesheet" href="/css/style.css"></noscript>
  
<script>
if (/*@cc_on!@*/false || (!!window.MSInputMethodContext && !!document.documentMode))
    document.write(
	'<style>'+
		'html{'+
			'overflow-x: hidden !important;'+
			'overflow-y: hidden !important;'+
		'}'+
		'.kill-ie{'+
			'text-align:center;'+
			'height: 100%;'+
			'margin-top: 15%;'+
			'margin-bottom: 5500%;'+
		'}'+
    '.kill-t{'+
      'font-size: 2rem;'+
    '}'+
    '.kill-c{'+
      'font-size: 1.2rem;'+
    '}'+
		'#l_header,#l_body{'+
			'display: none;'+
		'}'+
	'</style>'+
    '<div class="kill-ie">'+
        `<span class="kill-t"><b>抱歉，您的浏览器无法访问本站</b></span><br/>`+
        `<span class="kill-c">微软已经于2016年终止了对 Internet Explorer (IE) 10 及更早版本的支持，<br/>继续使用存在极大的安全隐患，请使用当代主流的浏览器进行访问。</span><br/>`+
        `<a target="_blank" rel="noopener" href="https://blogs.windows.com/windowsexperience/2021/05/19/the-future-of-internet-explorer-on-windows-10-is-in-microsoft-edge/"><strong>了解详情 ></strong></a>`+
    '</div>');
</script>


<noscript>
	<style>
		html{
			overflow-x: hidden !important;
			overflow-y: hidden !important;
		}
		.kill-noscript{
			text-align:center;
			height: 100%;
			margin-top: 15%;
			margin-bottom: 5500%;
		}
    .kill-t{
      font-size: 2rem;
    }
    .kill-c{
      font-size: 1.2rem;
    }
		#l_header,#l_body{
			display: none;
		}
	</style>
    <div class="kill-noscript">
        <span class="kill-t"><b>抱歉，您的浏览器无法访问本站</b></span><br/>
        <span class="kill-c">本页面需要浏览器支持（启用）JavaScript</span><br/>
        <a target="_blank" rel="noopener" href="https://www.baidu.com/s?wd=启用JavaScript"><strong>了解详情 ></strong></a>
    </div>
</noscript>


  <script>
  /************这个文件存放不需要重载的全局变量和全局函数*********/
  window.volantis = {}; // volantis 全局变量
  volantis.debug = "env"; // 调试模式
  volantis.dom = {}; // 页面Dom see: /source/js/app.js etc.

  volantis.GLOBAL_CONFIG ={
    debug: "env",
    cdn: {"js":{"app":"/js/app.js","parallax":"/js/plugins/parallax.js","rightMenu":"/js/plugins/rightMenu.js","rightMenus":"/js/plugins/rightMenus.js","sites":"/js/plugins/tags/sites.js","friends":"/js/plugins/tags/friends.js","contributors":"/js/plugins/tags/contributors.js","search":"/js/search/hexo.js"},"css":{"style":"/css/style.css"}},
    default: {"avatar":"https://unpkg.com/volantis-static@0.0.1654736714924/media/placeholder/avatar/round/3442075.svg","link":"https://unpkg.com/volantis-static@0.0.1654736714924/media/placeholder/link/8f277b4ee0ecd.svg","cover":"https://unpkg.com/volantis-static@0.0.1654736714924/media/placeholder/cover/76b86c0226ffd.svg","image":"https://unpkg.com/volantis-static@0.0.1654736714924/media/placeholder/image/2659360.svg"},
    lastupdate: new Date(1676724345230),
    sidebar: {
      for_page: ["tagcloud","webinfo","category"],
      for_post: ["toc"],
      webinfo: {
        lastupd: {
          enable: true,
          friendlyShow: true
        },
        runtime: {
          data: "2020/01/01",
          unit: "天"
        }
      }
    },
    plugins: {
      message: {"enable":true,"css":"https://unpkg.com/volantis-static@0.0.1654736714924/libs/izitoast/dist/css/iziToast.min.css","js":"https://unpkg.com/volantis-static@0.0.1654736714924/libs/izitoast/dist/js/iziToast.min.js","icon":{"default":"fa-solid fa-info-circle light-blue","quection":"fa-solid fa-question-circle light-blue"},"time":{"default":5000,"quection":20000},"position":"topRight","transitionIn":"bounceInLeft","transitionOut":"fadeOutRight","titleColor":"var(--color-text)","messageColor":"var(--color-text)","backgroundColor":"var(--color-card)","zindex":2147483647,"copyright":{"enable":true,"title":"知识共享许可协议","message":"请遵守 CC BY-NC-SA 4.0 协议。","icon":"far fa-copyright light-blue"},"aplayer":{"enable":true,"play":"fa-solid fa-play","pause":"fa-solid fa-pause"},"rightmenu":{"enable":true,"notice":true}},
      fancybox: {"css":"https://unpkg.com/volantis-static@0.0.1654736714924/libs/@fancyapps/ui/dist/fancybox.css","js":"https://unpkg.com/volantis-static@0.0.1654736714924/libs/@fancyapps/ui/dist/fancybox.umd.js"},
      
      
      
    }
  }

  /******************** volantis.EventListener ********************************/
  // 事件监听器 see: /source/js/app.js
  volantis.EventListener = {}
  // 这里存放pjax切换页面时将被移除的事件监听器
  volantis.EventListener.list = []
  //构造方法
  function volantisEventListener(type, f, ele) {
    this.type = type
    this.f = f
    this.ele = ele
  }
  // 移除事件监听器
  volantis.EventListener.remove = () => {
    volantis.EventListener.list.forEach(function (i) {
      i.ele.removeEventListener(i.type, i.f, false)
    })
    volantis.EventListener.list = []
  }
  /******************** volantis.dom.$ ********************************/
  // 注：这里没有选择器，也没有forEach一次只处理一个dom，这里重新封装主题常用的dom方法，返回的是dom对象，对象包含了以下方法，同时保留dom的原生API
  function volantisDom(ele) {
    if (!ele) ele = document.createElement("div")
    this.ele = ele;
    // ==============================================================
    this.ele.find = (c) => {
      let q = this.ele.querySelector(c)
      if (q)
        return new volantisDom(q)
    }
    // ==============================================================
    this.ele.hasClass = (c) => {
      return this.ele.className.match(new RegExp('(\\s|^)' + c + '(\\s|$)'));
    }
    this.ele.addClass = (c) => {
      this.ele.classList.add(c);
      return this.ele
    }
    this.ele.removeClass = (c) => {
      this.ele.classList.remove(c);
      return this.ele
    }
    this.ele.toggleClass = (c) => {
      if (this.ele.hasClass(c)) {
        this.ele.removeClass(c)
      } else {
        this.ele.addClass(c)
      }
      return this.ele
    }
    // ==============================================================
    // 参数 r 为 true 表示pjax切换页面时事件监听器将被移除，false不移除
    this.ele.on = (c, f, r = 1) => {
      this.ele.addEventListener(c, f, false)
      if (r) {
        volantis.EventListener.list.push(new volantisEventListener(c, f, this.ele))
      }
      return this.ele
    }
    this.ele.click = (f, r) => {
      this.ele.on("click", f, r)
      return this.ele
    }
    this.ele.scroll = (f, r) => {
      this.ele.on("scroll", f, r)
      return this.ele
    }
    // ==============================================================
    this.ele.html = (c) => {
      // if(c=== undefined){
      //   return this.ele.innerHTML
      // }else{
      this.ele.innerHTML = c
      return this.ele
      // }
    }
    // ==============================================================
    this.ele.hide = (c) => {
      this.ele.style.display = "none"
      return this.ele
    }
    this.ele.show = (c) => {
      this.ele.style.display = "block"
      return this.ele
    }
    // ==============================================================
    return this.ele
  }
  volantis.dom.$ = (ele) => {
    return !!ele ? new volantisDom(ele) : null;
  }
  /******************** RunItem ********************************/
  function RunItem() {
    this.list = []; // 存放回调函数
    this.start = () => {
      for (var i = 0; i < this.list.length; i++) {
        this.list[i].run();
      }
    };
    this.push = (fn, name, setRequestAnimationFrame = true) => {
      let myfn = fn
      if (setRequestAnimationFrame) {
        myfn = ()=>{
          volantis.requestAnimationFrame(fn)
        }
      }
      var f = new Item(myfn, name);
      this.list.push(f);
    };
    this.remove = (name) =>{
      for (let index = 0; index < this.list.length; index++) {
        const e = this.list[index];
        if (e.name == name) {
          this.list.splice(index,1);
        }
      }
    }
    // 构造一个可以run的对象
    function Item(fn, name) {
      // 函数名称
      this.name = name || fn.name;
      // run方法
      this.run = () => {
        try {
          fn()
        } catch (error) {
          console.log(error);
        }
      };
    }
  }
  /******************** Pjax ********************************/
  // /layout/_plugins/pjax/index.ejs
  // volantis.pjax.send(callBack[,"callBackName"]) 传入pjax:send回调函数
  // volantis.pjax.push(callBack[,"callBackName"]) 传入pjax:complete回调函数
  // volantis.pjax.error(callBack[,"callBackName"]) 传入pjax:error回调函数
  volantis.pjax = {};
  volantis.pjax.method = {
    complete: new RunItem(),
    error: new RunItem(),
    send: new RunItem(),
  };
  volantis.pjax = Object.assign(volantis.pjax, {
    push: volantis.pjax.method.complete.push,
    error: volantis.pjax.method.error.push,
    send: volantis.pjax.method.send.push,
  });
  /******************** RightMenu ********************************/
  // volantis.rightmenu.handle(callBack[,"callBackName"]) 外部菜单项控制
  // 可在 volantis.mouseEvent 处获取右键事件
  volantis.rightmenu = {};
  volantis.rightmenu.method = {
    handle: new RunItem(),
  }
  volantis.rightmenu = Object.assign(volantis.rightmenu, {
    handle: volantis.rightmenu.method.handle.push,
  });
  /********************  Dark Mode  ********************************/
  // /layout/_partial/scripts/darkmode.ejs
  // volantis.dark.mode 当前模式 dark or light
  // volantis.dark.toggle() 暗黑模式触发器
  // volantis.dark.push(callBack[,"callBackName"]) 传入触发器回调函数
  volantis.dark = {};
  volantis.dark.method = {
    toggle: new RunItem(),
  };
  volantis.dark = Object.assign(volantis.dark, {
    push: volantis.dark.method.toggle.push,
  });
  /********************  Message  ********************************/
  // VolantisApp.message
  /********************  isMobile  ********************************/
  // /source/js/app.js
  // volantis.isMobile
  // volantis.isMobileOld
  /********************脚本动态加载函数********************************/
  // volantis.js(src, cb)  cb 可以传入onload回调函数 或者 JSON对象 例如: volantis.js("src", ()=>{}) 或 volantis.js("src", {defer:true,onload:()=>{}})
  // volantis.css(src)

  // 返回Promise对象，如下方法同步加载资源，这利于处理文件资源之间的依赖关系，例如：APlayer 需要在 MetingJS 之前加载
  // (async () => {
  //     await volantis.js("...theme.plugins.aplayer.js.aplayer...")
  //     await volantis.js("...theme.plugins.aplayer.js.meting...")
  // })();

  // 已经加入了setTimeout
  volantis.js = (src, cb) => {
    return new Promise(resolve => {
      setTimeout(function () {
        var HEAD = document.getElementsByTagName("head")[0] || document.documentElement;
        var script = document.createElement("script");
        script.setAttribute("type", "text/javascript");
        if (cb) {
          if (JSON.stringify(cb)) {
            for (let p in cb) {
              if (p == "onload") {
                script[p] = () => {
                  cb[p]()
                  resolve()
                }
              } else {
                script[p] = cb[p]
                script.onload = resolve
              }
            }
          } else {
            script.onload = () => {
              cb()
              resolve()
            };
          }
        } else {
          script.onload = resolve
        }
        script.setAttribute("src", src);
        HEAD.appendChild(script);
      });
    });
  }
  volantis.css = (src) => {
    return new Promise(resolve => {
      setTimeout(function () {
        var link = document.createElement('link');
        link.rel = "stylesheet";
        link.href = src;
        link.onload = resolve;
        document.getElementsByTagName("head")[0].appendChild(link);
      });
    });
  }
  /********************按需加载的插件********************************/
  // volantis.import.jQuery().then(()=>{})
  volantis.import = {
    jQuery: () => {
      if (typeof jQuery == "undefined") {
        return volantis.js("https://unpkg.com/volantis-static@0.0.1654736714924/libs/jquery/dist/jquery.min.js")
      } else {
        return new Promise(resolve => {
          resolve()
        });
      }
    }
  }
  /********************** requestAnimationFrame ********************************/
  // 1、requestAnimationFrame 会把每一帧中的所有 DOM 操作集中起来，在一次重绘或回流中就完成，并且重绘或回流的时间间隔紧紧跟随浏览器的刷新频率，一般来说，这个频率为每秒60帧。
  // 2、在隐藏或不可见的元素中，requestAnimationFrame 将不会进行重绘或回流，这当然就意味着更少的的 cpu，gpu 和内存使用量。
  volantis.requestAnimationFrame = (fn)=>{
    if (!window.requestAnimationFrame) {
      window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame;
    }
    window.requestAnimationFrame(fn)
  }
  /************************ layoutHelper *****************************************/
  volantis.layoutHelper = (helper, html, opt)=>{
    opt = Object.assign({clean:false, pjax:true}, opt)
    function myhelper(helper, html, clean) {
      volantis.tempDiv = document.createElement("div");
      volantis.tempDiv.innerHTML = html;
      let layoutHelper = document.querySelector("#layoutHelper-"+helper)
      if (layoutHelper) {
        if (clean) {
          layoutHelper.innerHTML = ""
        }
        layoutHelper.append(volantis.tempDiv);
      }
    }
    myhelper(helper, html, opt.clean)
    if (opt.pjax) {
      volantis.pjax.push(()=>{
        myhelper(helper, html, opt.clean)
      },"layoutHelper-"+helper)
    }
  }
  /****************************** 滚动事件处理 ****************************************/
  volantis.scroll = {
    engine: new RunItem(),
    unengine: new RunItem(),
  };
  volantis.scroll = Object.assign(volantis.scroll, {
    push: volantis.scroll.engine.push,
  });
  // 滚动条距离顶部的距离
  volantis.scroll.getScrollTop = () =>{
    let scrollPos;
    if (window.pageYOffset) {
      scrollPos = window.pageYOffset;
    } else if (document.compatMode && document.compatMode != 'BackCompat') {
      scrollPos = document.documentElement.scrollTop;
    } else if (document.body) {
      scrollPos = document.body.scrollTop;
    }
    return scrollPos;
  }
  // 使用 requestAnimationFrame 处理滚动事件
  // `volantis.scroll.del` 中存储了一个数值, 该数值检测一定时间间隔内滚动条滚动的位移, 数值的检测频率是浏览器的刷新频率. 数值为正数时, 表示向下滚动. 数值为负数时, 表示向上滚动.
  volantis.scroll.handleScrollEvents = () => {
    volantis.scroll.lastScrollTop = volantis.scroll.getScrollTop()
    function loop() {
      const scrollTop = volantis.scroll.getScrollTop();
      if (volantis.scroll.lastScrollTop !== scrollTop) {
        volantis.scroll.del = scrollTop - volantis.scroll.lastScrollTop;
        volantis.scroll.lastScrollTop = scrollTop;
        // if (volantis.scroll.del > 0) {
        //   console.log("向下滚动");
        // } else {
        //   console.log("向上滚动");
        // }
        // 注销过期的unengine未滚动事件
        volantis.scroll.unengine.list=[]
        volantis.scroll.engine.start();
      }else{
        volantis.scroll.unengine.start();
      }
      volantis.requestAnimationFrame(loop)
    }
    volantis.requestAnimationFrame(loop)
  }
  volantis.scroll.handleScrollEvents()
  volantis.scroll.ele = null;
  // 触发页面滚动至目标元素位置
  volantis.scroll.to = (ele, option = {}) => {
    if (!ele) return;
    volantis.scroll.ele = ele;
    // 默认配置
    opt = {
      top: ele.getBoundingClientRect().top + document.documentElement.scrollTop,
      behavior: "smooth"
    }
    // 定义配置
    if ("top" in option) {
      opt.top = option.top
    }
    if ("behavior" in option) {
      opt.behavior = option.behavior
    }
    if ("addTop" in option) {
      opt.top += option.addTop
    }
    if (!("observerDic" in option)) {
      option.observerDic = 100
    }
    // 滚动
    window.scrollTo(opt);
    // 监视器
    // 监视并矫正元素滚动到指定位置
    // 用于处理 lazyload 引起的 cls 导致的定位失败问题
    // option.observer = false
    if (option.observer) {
      setTimeout(() => {
        if (volantis.scroll.ele != ele) {
          return
        }
        volantis.scroll.unengine.push(() => {
          let me = ele.getBoundingClientRect().top
          if(!(me >= -option.observerDic && me <= option.observerDic)){
            volantis.scroll.to(ele, option)
          }
          volantis.scroll.unengine.remove("unengineObserver")
        },"unengineObserver")
      },1000)
    }
  }
  /********************** Content Visibility ********************************/
  // 见 source/css/first.styl 如果遇到任何问题 删除 .post-story 即可
  // 一个元素被声明 content-visibility 属性后 如果元素不在 viewport 中 浏览器不会计算其后代元素样式和属性 从而节省 Style & Layout 耗时
  // content-visibility 的副作用: 锚点失效 等等(实验初期 暂不明确), 使用此方法清除样式
  volantis.cleanContentVisibility = ()=>{
    if (document.querySelector(".post-story")) {
      console.log("cleanContentVisibility");
      document.querySelectorAll(".post-story").forEach(e=>{
        e.classList.remove("post-story")
      })
    }
  }
  /******************************************************************************/
  /******************************************************************************/
  /******************************************************************************/
  //图像加载出错时的处理
  function errorImgAvatar(img) {
    img.src = "https://unpkg.com/volantis-static@0.0.1654736714924/media/placeholder/avatar/round/3442075.svg";
    img.onerror = null;
  }
  function errorImgCover(img) {
    img.src = "https://unpkg.com/volantis-static@0.0.1654736714924/media/placeholder/cover/76b86c0226ffd.svg";
    img.onerror = null;
  }
  /******************************************************************************/
</script>

  <!-- import head_end begin -->
  <!-- import head_end end -->
  <!-- Custom Files headEnd begin-->
  
  <!-- Custom Files headEnd end-->
</head>
  <body itemscope itemtype="http://schema.org/WebPage">
    <!-- import body_begin begin-->
    <!-- import body_begin end-->
    <!-- Custom Files bodyBegin begin-->
    
    <!-- Custom Files bodyBegin end-->
    <header itemscope itemtype="http://schema.org/WPHeader" id="l_header" class="l_header auto shadow floatable blur show" style='opacity: 0' >
  <div class='container'>
  <div id='wrapper'>
    <div class='nav-sub'>
      <p class="title"></p>
      <ul class='switcher nav-list-h m-phone' id="pjax-header-nav-list">
        <li><a id="s-comment" class="fa-solid fa-comments fa-fw" target="_self"  href="/" onclick="return false;" title="comment"></a></li>
        
          <li><a id="s-toc" class="s-toc fa-solid fa-list fa-fw" target="_self"  href="/" onclick="return false;" title="toc"></a></li>
        
      </ul>
    </div>
		<div class="nav-main">
      
        
        <a class="title flat-box" target="_self" href='/'>
          
          
          
            TARI TARI
          
        </a>
      

			<div class='menu navigation'>
				<ul class='nav-list-h m-pc'>
          
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/" title="主页"
                  
                  
                  
                    active-action="action-home"
                  >
                  <i class='fas fa-home fa-fw'></i>主页
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/tags/" title="标签"
                  
                  
                  
                    active-action="action-tags"
                  >
                  <i class='fas fa-tags fa-fw'></i>标签
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/archives/" title="归档"
                  
                  
                  
                    active-action="action-archives"
                  >
                  <i class='fas fa-archive fa-fw'></i>归档
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/friends/" title="友链"
                  
                  
                  
                    active-action="action-friends"
                  >
                  <i class='fas fa-link fa-fw'></i>友链
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/about/" title="关于"
                  
                  
                  
                    active-action="action-about"
                  >
                  <i class='fas fa-info-circle fa-fw'></i>关于
                </a>
                
              </li>
            
          
          
				</ul>
			</div>
      
      <div class="m_search">
        <form name="searchform" class="form u-search-form">
          <i class="icon fa-solid fa-search fa-fw"></i>
          <input type="text" class="input u-search-input" placeholder="搜索..." />
        </form>
      </div>
      

			<ul class='switcher nav-list-h m-phone'>
				
					<li><a class="s-search fa-solid fa-search fa-fw" target="_self" href="/" onclick="return false;" title="search"></a></li>
				
				<li>
          <a class="s-menu fa-solid fa-bars fa-fw" target="_self" href="/" onclick="return false;" title="menu"></a>
          <ul class="menu-phone list-v navigation white-box">
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/" title="主页"
                  
                  
                  
                    active-action="action-home"
                  >
                  <i class='fas fa-home fa-fw'></i>主页
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/tags/" title="标签"
                  
                  
                  
                    active-action="action-tags"
                  >
                  <i class='fas fa-tags fa-fw'></i>标签
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/archives/" title="归档"
                  
                  
                  
                    active-action="action-archives"
                  >
                  <i class='fas fa-archive fa-fw'></i>归档
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/friends/" title="友链"
                  
                  
                  
                    active-action="action-friends"
                  >
                  <i class='fas fa-link fa-fw'></i>友链
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover"
                href="/about/" title="关于"
                  
                  
                  
                    active-action="action-about"
                  >
                  <i class='fas fa-info-circle fa-fw'></i>关于
                </a>
                
              </li>
            
          
            
          </ul>
        </li>
			</ul>

      <!-- Custom Files header begin -->
      
      <!-- Custom Files header end -->
		</div>
	</div>
  </div>
</header>

    <div id="l_body">
      <div id="l_cover">
  
    
      <!-- see: /layout/_partial/scripts/_ctrl/coverCtrl.ejs -->
      <div id="none" class='cover-wrapper post dock' style="display: none;">
        
  <div class='cover-bg lazyload placeholder' data-bg="/img/home.jpeg"></div>

<div class='cover-body'>
  <div class='top'>
    
    
      <p class="title">TARI TARI</p>
    
    
      <p class="subtitle">记录信安路上的点滴 (:</p>
    
  </div>
  <div class='bottom'>
    <div class='menu navigation'>
      <div class='list-h'>
        
      </div>
    </div>
  </div>
</div>

        <div id="scroll-down" style="display: none;"><i class="fa fa-chevron-down scroll-down-effects"></i></div>
      </div>
    
  
</div>

      <div id="safearea">
        <div class="body-wrapper">
          
<div id="l_main" class=''>
  <article itemscope itemtype="http://schema.org/Article" class="article post white-box reveal md shadow floatable blur article-type-post" id="post" itemscope itemprop="blogPost">
  <link itemprop="mainEntityOfPage" href="https://tari.moe/p/2021/thread-modeling/">
  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="TARI TARI">
  </span>
  <span hidden itemprop="post" itemscope itemtype="http://schema.org/Post">
    <meta itemprop="name" content="TARI TARI">
    <meta itemprop="description" content="tari,tarimoe,taritari">
  </span>
  


  
    <span hidden>
      <meta itemprop="image" content="https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png">
    </span>
  
  <div class="article-meta" id="top">
    
    
    
      <h1 class="title" itemprop="name headline">
        威胁建模安全基础知识
      </h1>
      <div class='new-meta-box'>
        
          
            <div class="new-meta-item date" itemprop="dateCreated datePublished" datetime="2021-04-04T12:54:33+08:00">
  <a class='notlink'>
    <i class="fas fa-calendar-alt fa-fw" aria-hidden="true"></i>
    <p>发布于：2021年4月4日 12:54</p>
  </a>
</div>

          
        
          
            <div class="new-meta-item date" itemprop="dateModified" datetime="2022-02-01T12:24:06+08:00">
  <a class='notlink'>
    <i class="fas fa-edit fa-fw" aria-hidden="true"></i>
    <p>更新于：2022年2月1日 12:24</p>
  </a>
</div>

          
        
          
            


<div class="new-meta-item browse">
  <a class='notlink'>
    <p>
      <i class="fas fa-eye fa-fw" aria-hidden="true"></i>
      
      <span id="lc-pv" data-title="威胁建模安全基础知识" data-path="/p/2021/thread-modeling/">
        <span id='number'><i class="fa-solid fa-loader fa-spin fa-fw" aria-hidden="true"></i></span>
      </span>
      
      <span>次浏览</span>
    </p>
  </a>
</div>


          
        
          
            
  <div class="new-meta-item wordcount">
    <a class='notlink'>
      <i class="fas fa-keyboard fa-fw" aria-hidden="true"></i>
      <p>字数：23k 字</p>
    </a>
  </div>
  <div class="new-meta-item readtime">
    <a class='notlink'>
      <i class="fas fa-hourglass-half fa-fw" aria-hidden="true"></i>
      <p>时长：78 分钟</p>
    </a>
  </div>


          
        
        <!-- Custom Files topMeta begin-->
        
        <!-- Custom Files topMeta end-->
      </div>
    
  </div>


  <div id="layoutHelper-page-plugins"></div>
  <div id="post-body" itemprop="articleBody">
    <p>实习过程中零零碎碎学了一些，但还没系统学过，发现微软有个挺全面的，打算系统学习一波~</p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/learn/paths/tm-threat-modeling-fundamentals/">https://docs.microsoft.com/zh-cn/learn/paths/tm-threat-modeling-fundamentals/</a></p>
<p>感觉讲的特别好…所以就直接索性一边看一边补充的 <strong>copy</strong> 下来了</p>
<h2 id="威胁建模简介"><a href="#威胁建模简介" class="headerlink" title="威胁建模简介"></a>威胁建模简介</h2><p>威胁建模是一种有助于保护系统、应用程序、网络和服务的有效技术。它可帮助你在开发生命周期的早期确定潜在的威胁和降低风险策略。</p>
<p>威胁建模使用以图形形式演示系统工作方式的数据流关系图。之后，它应用一个框架来帮助你发现和修复安全问题。</p>
<p>如果未首先建立威胁模型而发布系统，该系统将使你的客户和组织面临风险。</p>
<div class="note info"><p>简单起见，此学习路径将系统、应用程序和服务统称为系统。</p></div>



<h3 id="何时使用威胁建模"><a href="#何时使用威胁建模" class="headerlink" title="何时使用威胁建模"></a>何时使用威胁建模</h3><p>在设计新系统或更新现有系统时，可使用威胁建模。 示例包括：</p>
<ul>
<li>创建新的 Azure 微服务，用于报告组织的云资源使用情况以便进行预算</li>
<li>设计公共 API 以向客户提供对数据的访问权限</li>
<li>向现有应用程序添加新功能</li>
</ul>
<h3 id="谁可以进行威胁建模"><a href="#谁可以进行威胁建模" class="headerlink" title="谁可以进行威胁建模"></a>谁可以进行威胁建模</h3><p>只要了解系统如何工作，并且对安全性有基本的理解，任何人都可以进行威胁建模。 此技术可应用于任何：</p>
<ul>
<li>软件交付方式（ 如 <a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2019/03/agile-development.html">敏捷型</a> 或 <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/29783716">瀑布型</a> ，好多瀑布型介绍很繁琐，直接找了个对比的）</li>
<li>部署节奏（每小时、每月或每年）</li>
</ul>
<h3 id="学习目标"><a href="#学习目标" class="headerlink" title="学习目标"></a>学习目标</h3><p>在本模块，你将了解威胁建模的四个概括性步骤，并能够学得以下内容：</p>
<ul>
<li>了解明确要求和假设以帮助创建数据流关系图的重要性</li>
<li>了解可帮助你查找系统中安全问题的框架</li>
<li>了解有助于减轻或消除潜在威胁的安全控制类别</li>
<li>重点介绍在部署之前验证假设、要求和修复的重要性</li>
</ul>
<div class="note success"><p>无必备知识即可学习 （</p></div>



<h2 id="模块1-威胁建模阶段"><a href="#模块1-威胁建模阶段" class="headerlink" title="模块1 | 威胁建模阶段"></a>模块1 | 威胁建模阶段</h2><p>只要了解系统工作原理，并具有信息安全知识，任何人都可以使用威胁建模技术。</p>
<p>此方法分为四个不同的阶段，每个阶段都包含重要步骤，可帮助你创建数据流关系图并对其进行分析，以发现潜在的威胁。</p>
<p><img src="/img/thread-modeling/threat-modeling-steps.png" class="lazyload" data-srcset="/img/thread-modeling/threat-modeling-steps.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="threat-modeling-steps"></p>
<table>
<thead>
<tr>
<th>阶段</th>
<th>标题</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>设计</td>
<td>明确系统的所有要求，并创建数据流关系图</td>
</tr>
<tr>
<td>2</td>
<td>中断</td>
<td>将威胁建模框架应用到数据流关系图</td>
</tr>
<tr>
<td>3</td>
<td>修复</td>
<td>确定如何正确组合安全控制来解决每个问题</td>
</tr>
<tr>
<td>4</td>
<td>验证</td>
<td>验证是否满足了要求</td>
</tr>
</tbody></table>
<div class="note warning"><p>本模块(1) 中的单元将较为概括地介绍重要的威胁建模概念，本文 <a href="#%E6%A8%A1%E5%9D%972-%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E6%B5%81%E5%85%B3%E7%B3%BB%E5%9B%BE%E5%85%83%E7%B4%A0%E5%88%9B%E5%BB%BA%E5%A8%81%E8%83%81%E6%A8%A1%E5%9E%8B">模块2</a> 开始将详细讨论这些概念。</p></div>



<h3 id="步骤1-设计"><a href="#步骤1-设计" class="headerlink" title="步骤1 - 设计"></a>步骤1 - 设计</h3><p>设计阶段是进行威胁建模活动的基础。 你需要尽可能多地收集关于你所构建的内容及所用资源的数据。</p>
<h4 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h4><ul>
<li>清楚地了解系统的工作原理</li>
<li>列出系统使用的每个服务</li>
<li>枚举有关环境和默认安全配置的所有假设</li>
<li>使用正确的上下文深度级别创建数据流关系图</li>
</ul>
<div class="note warning"><p>如果不完成此阶段，你可能会忽略系统的重要安全设计注意事项，这可能会使你的客户面临风险。</p></div>



<h4 id="提出有关系统的问题"><a href="#提出有关系统的问题" class="headerlink" title="提出有关系统的问题"></a>提出有关系统的问题</h4><p>尽可能多地提出有关系统的问题。 可以考虑以下问题：</p>
<table>
<thead>
<tr>
<th>区域</th>
<th>问题</th>
</tr>
</thead>
<tbody><tr>
<td><strong>系统说明</strong></td>
<td>系统的功能是什么？ 服务处理的业务流程是什么？ 是否明确定义了这些流程？</td>
</tr>
<tr>
<td><strong>系统环境</strong></td>
<td>系统是在云中还是在本地构建的？ 它将在哪个 OS 上构建？ 是否将使用容器？ 系统是应用程序、服务还是其他完全不同的东西？</td>
</tr>
<tr>
<td><strong>方案</strong></td>
<td>用户将如何使用系统？ 如何不使用系统？</td>
</tr>
<tr>
<td><strong>权限</strong></td>
<td>系统是否有脚本执行、数据或硬件访问要求？ 如果有，是哪些要求？</td>
</tr>
<tr>
<td><strong>云提供商</strong></td>
<td>系统将使用哪个云提供商？ 它提供哪些默认安全配置选项？ 这些选项如何影响系统安全要求？</td>
</tr>
<tr>
<td><strong>操作系统</strong></td>
<td>系统将使用哪种操作系统？ 它提供哪些默认安全配置选项？ 这些选项如何影响系统安全要求？</td>
</tr>
<tr>
<td><strong>第一方和第三方</strong></td>
<td>系统将使用哪些第一方和第三方服务？ 它们提供哪些默认安全配置选项？ 这些选项如何影响系统安全要求？</td>
</tr>
<tr>
<td><strong>帐户</strong></td>
<td>系统中将使用哪些帐户类型，例如用户和管理员？ 这些帐户是本地帐户还是云帐户？ 它们需要哪些访问权限？为什么？</td>
</tr>
<tr>
<td><strong>标识和访问控制</strong></td>
<td>系统将如何帮助保护这些帐户？ 它会依赖 Azure Active Directory (Azure AD) 吗？ 它会使用访问控制列表 (ACL)、多重身份验证 (MFA) 和会话控制等功能吗？</td>
</tr>
<tr>
<td><strong>令牌和会话</strong></td>
<td>系统会处理 SOAP API 或 REST API 之类的请求吗？ 它将如何处理不同的会话？</td>
</tr>
<tr>
<td><strong>旁路</strong></td>
<td>系统是否使用或需要后门？ 如果需要，它将如何工作？</td>
</tr>
<tr>
<td><strong>记录、监视和备份</strong></td>
<td>系统使用什么机制来记录安全事件、监视异常和备份系统数据？ 它会捕获哪些事件类型？</td>
</tr>
<tr>
<td><strong>网络</strong></td>
<td>将使用哪些入侵检测和保护系统？ 如何对通信进行加密？</td>
</tr>
<tr>
<td><strong>数据</strong></td>
<td>系统将创建或处理哪种类型的数据？ 数据分类类型是什么？ 系统如何信任数据源？ 它将如何分析数据？ 预期的输入和输出行为是什么？ 如何处理验证？ 如何在所有状态下对数据进行加密？</td>
</tr>
<tr>
<td><strong>机密管理</strong></td>
<td>系统如何处理密钥、证书和凭据？</td>
</tr>
</tbody></table>
<div class="note warning"><p>上面列出的内容很广泛，但并不详尽。 与你的同事和安全团队联系，以明确系统的所有相关上下文。</p></div>

<div class="note info"><p>如果你有专门的安全团队，请与他们安排白板会议以进行初始设计。 它将节省相当长的时间。</p></div>



<h4 id="创建数据流关系图"><a href="#创建数据流关系图" class="headerlink" title="创建数据流关系图"></a>创建数据流关系图</h4><p>使用答案创建数据流关系图。 它显示了数据生命周期中每个阶段的数据，包括信任区中的更改。 示例包括：</p>
<ul>
<li>用户登录到 Azure 中托管的 Web 应用程序以访问数据</li>
<li>管理员更改 Web 应用程序使用的弹性资源的默认安全配置</li>
<li>自动化的每日脚本，用于监视 Web 应用程序的活动日志并通知管理员任何异常情况</li>
</ul>
<p>Microsoft 工程团队需要提交数据流关系图，这是其安全合规性要求。 这些关系图有助于进行与安全性相关的探讨。</p>
<h4 id="图解工具"><a href="#图解工具" class="headerlink" title="图解工具"></a>图解工具</h4><p>Microsoft 工程师建议使用现在提供的两种工具之一：</p>
<ul>
<li>Threat Modeling Tool<ul>
<li>在线安装版，<a target="_blank" rel="noopener" href="https://www.microsoft.com/en-us/securityengineering/sdl/threatmodeling">https://www.microsoft.com/en-us/securityengineering/sdl/threatmodeling</a></li>
<li>离线安装版，<a target="_blank" rel="noopener" href="https://www.microsoft.com/en-us/download/details.aspx?id=49168">https://www.microsoft.com/en-us/download/details.aspx?id=49168</a> （2016）</li>
<li>想装其他离线版本的，Guguru 一下 <u>microsoft threat modeling tool offline installer</u> 就好了</li>
</ul>
</li>
<li>Visio，（要钱的 打扰了</li>
</ul>
<h4 id="关系图元素"><a href="#关系图元素" class="headerlink" title="关系图元素"></a>关系图元素</h4><p>数据流关系图显示了给定系统中的数据流。 <strong>它通常以用户或数据存储的请求开始，以数据存储或 <a target="_blank" rel="noopener" href="https://www.elsevier.com/solutions/analytical-services">Analytics Services</a> 结束</strong>。 数据流关系图使用不同的形状来指示它们所表示的元素。</p>
<table>
<thead>
<tr>
<th align="left">元素</th>
<th align="left">形状</th>
<th align="left">定义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">过程</td>
<td align="left"><img src="/img/thread-modeling/process50.png" class="lazyload" data-srcset="/img/thread-modeling/process50.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="process50"></td>
<td align="left">接收、修改输入或将输入重定向到输出的任务，如 Web 服务。</td>
</tr>
<tr>
<td align="left">数据存储</td>
<td align="left"><img src="/img/thread-modeling/data-store50.png" class="lazyload" data-srcset="/img/thread-modeling/data-store50.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="data-store50"></td>
<td align="left">永久和临时数据存储，如 Web 缓存和 Azure 托管数据库。</td>
</tr>
<tr>
<td align="left">外部实体</td>
<td align="left"><img src="/img/thread-modeling/external-entity50.png" class="lazyload" data-srcset="/img/thread-modeling/external-entity50.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="external-entity50"></td>
<td align="left">直接控制之外的任务、实体或数据存储，如用户和第三方 API。</td>
</tr>
<tr>
<td align="left">数据流</td>
<td align="left"><img src="/img/thread-modeling/data-flow50.png" class="lazyload" data-srcset="/img/thread-modeling/data-flow50.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="data-flow50"></td>
<td align="left">进程、数据存储和外部实体之间的数据移动，如连接字符串和有效负载。</td>
</tr>
<tr>
<td align="left">信任边界</td>
<td align="left"><img src="/img/thread-modeling/trust-boundary-box50.png" class="lazyload" data-srcset="/img/thread-modeling/trust-boundary-box50.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="trust-boundary-box50"><img src="/img/thread-modeling/trust-boundary-line50.png" class="lazyload" data-srcset="/img/thread-modeling/trust-boundary-line50.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="trust-boundary-line50"></td>
<td align="left">信任区域在数据流经系统时更改，如用户使用 Internet 访问受保护的公司网络时。</td>
</tr>
</tbody></table>
<p>数据流关系图元素还需要上下文，以帮助人们了解如何在系统中的使用和保护它们。</p>
<h4 id="数据流图标中应包含的信息量"><a href="#数据流图标中应包含的信息量" class="headerlink" title="数据流图标中应包含的信息量"></a>数据流图标中应包含的信息量</h4><p>数据流关系图中包含的信息量取决于几个关键因素：</p>
<table>
<thead>
<tr>
<th align="left">因素</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">正在构建的系统类型</td>
<td align="left">如果系统不处理敏感数据或仅在内部使用，则它可能比面向外部的系统需要更少的上下文</td>
</tr>
<tr>
<td align="left">安全团队所需的上下文</td>
<td align="left">安全团队在威胁模型中的目标非常精确。 与安全团队交流，确认所需的层次</td>
</tr>
</tbody></table>
<p>如果未能包含正确的上下文，将导致安全检查不完整、系统存在潜在的风险。</p>
<h4 id="关系图层次"><a href="#关系图层次" class="headerlink" title="关系图层次"></a>关系图层次</h4><p>为了帮助你了解要包含的信息量，请在以下四个上下文层次之间进行选择：</p>
<table>
<thead>
<tr>
<th align="left">层次</th>
<th align="left">标题</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">0</td>
<td align="left">系统</td>
<td align="left">任何系统的基础。 数据流关系图包含系统的主要部分，并提供足够的上下文，可帮助你了解其工作原理及彼此交互方式。</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">流程</td>
<td align="left">使用额外的数据流关系图，关注系统每个部分的数据流关系图。 用于每个系统，尤其是处理敏感数据的系统。 此层的上下文应有助于确定威胁以及更有效地降低或消除风险的方法。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">子过程</td>
<td align="left">关注系统中某一部分的每个次级部分的数据流关系图。 用于关键的系统。 示例包括适用于安全环境的系统、处理高度敏感数据的系统或包含高风险评级的系统。</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left">更详细</td>
<td align="left">关注高度关键的内核级系统。 数据流关系图详细描述每个子过程。</td>
</tr>
</tbody></table>
<div class="note info"><p>大多数数据流关系图应同时包含第 0 层和第 1 层。 与安全团队交流，确认所需的层次深度。</p></div>



<h4 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h4><ul>
<li>Threat Modeling Tool<ul>
<li>在线安装版，<a target="_blank" rel="noopener" href="https://www.microsoft.com/en-us/securityengineering/sdl/threatmodeling">https://www.microsoft.com/en-us/securityengineering/sdl/threatmodeling</a></li>
<li>离线安装版，<a target="_blank" rel="noopener" href="https://www.microsoft.com/en-us/download/details.aspx?id=49168">https://www.microsoft.com/en-us/download/details.aspx?id=49168</a> （2016）</li>
<li>想装其他离线版本的，Guguru 一下 <u>microsoft threat modeling tool offline installer</u> 就好了</li>
</ul>
</li>
<li>Visio，（要钱的 打扰了</li>
</ul>
<h4 id="知识检查"><a href="#知识检查" class="headerlink" title="知识检查"></a>知识检查</h4><ol>
<li>设计阶段要进行哪些工作？</li>
</ol>
<div class='checkbox'><input type="radio" />
            <p>A. 你知道系统的工作方式。 还可以确定从云提供商和集成服务继承的安全要求、保证或差距</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>B. 此时不必研究所有安全保证、假设和差距，唯一的任务就是创建数据流关系图</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>C. 在创建数据流关系图之前，确定并解决与系统相关的所有安全问题</p>
            </div>

<p>参考答案：<psw>== A ==</psw></p>
<p>解释：<psw>A. 在创建数据流关系图之前，请尽可能收集有关系统的上下文。B. 在设计阶段较早收集尽可能多的上下文，你就可以做出明智的决策以更好地保护系统。C. 在设计阶段之后的中断和修复阶段执行创建关系图的任务。</psw></p>
<h3 id="步骤2-中断"><a href="#步骤2-中断" class="headerlink" title="步骤2 - 中断"></a>步骤2 - 中断</h3><p>在中断阶段，<strong>需使用数据流关系图查找针对系统的潜在威胁</strong>。 此过程使用威胁建模框架，以帮助你查找最常见的威胁和防范威胁的方法。</p>
<h4 id="目标-1"><a href="#目标-1" class="headerlink" title="目标"></a>目标</h4><ul>
<li>选择以 “保护系统” 或 “了解攻击者” 为核心的方法 （可参考模块4了解这两种方法）</li>
<li>使用 <a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/STRIDE">STRIDE</a> 框架识别常见威胁（STRIDE威胁模型几乎可以涵盖目前绝大部分安全问题），即<ul>
<li>欺骗（<strong>S</strong>poofing）</li>
<li>篡改（<strong>T</strong>ampering）</li>
<li>否认（<strong>R</strong>epudiation）</li>
<li>资讯泄露（<strong>I</strong>nformation disclosure），可能是隐私泄露或是资料外泄</li>
<li><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E9%98%BB%E6%96%B7%E6%9C%8D%E5%8B%99%E6%94%BB%E6%93%8A">阻断服务攻击</a>（<strong>D</strong>enial of service）</li>
<li><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E7%89%B9%E6%9D%83%E6%8F%90%E5%8D%87">特权提升</a>（<strong>E</strong>levation of privilege</li>
</ul>
</li>
</ul>
<div class="note warning"><p>如果不完成此阶段，就不会发现系统中的潜在威胁，这可能会导致未来出现违规现象。</p></div>



<h4 id="确定方法侧重点"><a href="#确定方法侧重点" class="headerlink" title="确定方法侧重点"></a>确定方法侧重点</h4><p>首先，选择是要找到保护系统的方法，还是想要尽可能地了解攻击者及其动机。 示例包括：</p>
<table>
<thead>
<tr>
<th align="left">侧重点</th>
<th align="left">可以查找的内容示例</th>
</tr>
</thead>
<tbody><tr>
<td align="left">系统</td>
<td align="left">发现用户与系统之间的未加密连接存在问题。</td>
</tr>
<tr>
<td align="left">攻击者</td>
<td align="left">进一步了解方法、动机和强化系统入口点的方法。</td>
</tr>
<tr>
<td align="left">资产</td>
<td align="left">基于分类数据处理等功能确定关键资产，主要专注于保护这些资产。</td>
</tr>
</tbody></table>
<div class="note info"><p>Microsoft 产品工程师主要致力于保护系统。 渗透测试团队两者兼顾。</p></div>



<h4 id="选择威胁框架"><a href="#选择威胁框架" class="headerlink" title="选择威胁框架"></a>选择威胁框架</h4><p>接下来，选择一个框架，帮助生成系统中的潜在威胁。 Microsoft 通常使用 <a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/STRID">STRIDE</a>（六个主要威胁类别的首字母缩写）提供广泛但不完整的威胁列表。</p>
<p>此框架可帮助你提出有关系统的几个重要问题：</p>
<table>
<thead>
<tr>
<th align="left">威胁</th>
<th align="left">定义</th>
<th align="left">问题</th>
<th align="left">威胁示例</th>
</tr>
</thead>
<tbody><tr>
<td align="left">欺骗</td>
<td align="left">攻击者冒充某人或某物</td>
<td align="left">通信的双方是否都通过了身份验证？</td>
<td align="left">通过看似合法的帐户向用户发送一封带有恶意链接和附件的电子邮件，以捕获用户的凭据、数据和设备访问权限。</td>
</tr>
<tr>
<td align="left">篡改</td>
<td align="left">攻击者在未经授权的情况下更改数据</td>
<td align="left">如何得知某人无法更改传输中的数据、正在使用的数据或静态数据？</td>
<td align="left">通过弱 API 调用处理修改内存，导致崩溃和泄漏敏感错误消息。</td>
</tr>
<tr>
<td align="left">否认性</td>
<td align="left">攻击者声称尚未执行任何操作</td>
<td align="left">每个操作是否可以绑定到标识？</td>
<td align="left">声称没有删除数据库记录。</td>
</tr>
<tr>
<td align="left">信息泄露</td>
<td align="left">攻击者看到了不应看到的数据</td>
<td align="left">如何得知某人无法看到传输中的数据、正在使用的数据或静态数据？</td>
<td align="left">访问安全控制较弱的未授权文档和文件夹。</td>
</tr>
<tr>
<td align="left">拒绝服务</td>
<td align="left">攻击者使你的系统崩溃</td>
<td align="left">系统中是否存在资源受限的区域？</td>
<td align="left">向网络发送大量请求。</td>
</tr>
<tr>
<td align="left">权限提升</td>
<td align="left">攻击者未经授权而可访问数据</td>
<td align="left">如何得知某人可以执行此操作？</td>
<td align="left">利用输入处理逻辑或内存中的弱点来提取数据。</td>
</tr>
</tbody></table>
<h4 id="知识检查-1"><a href="#知识检查-1" class="headerlink" title="知识检查"></a>知识检查</h4><ol>
<li>中断阶段要进行哪些工作？</li>
</ol>
<div class='checkbox'><input type="radio" />
            <p>A. 通过相关框架选择重点领域，以系统地识别系统中的潜在威胁。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>B. 通过相关框架选择重点领域，以系统地识别可以应用到系统的解决方案。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>C. 安全团队开会讨论，选择重点领域和相关框架，以系统地识别系统中的潜在威胁。</p>
            </div>

<p>参考答案：<psw>== A ==</psw></p>
<p>解释：<psw>A. 在使用 STRIDE 查找潜在威胁时，请关注系统或攻击者。B. 此任务属于阶段 3 - 修复阶段。C. 在大多数情况下，可以选择与安全团队开会讨论，但不强制要求这么做（除非组织有相关要求）。</psw></p>
<h3 id="步骤3-修复"><a href="#步骤3-修复" class="headerlink" title="步骤3 - 修复"></a>步骤3 - 修复</h3><p>在修复阶段，需要决定如何处理所有威胁。 每个 STRIDE 威胁都对应到一项或多项安全控制，这些控制措施提供不同的功能和类型供你选择。</p>
<h4 id="目标-2"><a href="#目标-2" class="headerlink" title="目标"></a>目标</h4><ul>
<li>根据<strong>优先级框架或安全 bug 栏衡量每个威胁的优先级</strong></li>
<li>在 bug 管理服务中将每个威胁作为任务或工作项进行跟踪</li>
<li>生成对应于 STRIDE 威胁的安全控制建议</li>
<li>选择一项或多项安全控制类型和功能来应对每个威胁</li>
<li>解决任务</li>
</ul>
<div class="note warning"><p>如果不完成此阶段，就找不到安全控制来帮助降低风险或正确跟踪每个威胁。</p></div>



<h4 id="设置威胁跟增工作流"><a href="#设置威胁跟增工作流" class="headerlink" title="设置威胁跟增工作流"></a>设置威胁跟增工作流</h4><h5 id="确定威胁的优先级"><a href="#确定威胁的优先级" class="headerlink" title="确定威胁的优先级"></a>确定威胁的优先级</h5><p>首先，根据优先级框架或安全 bug 栏来衡量每个威胁。 此过程可帮助你计划资源来解决对组织而言更重要的问题。</p>
<p>此过程使用三个关键变量：</p>
<table>
<thead>
<tr>
<th align="left">变量</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>影响</strong></td>
<td align="left">使用 STRIDE 类别分配影响。</td>
</tr>
<tr>
<td align="left"><strong>严重性</strong></td>
<td align="left">使用内部 bug 栏或优先级框架来分配最坏情况下的严重性。</td>
</tr>
<tr>
<td align="left"><strong>风险</strong></td>
<td align="left">对安全控制有效性和实现成本进行计算。</td>
</tr>
</tbody></table>
<div class="note info"><p>Microsoft 工程师使用内部安全 bug 栏，为威胁分配“严重”、“重要”、“中等”、“低”或“信息”严重性等级。 请咨询安全团队，确认如何确定问题的优先级。</p></div>



<h5 id="创建任务"><a href="#创建任务" class="headerlink" title="创建任务"></a>创建任务</h5><p>接下来，在 Azure DevOps Services 等 <strong>bug 管理解决方案</strong>中添加每个威胁。 部分优点包括：</p>
<ul>
<li>进一步确定问题责任人</li>
<li>有效跟踪历史记录</li>
<li>让你能够使用标准化模板来进行优先级和解决方案演练</li>
</ul>
<h4 id="评估威胁有效性和成本"><a href="#评估威胁有效性和成本" class="headerlink" title="评估威胁有效性和成本"></a>评估威胁有效性和成本</h4><p>查看对应于 STRIDE 威胁的每项安全控制建议。 记下最有效和成本最低的建议。 以下是一些示例：</p>
<table>
<thead>
<tr>
<th align="left">威胁</th>
<th align="left">安全控制</th>
<th align="left">安全控制示例</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>欺骗</strong></td>
<td align="left">身份验证</td>
<td align="left">发送和接收使用数字签名进行签名的消息，以验证来源并确保消息完整性。</td>
</tr>
<tr>
<td align="left"><strong>篡改</strong></td>
<td align="left">完整性</td>
<td align="left">验证输入以防止处理恶意有效负载和错误处理意外行为。</td>
</tr>
<tr>
<td align="left"><strong>否认性</strong></td>
<td align="left">不可否认性</td>
<td align="left">创建和保护包含用户操作和时间戳的安全日志。</td>
</tr>
<tr>
<td align="left"><strong>信息泄露</strong></td>
<td align="left">保密性</td>
<td align="left">应用访问控制列表，以确保合适的用户可以访问适当的数据。</td>
</tr>
<tr>
<td align="left"><strong>拒绝服务</strong></td>
<td align="left">可用性</td>
<td align="left">使用弹性资源管理不断增加或减少的使用量。</td>
</tr>
<tr>
<td align="left"><strong>权限提升</strong></td>
<td align="left">授权</td>
<td align="left">使用最少的访问量运行服务。</td>
</tr>
</tbody></table>
<div class="note info"><p>可能有这样的安全控制，可以同时减轻或完全消除多个威胁。 例如，使用 SSL/TLS 创建安全传输通道，以帮助防止恶意数据修改或泄露。</p></div>



<h4 id="安全控制措施类型和功能"><a href="#安全控制措施类型和功能" class="headerlink" title="安全控制措施类型和功能"></a>安全控制措施类型和功能</h4><p>安全控制具有不同的类型和功能。 结合使用时，它们有助于保护系统的安全，并创建多个安全保护层，也称为深层防御。</p>
<p>你可以选择一种或多种安全控制类型：</p>
<ul>
<li>物理类型，如摄像头</li>
<li>技术类型，如加密</li>
<li>管理类型，如策略</li>
</ul>
<p>它们可能有一项或多项安全控制功能：</p>
<table>
<thead>
<tr>
<th align="left">函数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>预防</strong></td>
<td align="left">降低威胁的概率或影响，如防火墙。</td>
</tr>
<tr>
<td align="left"><strong>检测</strong></td>
<td align="left">识别发生的攻击，如监视。</td>
</tr>
<tr>
<td align="left"><strong>纠正</strong></td>
<td align="left">控制系统如何响应其受到的攻击，如系统修补程序。</td>
</tr>
<tr>
<td align="left"><strong>恢复</strong></td>
<td align="left">从攻击中恢复系统，如备份。</td>
</tr>
<tr>
<td align="left"><strong>阻碍</strong></td>
<td align="left">阻止攻击者访问系统，如最低权限。</td>
</tr>
</tbody></table>
<h4 id="为每个问题添加安全控制详细信息"><a href="#为每个问题添加安全控制详细信息" class="headerlink" title="为每个问题添加安全控制详细信息"></a>为每个问题添加安全控制详细信息</h4><p>在 bug 管理解决方案中为每个问题添加详细信息，然后使用以下其中一个解决方案解决各个问题。 这在不同组织之间存在略微差异：</p>
<table>
<thead>
<tr>
<th align="left">解决方案</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>减轻</strong></td>
<td align="left">将通过 Bug 修复或重新设计来解决问题，以减轻或消除威胁影响和严重性。</td>
</tr>
<tr>
<td align="left"><strong>转移</strong></td>
<td align="left">由其他系统或团队处理问题。</td>
</tr>
<tr>
<td align="left"><strong>避免</strong></td>
<td align="left">去除系统中包含问题的部分。</td>
</tr>
<tr>
<td align="left"><strong>接受</strong></td>
<td align="left">没有解决方案，将接受风险。 需要经授权的风险决策者的批准，其中决策者可能取决于威胁的严重性。 严重威胁可能需要高级领导的批准，而深层防御风险可能需要高级工程师批准。 与你的团队交流以获得战略指导。</td>
</tr>
</tbody></table>
<h4 id="知识检查-2"><a href="#知识检查-2" class="headerlink" title="知识检查"></a>知识检查</h4><ol>
<li>修复阶段要进行哪些工作？</li>
</ol>
<div class='checkbox'><input type="radio" />
            <p>A. 在部署系统之前验证所有修补程序。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>B. 在这一阶段，你将生成并验证一系列安全控制，并设置其优先级，以减轻或消除风险。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>C. 此时，选择框架以帮助生成潜在的威胁。</p>
            </div>

<p>参考答案：<psw>== B ==</psw></p>
<p>解释：<psw>A. 属于步骤 4 - 验证阶段。B. psw 每个威胁都对应到一个可降低或消除风险的安全控制。 根据组织的安全风险惯例，确定这些威胁的优先级并进行跟踪。C. 此任务属于步骤 2 - 中断阶段。</psw></p>
<h3 id="步骤4-验证"><a href="#步骤4-验证" class="headerlink" title="步骤4 - 验证"></a>步骤4 - 验证</h3><p>验证阶段是威胁建模过程的最后一步，通常发生在部署系统之前。 它涉及到确保满足要求、验证假设以及准备好安全控制。</p>
<h4 id="目标-3"><a href="#目标-3" class="headerlink" title="目标"></a>目标</h4><ul>
<li>确认系统满足所有新旧安全要求</li>
<li>配置云提供商、操作系统和组件以满足安全要求</li>
<li>确保使用正确的安全控制解决所有问题</li>
<li>在部署前对系统进行手动和自动验证</li>
</ul>
<div class="note warning"><p>如果不完成此阶段，就无法验证是否已成功完成安全工作。</p></div>



<h4 id="验证要求和设置默认值"><a href="#验证要求和设置默认值" class="headerlink" title="验证要求和设置默认值"></a>验证要求和设置默认值</h4><p>首先，验证是否满足第一阶段创建的所有要求。</p>
<p>示例：</p>
<ul>
<li>网络安全计划</li>
<li>机密管理解决方案实施</li>
<li>日志记录和监视系统</li>
<li>标识和访问控制</li>
</ul>
<p>然后，确保云提供商、操作系统和组件的默认配置设置已更改，可满足所有安全要求。</p>
<p>示例：</p>
<ul>
<li>启用 Azure SQL 数据库透明数据加密以保护磁盘上的数据</li>
<li>使用基于角色的访问控制 (RBAC) 向用户、组和应用程序分配权限</li>
<li>跨所有配置文件启用 Windows 防火墙</li>
</ul>
<p>应解决 bug 管理解决方案中记录的所有问题并验证所有修补程序。</p>
<h4 id="执行验证"><a href="#执行验证" class="headerlink" title="执行验证"></a>执行验证</h4><p>最后一部分涉及运行手动和自动验证。 在 Microsoft，部署系统之前必须对其进行验证，验证过程可能包含自动扫描程序、代码评审和渗透测试。 可以在每次部署之前或隔一定的时间（如每 6 - 12 个月）强制执行该过程。</p>
<p>如果以下任一问题的答案为“是”，最好设置较短的验证周期：</p>
<ul>
<li>我的系统会在部使用吗？</li>
<li>它可以处理机密数据吗？</li>
<li>我必须遵守某些规定吗？</li>
<li>我的组织是否要求实施其他安全保护过程，以应对隐私影响、运营风险或开发要求？</li>
</ul>
<h4 id="知识检查-3"><a href="#知识检查-3" class="headerlink" title="知识检查"></a>知识检查</h4><ol>
<li>验证阶段要进行哪些工作？</li>
</ol>
<div class='checkbox'><input type="radio" />
            <p>A. 实施一系列适用的安全控制，以减轻或消除风险。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>B. 在将代码推送到暂存分支进行部署之前，需要对其进行手动检查。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>C. 针对先前产生的威胁手动或自动验证系统，以验证安全控制是否降低或消除了风险。</p>
            </div>

<p>参考答案：<psw>== C ==</psw></p>
<p>解释：<psw>A. 此任务属于步骤 3 - 修复阶段。B. 此答案更适用于操作方面，而不是威胁建模过程。C. 此阶段的主要工作是验证修复、假设和满足要求。</psw></p>
<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><h4 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h4><p>威胁建模是帮助保护系统、应用程序、网络和服务的有效方法。 它可以识别潜在的威胁并推荐风险降低策略，以帮助你在开发生命周期的早期实现安全目标。</p>
<p>本模块涵盖了以下内容：</p>
<ul>
<li>了解明确要求和假设以帮助创建数据流关系图的重要性</li>
<li>了解可帮助你查找系统中安全问题的框架</li>
<li>了解有助于减轻或消除潜在威胁的安全控制类别</li>
<li>重点介绍在部署之前验证假设、要求和修复的重要性</li>
</ul>
<h4 id="后续步骤"><a href="#后续步骤" class="headerlink" title="后续步骤"></a>后续步骤</h4><p>在此学习路径的后续几个模块中，我们将了解在四个阶段引入的每个概念，并进行详细讨论：</p>
<table>
<thead>
<tr>
<th align="left">模块</th>
<th align="left">标题</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">2</td>
<td align="left">使用数据流关系图元素创建威胁模型</td>
<td align="left">了解数据流关系图中的每个元素，包括何时使用它们以及要包含的上下文。</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left">提供具有适当深度层的上下文</td>
<td align="left">在创建数据流关系图之前，了解每个上下文层次的差异和适用情形。</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left">处理数据流关系图时关注适当的威胁模型</td>
<td align="left">了解关注威胁建模活动的不同方法。</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left">使用框架识别威胁并找到减少或消除风险的方法</td>
<td align="left">深入研究 STRIDE，并进一步了解存在的风险以及如何针对这些风险保护系统。</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left">设置问题的优先级并应用安全控制措施</td>
<td align="left">了解如何设置威胁优先级，并了解系统安全控制的不同类型和功能。</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left">使用推荐工具创建数据流图</td>
<td align="left">了解可用于威胁建模的工具。</td>
</tr>
</tbody></table>
<h4 id="了解详细信息"><a href="#了解详细信息" class="headerlink" title="了解详细信息"></a>了解详细信息</h4><div class="tag link"><a class="link-card" title="安全开发生命周期" target="_blank" rel="noopener" href="https://www.microsoft.com/en-us/securityengineering/sdl/threatmodeling"><div class="left"><img src="https://img-prod-cms-rt-microsoft-com.akamaized.net/cms/api/am/imageFileData/RE1Mu3b?ver=5c31" class="lazyload" data-srcset="https://img-prod-cms-rt-microsoft-com.akamaized.net/cms/api/am/imageFileData/RE1Mu3b?ver=5c31" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="/></div><div class="right"><p class="text">安全开发生命周期</p><p class="url">https://www.microsoft.com/en-us/securityengineering/sdl/threatmodeling</p></div></a></div>





<h2 id="模块2-使用数据流关系图元素创建威胁模型"><a href="#模块2-使用数据流关系图元素创建威胁模型" class="headerlink" title="模块2 | 使用数据流关系图元素创建威胁模型"></a>模块2 | 使用数据流关系图元素创建威胁模型</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>数据流关系图由呈现为形状和线条的元素构成。 数据流关系图以图形方式表示系统的各个主要部分。</p>
<p>示例包括：</p>
<ul>
<li>用于存储客户数据的 Azure DB</li>
<li>处理用户请求的 Web 服务</li>
<li>与系统交互的用户</li>
<li>跨信任区域级别更改的数据流</li>
</ul>
<p>在威胁建模中使用元素及其交互，以帮助确定威胁并降低系统风险。 此过程可帮助工程师更有效地进行协作，同时保护其系统免受最常见的威胁攻击。</p>
<p><strong><u>本模块将介绍数据流关系图的每个元素。 这些元素具有不同的形状和功能，并且需要特定的上下文。</u></strong></p>
<div class="note info"><p>在整个学习路径中，元素也可以称为“模具”。</p></div>



<h4 id="何时使用元素"><a href="#何时使用元素" class="headerlink" title="何时使用元素"></a>何时使用元素</h4><p>在创建数据流关系图时使用这些元素。 关系图可显示系统创建、操纵、存储以及删除数据的方式。 我们以第一个模块中的示例为基础进行构建：</p>
<ul>
<li><strong>Azure 微服务</strong> - 添加元素以指定用户、身份验证过程、数据存储、数据请求和响应处理过程。<ul>
<li>别忘了指定信任区域级别更改。</li>
</ul>
</li>
<li><strong>公共 API</strong> - 添加元素以指定用户、数据存储、日志记录和监视流程以及系统的其他部分。</li>
<li><strong>现有应用程序上的新功能</strong> - 添加元素以表示系统的现有部分和新的部分。</li>
</ul>
<h4 id="学习目标-1"><a href="#学习目标-1" class="headerlink" title="学习目标"></a>学习目标</h4><p>在本模块中，你将能够：</p>
<ul>
<li>区分每个元素的形状和功能</li>
<li>在创建数据流关系图时，包含元素的正确上下文</li>
</ul>
<div class="note success"><p>无必备知识即可学习 （</p></div>



<h3 id="数据流关系图元素"><a href="#数据流关系图元素" class="headerlink" title="数据流关系图元素"></a>数据流关系图元素</h3><p>数据流关系图由各种形状组成，这些形状用于创建系统的图形表示形式。 每个形状都表示一个独特的功能。 系统将分析每个交互以帮助识别潜在的威胁和找到降低风险的方法。</p>
<p>通过正确使用形状，你能更好地明白同事和安全团队提供的信息。 每个人都能了解该系统的工作方式。 这还可以使他们无需查阅无数的设计文档和开发计划即可启动系统并使其正常运行。</p>
<div class="note info"><p>如果无法在数据流关系图中正确地体现系统的所有部分，则有可能部署具有潜在漏洞的系统。</p></div>



<table>
<thead>
<tr>
<th align="left">元素</th>
<th align="left">形状</th>
<th align="left">定义</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td align="left">过程</td>
<td align="left"><img src="/img/thread-modeling/process50.png" class="lazyload" data-srcset="/img/thread-modeling/process50.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="process50"></td>
<td align="left">接收、修改输入或将输入重定向到输出的任务，如 Web 服务。</td>
<td>Web 服务</td>
</tr>
<tr>
<td align="left">数据存储</td>
<td align="left"><img src="/img/thread-modeling/data-store50.png" class="lazyload" data-srcset="/img/thread-modeling/data-store50.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="data-store50"></td>
<td align="left">永久和临时数据存储，如 Web 缓存和 Azure 托管数据库。</td>
<td>Web 缓存和 Azure DB</td>
</tr>
<tr>
<td align="left">外部实体</td>
<td align="left"><img src="/img/thread-modeling/external-entity50.png" class="lazyload" data-srcset="/img/thread-modeling/external-entity50.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="external-entity50"></td>
<td align="left">直接控制之外的任务、实体或数据存储，如用户和第三方 API。</td>
<td>用户和第三方 API</td>
</tr>
<tr>
<td align="left">数据流</td>
<td align="left"><img src="/img/thread-modeling/data-flow50.png" class="lazyload" data-srcset="/img/thread-modeling/data-flow50.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="data-flow50"></td>
<td align="left">进程、数据存储和外部实体之间的数据移动，如连接字符串和有效负载。</td>
<td>连接字符串和有效负载</td>
</tr>
<tr>
<td align="left">信任边界</td>
<td align="left"><img src="/img/thread-modeling/trust-boundary-box50.png" class="lazyload" data-srcset="/img/thread-modeling/trust-boundary-box50.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="trust-boundary-box50"><img src="/img/thread-modeling/trust-boundary-line50-7523817.png" class="lazyload" data-srcset="/img/thread-modeling/trust-boundary-line50-7523817.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="trust-boundary-line50"></td>
<td align="left">信任区域在数据流经系统时更改，如用户使用 Internet 访问受保护的公司网络时。</td>
<td>用户通过 Internet 连接到安全的公司网络</td>
</tr>
</tbody></table>
<p>我们将在接下来的几个单元中讨论每个元素。</p>
<h3 id="过程-任务元素"><a href="#过程-任务元素" class="headerlink" title="过程 - 任务元素"></a>过程 - 任务元素</h3><p><img src="/img/thread-modeling/process50.png" class="lazyload" data-srcset="/img/thread-modeling/process50.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="process50"></p>
<p>此元素用一个圆圈表示，表示<u><strong>可以修改接收的输入或将接收的输入重定向到其相应输出的活动</strong></u>。</p>
<p>示例包括：</p>
<ul>
<li>接收 API 调用请求并将其转发到 API 处理服务的微服务</li>
<li>在数据写入数据存储之前验证数据输入的代码</li>
</ul>
<h4 id="何时使用过程元素"><a href="#何时使用过程元素" class="headerlink" title="何时使用过程元素"></a>何时使用过程元素</h4><p>在以下项之间添加过程元素：</p>
<ul>
<li><strong>数据存储</strong> - 处理数据存储之间的所有通信的过程</li>
<li><strong>具有其他元素的外部实体</strong> - 处理所有任务和通信的过程</li>
<li><strong>过程</strong> - 处理所有任务的过程</li>
</ul>
<p>根据数据流关系图所需的信息深度级别，可以使用过程元素来表示几个不同的用例：</p>
<table>
<thead>
<tr>
<th align="left">用例</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">存根</td>
<td align="left">在较高级别的数据流关系图中将过程元素用作“存根”，这是一种有助于保持整洁的好方法。 它涉及为特定过程创建一个单独的数据流关系图，并将其映射回更高级别的关系图。 它的工作方式类似于“放大”功能，在“放大”过程时，可以使用深层数据流关系图。</td>
</tr>
<tr>
<td align="left">多个任务</td>
<td align="left">当过程处理多个任务时，此用例适用。 此上下文非常重要，因为它允许查看数据流程图的任何人为每个任务应用适当的安全控制。</td>
</tr>
</tbody></table>
<h4 id="包括上下文"><a href="#包括上下文" class="headerlink" title="包括上下文"></a>包括上下文</h4><p>在每个过程元素中包含以下上下文：</p>
<table>
<thead>
<tr>
<th align="left">上下文</th>
<th align="left">问题</th>
</tr>
</thead>
<tbody><tr>
<td align="left">代码</td>
<td align="left">此过程是否以 C#、C++、Objective C、Java 或脚本语言运行？</td>
</tr>
<tr>
<td align="left">权限级别</td>
<td align="left">此过程是否需要内核、本地或管理级别权限才能运行？</td>
</tr>
<tr>
<td align="left">服务隔离</td>
<td align="left">该过程是否在沙盒中运行？</td>
</tr>
<tr>
<td align="left">输入</td>
<td align="left">此过程可以接受所有人、本地帐户还是仅限管理员的输入？</td>
</tr>
<tr>
<td align="left">验证</td>
<td align="left">此过程如何分析、处理和接受输入？</td>
</tr>
<tr>
<td align="left">身份验证</td>
<td align="left">此过程是否依赖于 Azure Active Directory 进行身份验证？ 如果不是，此过程依赖于什么进行身份验证？</td>
</tr>
<tr>
<td align="left">授权</td>
<td align="left">它是否依赖于访问控制列表 (ACL) 进行授权？ 如果不是，此过程依赖于什么进行授权？</td>
</tr>
</tbody></table>
<h4 id="知识检查-4"><a href="#知识检查-4" class="headerlink" title="知识检查"></a>知识检查</h4><ol>
<li>以下哪一项操作最能描述过程？</li>
</ol>
<div class='checkbox'><input type="radio" />
            <p>A. Web 门户要求用户提供其凭据。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>B. 缓存为用户存储与服务相关的 Cookie。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>C. 第三方 API 向其请求者发送请求的数据。</p>
            </div>

<p>参考答案：<psw>== A ==</psw></p>
<p>解释：<psw>A. 门户将处理用户输入，并将其发送到过程的下一部分。B. 存储数据的行为是与数据存储相关的事件。C. 传输数据的行为是与数据流相关的事件。</psw></p>
<h3 id="数据存储-存储元素"><a href="#数据存储-存储元素" class="headerlink" title="数据存储 - 存储元素"></a>数据存储 - 存储元素</h3><p><img src="/img/thread-modeling/data-store50.png" class="lazyload" data-srcset="/img/thread-modeling/data-store50.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="data-store50"></p>
<p>此元素用平行线表示，表示<u><strong>临时或永久存储的数据</strong></u>。</p>
<p>示例包括：</p>
<ul>
<li>使用浏览器缓存来存储与用户会话相关的数据</li>
<li>向数据库添加安全日志事件</li>
</ul>
<h4 id="何时使用数据存储元素"><a href="#何时使用数据存储元素" class="headerlink" title="何时使用数据存储元素"></a>何时使用数据存储元素</h4><ul>
<li>在每次将数据存储在 Azure DB 或本地缓存等位置时</li>
<li>如果要在两个数据存储之间建立通信，请不要忘记在它们之间添加进程</li>
<li>数据存储和外部实体都可启动数据流，因此请验证这两者中的任意一个是否已就绪</li>
<li>确保将数据后期处理包含在内，例如 Azure Analytics 等分析服务。 此过程经常被忽略。</li>
</ul>
<h4 id="包含上下文"><a href="#包含上下文" class="headerlink" title="包含上下文"></a>包含上下文</h4><p>在每个数据存储元素中包含以下上下文：</p>
<table>
<thead>
<tr>
<th align="left">上下文</th>
<th align="left">问题</th>
</tr>
</thead>
<tbody><tr>
<td align="left">类型</td>
<td align="left">系统是否使用 Azure SQL、Cookie、本地或其他某种类型的存储？ 如果是，系统使用的是哪种存储？</td>
</tr>
<tr>
<td align="left">功能</td>
<td align="left">如何使用存储？ 它是否用于共享数据、存储备份、安全日志、凭据和机密？</td>
</tr>
<tr>
<td align="left">权限级别</td>
<td align="left">如何实现访问控制？ 拥有读写权限的人员有哪些？</td>
</tr>
<tr>
<td align="left">其他控制</td>
<td align="left">数据是否加密？ 磁盘是否加密？ 是否使用数字签名？</td>
</tr>
</tbody></table>
<h4 id="知识检查-5"><a href="#知识检查-5" class="headerlink" title="知识检查"></a>知识检查</h4><ol>
<li>以下哪一项操作最能描述数据存储？</li>
</ol>
<div class='checkbox'><input type="radio" />
            <p>A. Web 门户要求用户提供其凭据。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>B. 缓存为用户存储与服务相关的 Cookie。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>C. 第三方 API 向其请求者发送请求的数据。</p>
            </div>

<p>参考答案：<psw>== B ==</psw></p>
<p>解释：<psw>A. 处理输入和输出的行为是与过程相关的事件。B. 存储数据的行为是与数据存储相关的事件。C. 传输数据的行为是与数据流相关的事件。</psw></p>
<h3 id="外部实体-无控制元素"><a href="#外部实体-无控制元素" class="headerlink" title="外部实体 - 无控制元素"></a>外部实体 - 无控制元素</h3><p><img src="/img/thread-modeling/external-entity50.png" class="lazyload" data-srcset="/img/thread-modeling/external-entity50.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="external-entity50"></p>
<p>外部实体元素由正方形表示，<u><strong>外部实体可以是过程、数据存储，甚至是直接控制之外的完整系统</strong></u>。</p>
<p>示例包括：</p>
<ul>
<li>与服务交互的用户</li>
<li>与第三方身份验证服务紧密集成</li>
<li>组织内由其他团队创建的服务</li>
</ul>
<h4 id="何时使用外部实体元素"><a href="#何时使用外部实体元素" class="headerlink" title="何时使用外部实体元素"></a>何时使用外部实体元素</h4><ul>
<li>在要表示不能直接修改的内容时</li>
<li>数据存储和外部实体都可启动数据流，因此请验证这两者中的任意一个是否已就绪</li>
</ul>
<h4 id="包含上下文-1"><a href="#包含上下文-1" class="headerlink" title="包含上下文"></a>包含上下文</h4><p>在每个外部实体元素中包含以下上下文：</p>
<table>
<thead>
<tr>
<th align="left">上下文</th>
<th align="left">问题</th>
</tr>
</thead>
<tbody><tr>
<td align="left">源</td>
<td align="left">实体是内部实体还是外部实体？</td>
</tr>
<tr>
<td align="left">类型</td>
<td align="left">实体是用户、服务提供商还是 Web 服务？</td>
</tr>
<tr>
<td align="left">身份验证</td>
<td align="left">此过程是否依赖于 Azure Active Directory 进行身份验证？ 如果不是，此过程依赖于什么进行身份验证？</td>
</tr>
<tr>
<td align="left">授权</td>
<td align="left">它是否依赖于访问控制列表 (ACL) 进行授权？ 如果不是，此过程依赖于什么进行授权？</td>
</tr>
</tbody></table>
<h4 id="知识检查-6"><a href="#知识检查-6" class="headerlink" title="知识检查"></a>知识检查</h4><ol>
<li>以下哪一项操作最准确地描述了外部实体？</li>
</ol>
<div class='checkbox'><input type="radio" />
            <p>A. Web 门户要求用户提供其凭据。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>B. 缓存为用户存储与服务相关的 Cookie。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>C. 第三方 API 向其请求者发送请求的数据。</p>
            </div>

<p>参考答案：<psw>== C ==</psw></p>
<p>解释：<psw>A. 处理输入和输出的行为是与过程相关的事件。B. 存储数据的行为是与数据存储相关的事件。C. 传输数据的行为是与数据流相关的事件。 这 C 答案的解释好像有点问题？应该解释为 第三方 API 向请求者启动了数据流？</psw></p>
<h3 id="数据流-传输元素中的数据"><a href="#数据流-传输元素中的数据" class="headerlink" title="数据流 - 传输元素中的数据"></a>数据流 - 传输元素中的数据</h3><p><img src="/img/thread-modeling/data-flow50.png" class="lazyload" data-srcset="/img/thread-modeling/data-flow50.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="data-flow50"></p>
<p>元素之间的数据移动用方向箭头表示，**<u>用于指示数据源和目标之间的通信</u>**。</p>
<p>示例包括：</p>
<ul>
<li>用户提交的用于访问服务的凭据</li>
<li>过程发出的向数据存储添加项的请求</li>
</ul>
<h4 id="何时使用数据流元素"><a href="#何时使用数据流元素" class="headerlink" title="何时使用数据流元素"></a>何时使用数据流元素</h4><ul>
<li>在每个元素交互之间</li>
<li>调出正在传输的数据类型，并包括其传输方式</li>
<li>在大多数情况下，包括对每个请求的响应</li>
</ul>
<h4 id="包含上下文-2"><a href="#包含上下文-2" class="headerlink" title="包含上下文"></a>包含上下文</h4><p>包含每个数据流元素的以下上下文：</p>
<table>
<thead>
<tr>
<th align="left">上下文</th>
<th align="left">问题</th>
</tr>
</thead>
<tbody><tr>
<td align="left">描述</td>
<td align="left">数据流是否传递会话令牌、SQL 字符串或用户凭据？ 如果不是，那么数据流传递哪些内容？</td>
</tr>
<tr>
<td align="left">协议</td>
<td align="left">流使用 HTTPS 还是 SOAP？ 如果都不是，那么流使用的是什么协议？</td>
</tr>
<tr>
<td align="left">流序列</td>
<td align="left">系统是否枚举数据流以便更容易遵循流序列？</td>
</tr>
<tr>
<td align="left">类型</td>
<td align="left">数据流中包含哪些类型的数据？ Cookie？ XML？ SOAP 有效负载？ REST 有效负载？ JSON 有效负载？</td>
</tr>
<tr>
<td align="left">其他控制</td>
<td align="left">数据流是否启用了伪造保护？ 是否启用了其他安全标志？</td>
</tr>
<tr>
<td align="left">身份验证</td>
<td align="left">此过程是否依赖于 Azure Active Directory 进行身份验证？ 如果不是，此过程依赖于什么进行身份验证？</td>
</tr>
<tr>
<td align="left">授权</td>
<td align="left">它是否依赖于访问控制列表 (ACL) 进行授权？ 如果不是，此过程依赖于什么进行授权？</td>
</tr>
</tbody></table>
<h4 id="知识检查-7"><a href="#知识检查-7" class="headerlink" title="知识检查"></a>知识检查</h4><ol>
<li>以下哪一项操作最能描述数据流？</li>
</ol>
<div class='checkbox'><input type="radio" />
            <p>A. 用户凭据从过程传输到身份验证服务提供商。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>B. 存储会话令牌以供以后使用。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>C. 第三方 API 处理服务分析请求。</p>
            </div>

<p>参考答案：<psw>== A ==</psw></p>
<p>解释：<psw>A. 传输数据的行为是与数据流相关的事件。B. 存储数据的行为是与数据存储相关的事件。C. 处理数据的行为是与过程相关的事件。</psw></p>
<h3 id="信任边界-信任区域更改元素"><a href="#信任边界-信任区域更改元素" class="headerlink" title="信任边界 - 信任区域更改元素"></a>信任边界 - 信任区域更改元素</h3><p>信任边界框</p>
<p><img src="/img/thread-modeling/trust-boundary-box50.png" class="lazyload" data-srcset="/img/thread-modeling/trust-boundary-box50.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="trust-boundary-box50"></p>
<p>信任边界线</p>
<p><img src="/img/thread-modeling/trust-boundary-line50-7523829.png" class="lazyload" data-srcset="/img/thread-modeling/trust-boundary-line50-7523829.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="trust-boundary-line50"></p>
<p>信任边界用虚线或方框表示，用于<u><strong>描述跨不同信任区域级别的数据流</strong></u>。</p>
<p>示例包括：</p>
<ul>
<li>防火墙</li>
<li>与第三方服务的连接</li>
<li>系统的某些部分仅对管理员可用</li>
</ul>
<div class="note radiation red"><p>信任区域不断变化的区域最易受到攻击者的攻击，应谨慎设计此类区域。</p></div>



<p>Microsoft 已预定义了一些供工程师内部使用的信任区域要求。你能清楚地确定要应用哪些边界。对于 Microsoft 的员工，请与安全团队联系以了解详细信息。</p>
<h4 id="何时使用信任边界元素"><a href="#何时使用信任边界元素" class="headerlink" title="何时使用信任边界元素"></a>何时使用信任边界元素</h4><p>关于信任边界，需要记住以下几个要点：</p>
<ul>
<li>包含信任边界以处理跨不同信任区域的数据流</li>
<li>信任边界线用于表示跨大型环境（例如 Internet）的数据流</li>
<li>信任边界框表示小型环境，例如沙盒环境和企业网络</li>
</ul>
<h4 id="包含上下文-3"><a href="#包含上下文-3" class="headerlink" title="包含上下文"></a>包含上下文</h4><p>在每个信任边界元素中包含以下上下文：</p>
<table>
<thead>
<tr>
<th align="left">上下文</th>
<th align="left">问题</th>
</tr>
</thead>
<tbody><tr>
<td align="left">描述</td>
<td align="left">公司网络边界？Internet？ Azure 订阅？</td>
</tr>
</tbody></table>
<h4 id="知识检查-8"><a href="#知识检查-8" class="headerlink" title="知识检查"></a>知识检查</h4><ol>
<li>以下哪一项操作最能描述跨信任边界的数据？</li>
</ol>
<div class='checkbox'><input type="radio" />
            <p>A. 用户发送到托管在 Azure 上的 Web 服务的数据。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>B. 在同一 Azure 订阅下，从 Web 服务发送到 Azure 上的数据存储的数据。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>C. 从数据存储发送到 Azure 上同一租户下的进程的数据。</p>
            </div>

<p>参考答案：<psw>== A ==</psw></p>
<p>解释：<psw>A. 将数据从不受信任的区域传输到受信任区域的行为跨越了信任边界。B. 从同一受信任区域内的资源传输数据的行为不会跨越信任边界。C. 从同一受信任区域内的资源传输数据的行为不会跨越信任边界。</psw></p>
<h3 id="小结-1"><a href="#小结-1" class="headerlink" title="小结"></a>小结</h3><p>数据流关系图是系统的图形表示形式，它应包含每个适用的过程、数据存储、外部实体、数据流和信任边界。</p>
<p>本模块涵盖了以下内容：</p>
<ul>
<li>区分了每个元素的形状和功能</li>
<li>了解了在创建数据流关系图时元素的正确上下文</li>
</ul>
<h2 id="模块3-提供具有适当深度层的上下文"><a href="#模块3-提供具有适当深度层的上下文" class="headerlink" title="模块3 | 提供具有适当深度层的上下文"></a>模块3 | 提供具有适当深度层的上下文</h2><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>工程师利用威胁建模能够以图形方式向他人描述系统。 它创建了一个共同的基础，并实现了更加集中的安全对话。</p>
<h4 id="深度层的重要性"><a href="#深度层的重要性" class="headerlink" title="深度层的重要性"></a>深度层的重要性</h4><p>根据要构建的系统和所需的上下文，威胁模型可能变得太复杂或级别太高。</p>
<p>数据流关系图深度层可帮助你了解要包含多少上下文以及何时使用它们。</p>
<div class="note green"><p>请与同事和安全团队联系，选择适当的深度层。 也可以将此模块用作参考。</p></div>



<h4 id="学习目标-2"><a href="#学习目标-2" class="headerlink" title="学习目标"></a>学习目标</h4><p>在本模块中，你将能够：</p>
<ul>
<li>了解数据流关系图深度层之间的差异</li>
<li>了解何时使用每个层</li>
</ul>
<div class="note success"><p>无必备知识即可学习 （</p></div>



<h3 id="数据流关系图深度层"><a href="#数据流关系图深度层" class="headerlink" title="数据流关系图深度层"></a>数据流关系图深度层</h3><p>数据流关系图深度层可帮助你确定要成功进行威胁建模练习应包括多少上下文。 有多个因素可帮助确定要了解的深度。</p>
<p>每个系统都应该大致了解它们的工作方式。 大多数系统应该具有附加的数据流关系图，这些关系图侧重于需要仔细研究的系统部分。</p>
<p>示例包括：</p>
<ul>
<li>分析高度敏感数据的过程</li>
<li>第三方身份验证系统</li>
</ul>
<p>威胁建模中大致使用了四个深度层：</p>
<table>
<thead>
<tr>
<th align="left">层</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">0</td>
<td align="left">对于所有系统都是必需的，并且包含主要系统部分。</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">对于大多数系统是必需的，并且包含每个系统部分的其他关系图。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">对于高度敏感的系统是必需的，并且包含系统子部分的其他关系图。</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left">对于关键级别系统或内核级别系统是必需的，并且包含每个过程的其他关系图。</td>
</tr>
</tbody></table>
<p><img src="/img/thread-modeling/depthlayers.png" class="lazyload" data-srcset="/img/thread-modeling/depthlayers.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="depthlayers"></p>
<p>我们将在接下来的几个单元中介绍各个深度层。</p>
<h3 id="第-0-层-系统层"><a href="#第-0-层-系统层" class="headerlink" title="第 0 层 - 系统层"></a>第 0 层 - 系统层</h3><p>数据流关系图的系统层是任何系统的起点，因此必须为所有系统创建系统层。</p>
<p><u><strong>目标：</strong></u><strong>表示主要的系统部分（具有足够的上下文），可帮助你了解其工作原理及彼此交互方式。</strong></p>
<p>系统层关系图应容纳在一个页面中。 它还应只包含系统处理的主要过程。 提供尽可能多的上下文，并清楚标记每个元素，以便任何人都能理解它的工作方式。</p>
<div class="note green"><p>系统层也称为上下文层。</p></div>



<h4 id="何时使用系统层"><a href="#何时使用系统层" class="headerlink" title="何时使用系统层"></a>何时使用系统层</h4><p>你创建的每个系统都需要系统层。 高级别的上下文可以帮助任何人深入了解系统，从而参与更有意义的讨论。</p>
<h4 id="深入了解系统部分"><a href="#深入了解系统部分" class="headerlink" title="深入了解系统部分"></a>深入了解系统部分</h4><p>在大多数情况下，系统部分需要进行更深入的研究，因为它们会带来风险。</p>
<p>示例包括：</p>
<ul>
<li><u>任何新系统都会给环境带来未知风险</u></li>
<li>新的分析程序、协议和文件格式</li>
<li>新的身份验证和授权机制</li>
<li>新的机密存储或加密算法</li>
<li><u>与第三方身份验证系统（例如 Facebook）集成</u></li>
<li>主要功能所需的提升权限</li>
<li>所需的未加密信道</li>
</ul>
<p>如果是这种情况，请为每个系统部分创建其他数据流关系图。 执行以下步骤：</p>
<table>
<thead>
<tr>
<th align="left">步骤</th>
<th align="left">指南</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left">使用清晰的描述标签创建一个过程元素，例如“Web 服务名称”。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">创建一个新文件，并完全按照描述标签为其命名。</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left">仅将数据流关系图侧重于要“放大”的系统部分。</td>
</tr>
</tbody></table>
<p>结果将获得过程层（称为第 1 层）中的一系列数据流关系图。</p>
<h4 id="知识检查-9"><a href="#知识检查-9" class="headerlink" title="知识检查"></a>知识检查</h4><ol>
<li>第 0 层通常被称为什么？</li>
</ol>
<div class='checkbox'><input type="radio" />
            <p>A. 上下文层。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>B. 过程层。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>C. 子过程层。</p>
            </div>

<p>参考答案：<psw>== A ==</psw></p>
<p>解释：<psw>A. 此层是任何系统的起点。 也称为系统层。B. 此层侧重于每个系统部分。C. 此层侧重于特定系统部分的系统子部分。</psw></p>
<h3 id="第-1-层-过程层"><a href="#第-1-层-过程层" class="headerlink" title="第 1 层 - 过程层"></a>第 1 层 - 过程层</h3><p>数据流关系图的过程层是第二层且应该用于大多数系统。 此层的数据流关系图包含单独的数据流关系图，这些关系图详细介绍每个系统部分。</p>
<p><u><strong>目标：</strong></u>表示次要的系统部分（具有足够的上下文），可帮助你了解其工作原理及彼此交互方式。</p>
<p>与系统层相似，过程层中的数据流关系图应容纳在一个页面中，并包含其各自系统部分的所有过程。</p>
<div class="note warning"><p>大多数数据流关系图都需要过程级别深度层才能进行正确评估。</p></div>



<h4 id="何时使用过程层"><a href="#何时使用过程层" class="headerlink" title="何时使用过程层"></a>何时使用过程层</h4><p>对每个系统都使用过程层，<u>尤其是在处理敏感数据时</u>。 具有敏感数据的系统遭受攻击的风险更高。 <u>此级别的上下文可帮助你找出威胁以及更有效地降低或消除风险的方法</u>。</p>
<h4 id="深入了解系统部分-1"><a href="#深入了解系统部分-1" class="headerlink" title="深入了解系统部分"></a>深入了解系统部分</h4><p>在某些情况下，由于系统部分的敏感性和风险增加，可能需要更精细的上下文。 通过转到此层，可以更好地评估威胁和风险降低策略。 遵循系统层中的相同规则。</p>
<table>
<thead>
<tr>
<th align="left">步骤</th>
<th align="left">指南</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left">使用清晰的描述标签创建一个过程元素，例如“Web 服务工作进程名称”。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">创建一个新文件，并完全按照描述标签为其命名，命名采用类似路径的结构，例如“Web 服务名称 - Web 服务工作进程名称”。</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left">仅将数据流关系图侧重于要“放大”的系统子部分。</td>
</tr>
</tbody></table>
<p>结果将获得子过程层（称为第 2 层）中的一系列数据流关系图。</p>
<div class="note green"><p>类似路径的文件命名结构有助于区分不同的级别</p></div>



<h4 id="知识检查-10"><a href="#知识检查-10" class="headerlink" title="知识检查"></a>知识检查</h4><ol>
<li>大多数应用程序属于哪一层？</li>
</ol>
<div class='checkbox'><input type="radio" />
            <p>A. 上下文层。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>B. 过程层。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>C. 子过程层。</p>
            </div>

<p>参考答案：<psw>== B ==</psw></p>
<p>解释：<psw>A. 此层是任何系统的起点。 也称为系统层。B. 此层侧重于每个系统部分。C. 此层侧重于特定系统部分的系统子部分。</psw></p>
<h3 id="第-2-层-子过程层"><a href="#第-2-层-子过程层" class="headerlink" title="第 2 层 - 子过程层"></a>第 2 层 - 子过程层</h3><p>数据流关系图子过程是第三层。 <u>每当在创建高度敏感的系统时就应使用该层</u>。 此层的数据流关系图包含单独的数据流关系图，这些关系图分别详细介绍每个系统子部分。</p>
<p>目标：表示系统子部分（具有足够的上下文），可帮助你了解其工作原理及彼此交互方式。</p>
<p>与过程层相似，系统子过程层中的数据流关系图应容纳在一个页面中，并包含其各自系统子部分的所有过程。</p>
<div class="note warning"><p>请与你的团队核对以确认是否需要此深度级别。</p></div>



<h4 id="何时使用子过程层"><a href="#何时使用子过程层" class="headerlink" title="何时使用子过程层"></a>何时使用子过程层</h4><p>将子过程层用于组织认为比较关键的系统。 系统子部分中的漏洞可能会使整个系统、客户和组织面临重大风险。</p>
<p>示例包括以下系统：</p>
<ul>
<li>在安全环境中使用的系统</li>
<li>处理敏感数据的系统</li>
<li>具有高风险评分的系统</li>
</ul>
<h4 id="深入了解系统子部分"><a href="#深入了解系统子部分" class="headerlink" title="深入了解系统子部分"></a>深入了解系统子部分</h4><p>任何需要更深入研究的系统子部分都应遵循过程层中的相同规则，并具有各自独立的数据流关系图。 通过较低级别的视图，用户可以“放大”和“缩小”系统，以展现尽可能多的上下文并达到更佳的清晰度。 方法如下：</p>
<table>
<thead>
<tr>
<th align="left">步骤</th>
<th align="left">指南</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left">使用清晰的描述标签创建一个过程元素，例如“输入分析程序名称”。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">创建一个新文件，并使用与描述标签完全相同的名称为其命名，命名采用树状结构，例如“Web 服务名称 - Web 服务工作进程名称 - 输入分析程序名称”。</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left">仅将数据流关系图侧重于要“放大”的较低级别的系统子部分。</td>
</tr>
</tbody></table>
<p>结果将得到较低级别层（称为第 3 层）中的一系列数据流关系图。</p>
<div class="note green"><p>类似路径的文件命名结构有助于区分不同的级别。</p></div>



<h3 id="第-3-层-较低级别层"><a href="#第-3-层-较低级别层" class="headerlink" title="第 3 层 - 较低级别层"></a>第 3 层 - 较低级别层</h3><p>低级别层是最后一层，应在<u>创建内核级别系统或关键级别系统时使用</u>。 此层的数据流关系图包含单独的数据流关系图，这些关系图详细介绍每个低级别系统子部分。</p>
<p>目标：表示低级别系统子部分（具有足够的上下文），可帮助你了解其工作原理及彼此交互方式。</p>
<p>与过程层相似，系统子过程层中的数据流关系图应容纳在一个页面中，并包含其各自系统子部分的所有过程。</p>
<div class="note warning"><p>请与你的团队核对以确认是否需要此深度级别。</p></div>



<h4 id="何时使用低级别层"><a href="#何时使用低级别层" class="headerlink" title="何时使用低级别层"></a>何时使用低级别层</h4><p>高度关键级别系统和内核级别的系统应在此层进行威胁建模。 数据流关系图应详细描述每个子过程。 此外，通常只为一个子过程进行多轮安全检查。</p>
<p>按照前面各层中的步骤操作，将每个关系图追溯到各自的系统部分。</p>
<h3 id="小结-2"><a href="#小结-2" class="headerlink" title="小结"></a>小结</h3><h4 id="摘要-1"><a href="#摘要-1" class="headerlink" title="摘要"></a>摘要</h4><p>工程师利用威胁建模能够以图形方式向他人描述系统。 它创建了一个共同的基础，并实现了更加集中的安全对话。</p>
<p>但是，根据要构建的系统和所需的上下文，威胁模型可能变得太复杂或级别太高。</p>
<p>在本模块中，你了解了如何确定问题的优先级，以及如何根据类型和功能应用恰当的安全控制层。</p>
<p>本模块涵盖了以下内容：</p>
<ul>
<li>了解了数据流关系图深度层之间的差异</li>
<li>了解了何时使用每个层</li>
</ul>
<div class="note info"><p><strong>你知道吗？</strong> 除了这四个层之外，你还可以根据用户角色创建关系图，以帮助找出身份验证和授权方面的缺陷。 据 <a target="_blank" rel="noopener" href="https://owasp.org/www-project-top-ten/">OWASP</a> 等信息源的报道，这些事故是目前各个组织面临的最大安全问题，因此，根据适用的角色应用威胁模型可以增强整个系统的安全性并帮助保护客户。</p></div>



<h4 id="知识检查-11"><a href="#知识检查-11" class="headerlink" title="知识检查"></a>知识检查</h4><ol>
<li>以下哪条陈述概括了在威胁建模阶段提早定义上下文深度层的重要性</li>
</ol>
<div class='checkbox'><input type="radio" />
            <p>A. 这样我可以收集所有使用的外部组件的详细信息。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>B. 这样做可以帮助我根据要求和期望生成恰当级别的上下文。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>C. 这样做有助于在进行安全评审之前找出所有相关威胁。</p>
            </div>

<p>参考答案：<psw>== B ==</psw></p>
<p>解释：<psw>A. 该陈述描述了设计阶段的一部分，但未定义上下文深度层的重要性。B. 此陈述阐明了在创建数据流关系图之前设置适当上下文级别的重要性。C. 此陈述描述了中断阶段的一部分，该阶段发生在创建数据流之后。</psw></p>
<h2 id="模块4-处理数据流关系图关注适当的威胁模型"><a href="#模块4-处理数据流关系图关注适当的威胁模型" class="headerlink" title="模块4 | 处理数据流关系图关注适当的威胁模型"></a>模块4 | 处理数据流关系图关注适当的威胁模型</h2><p>威胁建模是一种有效的技术，可帮助你确定威胁以及找到降低风险的方法。 你可以选择重点关注发现需要保护的方面或者攻击者在系统中的行为方式。</p>
<h3 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h3><h4 id="重点关注重要方面"><a href="#重点关注重要方面" class="headerlink" title="重点关注重要方面"></a>重点关注重要方面</h4><p>关注适当的方面可以帮助你定制威胁建模练习，以得出优秀的效果。</p>
<p>示例包括：</p>
<ul>
<li>设计文件共享应用程序，并专注于保护其进程、数据存储和数据流。</li>
<li>设计文件共享应用程序，并专注于深入了解攻击者。<ul>
<li>包括攻击者的动机以及可能用于攻击应用程序的方式</li>
</ul>
</li>
</ul>
<p>在此模块中，<u>你将了解执行针对系统的威胁建模练习的含义</u>。 还会了解针对系统、资产和攻击者的方法之间的大概差异。</p>
<h4 id="学习目标-3"><a href="#学习目标-3" class="headerlink" title="学习目标"></a>学习目标</h4><p>在本模块中，你将能够：</p>
<ul>
<li>定义针对系统的威胁建模练习</li>
<li>说明针对系统、资产和攻击者的方法之间的大概差异</li>
</ul>
<div class="note success"><p>无必备知识即可学习 （</p></div>



<h3 id="威胁建模针对性方法"><a href="#威胁建模针对性方法" class="headerlink" title="威胁建模针对性方法"></a>威胁建模针对性方法</h3><p>威胁建模是一种很好的技术，可帮助你在开发生命周期的更早阶段发现问题。 选择侧重点恰当的方法有助于定制威胁建模练习。 你可以发现更多可对其执行操作的威胁和解决威胁的方法。</p>
<h4 id="侧重系统的方法"><a href="#侧重系统的方法" class="headerlink" title="侧重系统的方法"></a>侧重系统的方法</h4><p>目的是保护整个系统。 关注每个过程、数据存储、数据流、外部实体和信任边界。 利用此信息，可用选择安全控制措施来帮助保护系统。</p>
<p>此框架有助于分析系统及其对其他资产的影响，具体包括：</p>
<table>
<thead>
<tr>
<th align="left">资产类型</th>
<th align="left">示例</th>
</tr>
</thead>
<tbody><tr>
<td align="left">逻辑</td>
<td align="left">源代码、API 和逻辑安全控制措施</td>
</tr>
<tr>
<td align="left">物理</td>
<td align="left">服务器和物理安全控制资产</td>
</tr>
</tbody></table>
<h4 id="侧重攻击者的方法"><a href="#侧重攻击者的方法" class="headerlink" title="侧重攻击者的方法"></a>侧重攻击者的方法</h4><p>你可以着眼于攻击者、其动机、方法，以及他们能够在系统中造成破坏的所有方式。 这种方法关注入口点，而不是整个系统。</p>
<p>使用此方法，你可以专注于包含系统高度机密数据的关键资产。 重点是保护这些资产，而不是整个系统。</p>
<h4 id="侧重资产的方法"><a href="#侧重资产的方法" class="headerlink" title="侧重资产的方法"></a>侧重资产的方法</h4><p>评估每项资产的风险。 此方法基于分类数据处理等功能确定关键资产，主要专注于保护这些资产。</p>
<div class="note info"><p>Microsoft 工程师致力于保护系统。 渗透测试团队致力于保护系统和了解攻击者。</p></div>



<h3 id="针对系统的和其他方面的方法"><a href="#针对系统的和其他方面的方法" class="headerlink" title="针对系统的和其他方面的方法"></a>针对系统的和其他方面的方法</h3><h4 id="侧重系统的方法的重要性"><a href="#侧重系统的方法的重要性" class="headerlink" title="侧重系统的方法的重要性"></a>侧重系统的方法的重要性</h4><p>使用 Azure 对用户进行身份验证是很好的做法。 了解它的工作原理，了解它是如何与系统的每个部分进行交互，可以更好地避免产生实现部署后的未知风险。</p>
<p>毕竟，威胁建模的目标是验证之前做出的假设，确定潜在的威胁，并在开发生命周期中更早地降低风险。</p>
<p>侧重系统的方法的实践示例</p>
<p>让我们以文件共享应用程序为例。 在这种情况下，查看数据流关系图时，可能会看到以下流：</p>
<ul>
<li>用户请求访问应用程序</li>
<li>身份验证流启动</li>
<li>用户与其他用户共享文件</li>
</ul>
<p>此方法分析并保护每个元素， 例如用户、Web 服务、身份验证服务、数据存储、Internet 与 Azure 之间的信任边界以及数据流。</p>
<div class="note info"><p>针对系统的方法包含其他一些方法，但可能需要一一试用才能获得更精细的效果。</p></div>



<h4 id="知识检查-12"><a href="#知识检查-12" class="headerlink" title="知识检查"></a>知识检查</h4><ol>
<li>针对系统的方法有什么好处？</li>
</ol>
<div class='checkbox'><input type="radio" />
            <p>A. 使用此方法，你可以一次专注一个关键资产，以帮助确定所有潜在威胁以及降低或消除风险的方法。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>B. 此方法可提供潜在攻击者的信息，其中包括其手段、动机和行动计划。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>C. 此方法可让你专注于改进系统处理用户和数据的方法。 它还会验证关于通过服务使用的物理和逻辑资产的安全假设。</p>
            </div>



<ol start="2">
<li>针对攻击者的方法有什么好处？</li>
</ol>
<div class='checkbox'><input type="radio" />
            <p>A. 使用此方法，你可以一次专注一个关键资产，以识别所有潜在威胁以及降低风险的方法。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>B. 此方法可提供潜在攻击者的信息，其中包括其手段、动机和行动计划。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>C. 此方法可让你专注于改进系统处理用户和数据的方法。 它还会验证关于通过服务使用的物理和逻辑资产的安全假设。</p>
            </div>



<p>参考答案：</p>
<ol>
<li><psw>== C ==</psw></li>
<li><psw>== B ==</psw></li>
</ol>
<p>解释：</p>
<ol>
<li><psw>A. 此条目对应于针对资产的方法。B. 此条目对应于针对攻击者的方法。C. 针对系统的方法考察整个系统，而不仅仅是其中的某些部分。</psw></li>
<li><psw>A. 此条目对应于针对资产的方法。B. 针对攻击者的方法基于攻击者及其攻击计划。C. 此条目描述针对系统的方法。</psw></li>
</ol>
<h3 id="小结-3"><a href="#小结-3" class="headerlink" title="小结"></a>小结</h3><p>威胁建模是一种有效的技术，可帮助你确定威胁以及降低或消除风险的方法。 你可以侧重于发现需要保护的方面或者攻击者在系统中的行为方式。</p>
<p>你了解了执行针对系统的威胁建模练习的含义。 还了解了针对系统、资产和攻击者的方法之间的差异。</p>
<p>在本模块中，你已经学习了以下内容：</p>
<ul>
<li>定义了针对系统的威胁建模练习</li>
<li>说明了针对系统、资产和攻击者的方法之间的大概差异</li>
</ul>
<h2 id="模块5-使用框架识别威胁并找到减少或消除风险的方法"><a href="#模块5-使用框架识别威胁并找到减少或消除风险的方法" class="headerlink" title="模块5 | 使用框架识别威胁并找到减少或消除风险的方法"></a>模块5 | 使用框架识别威胁并找到减少或消除风险的方法</h2><h3 id="介绍-1"><a href="#介绍-1" class="headerlink" title="介绍"></a>介绍</h3><p>威胁建模框架可帮助你生成潜在威胁的列表，并找到降低或消除风险的方法。</p>
<p>你只需具备信息安全方面的应用知识，框架就可为你列出威胁的主要类别，以确保它们得到适当的处理。</p>
<h4 id="何时使用框架"><a href="#何时使用框架" class="headerlink" title="何时使用框架"></a>何时使用框架</h4><p>此框架应适用于为新系统或现有系统创建的每个数据流关系图。</p>
<div class="note info"><p>目的是在开发生命周期的早期尽可能多地发现并修复问题。 等待时间越长，客户的风险就越高。</p></div>



<h4 id="预期结果"><a href="#预期结果" class="headerlink" title="预期结果"></a>预期结果</h4><p>框架将为你呈现六个主要威胁类别，每个类别下有无数个潜在威胁。</p>
<p>通过该框架，你将能够回答以下问题：</p>
<ul>
<li>通信的双方是否都通过了身份验证？</li>
<li>如何得知某人无法更改传输中的数据、正在使用的数据或静态数据？</li>
<li>每个操作是否可以绑定到标识？</li>
<li>如何得知某人无法看到传输中的数据、正在使用的数据或静态数据？</li>
<li>系统中是否存在资源受限的区域？</li>
<li>如何得知某人可以执行此操作？</li>
</ul>
<p>在本模块中，你将了解每种威胁类别及其相应的安全控制。</p>
<h4 id="学习目标-4"><a href="#学习目标-4" class="headerlink" title="学习目标"></a>学习目标</h4><p>在本模块中，你将能够：</p>
<ul>
<li>讨论威胁建模框架中的每个威胁类别</li>
<li>了解有助于降低或消除风险的安全控制</li>
</ul>
<div class="note success"><p>无必备知识即可学习 （</p></div>



<h3 id="威胁建模框架"><a href="#威胁建模框架" class="headerlink" title="威胁建模框架"></a>威胁建模框架</h3><p>威胁建模框架查看数据流关系图中的每个元素（包括它们的交互）。 这有助于发现潜在威胁和找到降低或消除风险的方式。</p>
<h4 id="威胁类别"><a href="#威胁类别" class="headerlink" title="威胁类别"></a>威胁类别</h4><p>Microsoft 工程师使用 STRIDE 框架中的六个主要威胁类别来发现安全设计问题：</p>
<table>
<thead>
<tr>
<th align="left">Category</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">欺骗</td>
<td align="left">冒充某人或某物</td>
</tr>
<tr>
<td align="left">篡改</td>
<td align="left">未经授权更改数据</td>
</tr>
<tr>
<td align="left">否认性</td>
<td align="left">不宣称对执行的操作负责</td>
</tr>
<tr>
<td align="left">信息泄露</td>
<td align="left">未经许可查看数据</td>
</tr>
<tr>
<td align="left">拒绝服务</td>
<td align="left">系统繁忙</td>
</tr>
<tr>
<td align="left">权限提升</td>
<td align="left">拥有本不应该拥有的权限</td>
</tr>
</tbody></table>
<h4 id="安全控制类别"><a href="#安全控制类别" class="headerlink" title="安全控制类别"></a>安全控制类别</h4><p>每个威胁类别都与安全控制关联，以帮助你降低或消除风险</p>
<table>
<thead>
<tr>
<th align="left">类别</th>
<th align="left">安全控制</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">欺骗</td>
<td align="left">身份验证</td>
<td align="left">其身份是否如其所述</td>
</tr>
<tr>
<td align="left">篡改</td>
<td align="left">完整性</td>
<td align="left">防止恶意修改数据</td>
</tr>
<tr>
<td align="left">否认性</td>
<td align="left">不可否认性</td>
<td align="left">操作与用户绑定</td>
</tr>
<tr>
<td align="left">信息泄露</td>
<td align="left">机密性</td>
<td align="left">保护数据免遭意外泄露</td>
</tr>
<tr>
<td align="left">拒绝服务</td>
<td align="left">可用性</td>
<td align="left">系统适当处理所有请求</td>
</tr>
<tr>
<td align="left">特权提升</td>
<td align="left">授权</td>
<td align="left">用户拥有执行请求的适当权限</td>
</tr>
</tbody></table>
<p>我们在接下来的几个单元中来了解一下各种威胁类别。</p>
<h3 id="欺骗-冒充某人或某物"><a href="#欺骗-冒充某人或某物" class="headerlink" title="欺骗 - 冒充某人或某物"></a>欺骗 - 冒充某人或某物</h3><p>当恶意人员或程序成功地冒充用户或系统进行恶意活动时，就会发生欺骗。</p>
<p>示例包括：</p>
<ul>
<li>攻击者通过看似合法的帐户向用户发送一封带有恶意链接和附件的电子邮件，以捕获用户的凭据、数据和设备访问权限</li>
<li>攻击者欺骗 SSID 和 IP 地址，同时使用开放且原本不安全的 TCP/IP 协议向受害者发送恶意的有效负载</li>
</ul>
<h4 id="可能面临欺骗攻击风险的元素和交互"><a href="#可能面临欺骗攻击风险的元素和交互" class="headerlink" title="可能面临欺骗攻击风险的元素和交互"></a>可能面临欺骗攻击风险的元素和交互</h4><p>元素</p>
<table>
<thead>
<tr>
<th align="left">名称</th>
<th align="left">形状</th>
<th align="left">定义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">过程</td>
<td align="left"><img src="/img/thread-modeling/process50.png" class="lazyload" data-srcset="/img/thread-modeling/process50.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="process50"></td>
<td align="left">修改输入或将输入重定向到输出的活动</td>
</tr>
<tr>
<td align="left">外部实体</td>
<td align="left"><img src="/img/thread-modeling/external-entity50.png" class="lazyload" data-srcset="/img/thread-modeling/external-entity50.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="external-entity50"></td>
<td align="left">控制措施之外的过程、数据存储，甚至完全成熟的应用程序</td>
</tr>
</tbody></table>
<p>交互</p>
<table>
<thead>
<tr>
<th align="left">名称</th>
<th align="left">交互</th>
<th align="left">定义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">过程 &lt;-&gt; 过程</td>
<td align="left"><img src="/img/thread-modeling/process-process.png" class="lazyload" data-srcset="/img/thread-modeling/process-process.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="process-process"></td>
<td align="left">一个任务从任务接收数据或向任务发送数据</td>
</tr>
<tr>
<td align="left">过程 &lt;-&gt; 数据存储</td>
<td align="left"><img src="/img/thread-modeling/process-datastore.png" class="lazyload" data-srcset="/img/thread-modeling/process-datastore.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="process-datastore"></td>
<td align="left">一个任务向数据存储发送数据或从数据存储接收数据</td>
</tr>
<tr>
<td align="left">过程 &lt;-&gt; 外部实体</td>
<td align="left"><img src="/img/thread-modeling/process-externalentity.png" class="lazyload" data-srcset="/img/thread-modeling/process-externalentity.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="process-externalentity"></td>
<td align="left">一个任务向外部实体发送数据或从外部实体接收数据</td>
</tr>
</tbody></table>
<h4 id="如何防止欺骗攻击"><a href="#如何防止欺骗攻击" class="headerlink" title="如何防止欺骗攻击"></a>如何防止欺骗攻击</h4><p>身份验证验证了用户和系统的身份是否属实。</p>
<p>示例包括：</p>
<ul>
<li>发送和接收使用数字签名进行签名的消息，以验证来源并确保消息完整性</li>
<li>使用 SSL/TLS 保护数据传输，以加密信息源和目标之间的流量</li>
<li>使用具有时效有限的令牌、密码或多重身份验证的唯一凭据来帮助保护用户、管理员和服务帐户</li>
</ul>
<h4 id="用于降低或消除风险的常用安全控制"><a href="#用于降低或消除风险的常用安全控制" class="headerlink" title="用于降低或消除风险的常用安全控制"></a>用于降低或消除风险的常用安全控制</h4><p>对于数据：</p>
<ul>
<li>哈希</li>
<li>消息验证码</li>
<li>数字签名</li>
</ul>
<p>对于系统：</p>
<ul>
<li>用户身份验证</li>
<li>Cookie 身份验证</li>
<li>Kerberos</li>
<li>SSL/TLS</li>
<li>证书</li>
<li>IPSec</li>
<li>数字签名的数据包</li>
</ul>
<div class="note green"><p>推荐问题：是否已验证通信双方的身份？</p></div>



<h4 id="知识检查-13"><a href="#知识检查-13" class="headerlink" title="知识检查"></a>知识检查</h4><ol>
<li>哪一条陈述描述了针对欺骗的安全控制？</li>
</ol>
<div class='checkbox'><input type="radio" />
            <p>A. 发送方对消息进行数字签名，以便接收方了解消息的来源。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>B. 系统记录所有操作和用户，明确每个人的责任。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>C. 系统为访问控制列表中列出的用户授予管理访问权限。</p>
            </div>

<p>参考答案：<psw>== A ==</psw></p>
<p>解释：<psw>A. 此消息适用于欺骗。B. 这条陈述适用于否认性。C. 这条陈述适用于篡改、信息泄露、拒绝服务和权限提升。</psw></p>
<h3 id="篡改-未经授权更改数据"><a href="#篡改-未经授权更改数据" class="headerlink" title="篡改 - 未经授权更改数据"></a>篡改 - 未经授权更改数据</h3><p>当恶意攻击者未经授权在系统中读取、修改、删除或插入数据时，就会发生篡改。</p>
<p>示例包括：</p>
<ul>
<li>修改临时存储在缓存中、通过网络发送或永久存储在数据库中的数据以破坏数据完整性</li>
<li>将恶意有效负载插入浏览器缓存中，以导致进程和数据存储中的行为异常</li>
<li>通过弱 API 调用处理修改内存，导致崩溃和泄漏敏感错误消息</li>
<li>将数据重定向到被入侵的计算机以接管系统</li>
<li>诱使用户连接网络或下载文件，从而授予他们流量和设备访问权限（与欺骗结合使用）</li>
</ul>
<h4 id="可能面临篡改攻击风险的元素和交互"><a href="#可能面临篡改攻击风险的元素和交互" class="headerlink" title="可能面临篡改攻击风险的元素和交互"></a>可能面临篡改攻击风险的元素和交互</h4><p>元素</p>
<table>
<thead>
<tr>
<th align="left">名称</th>
<th align="left">形状</th>
<th align="left">定义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">过程</td>
<td align="left"><img src="/img/thread-modeling/process50.png" class="lazyload" data-srcset="/img/thread-modeling/process50.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="process50"></td>
<td align="left">修改输入或将输入重定向到输出的活动</td>
</tr>
<tr>
<td align="left">数据存储</td>
<td align="left"><img src="/img/thread-modeling/data-store50.png" class="lazyload" data-srcset="/img/thread-modeling/data-store50.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="data-store50"></td>
<td align="left">永久或临时的数据存储</td>
</tr>
<tr>
<td align="left">数据流</td>
<td align="left"><img src="/img/thread-modeling/data-flow50.png" class="lazyload" data-srcset="/img/thread-modeling/data-flow50.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="data-flow50"></td>
<td align="left">元素之间的数据移动</td>
</tr>
</tbody></table>
<p>交互</p>
<table>
<thead>
<tr>
<th>名称</th>
<th align="left">交互</th>
<th align="left">定义</th>
</tr>
</thead>
<tbody><tr>
<td>过程 &lt;-&gt; 数据存储</td>
<td align="left"><img src="/img/thread-modeling/process-datastore.png" class="lazyload" data-srcset="/img/thread-modeling/process-datastore.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="process-datastore"></td>
<td align="left">一个任务向数据存储发送数据或从数据存储接收数据</td>
</tr>
<tr>
<td>数据流 &lt;-&gt; 信任边界</td>
<td align="left"><img src="/img/thread-modeling/flow-trustboundary-7599331.png" class="lazyload" data-srcset="/img/thread-modeling/flow-trustboundary-7599331.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="flow-trustboundary"></td>
<td align="left">通过 Internet 将数据从受信任的环境传输给某人（反之亦然）</td>
</tr>
</tbody></table>
<h4 id="如何防止篡改"><a href="#如何防止篡改" class="headerlink" title="如何防止篡改"></a>如何防止篡改</h4><p>完整性防止恶意修改数据。 示例包括：</p>
<ul>
<li>验证输入以防止处理恶意有效负载和错误处理意外行为</li>
<li>使用数字签名对消息进行签名，以确保消息不被篡改</li>
<li>使用访问控制列表应用权限</li>
<li>使用 SSL/TLS 保护传输</li>
<li>创建 IPSec 隧道，以保护终结点之间的通信</li>
</ul>
<h4 id="用于降低或消除风险的常用安全控制-1"><a href="#用于降低或消除风险的常用安全控制-1" class="headerlink" title="用于降低或消除风险的常用安全控制"></a>用于降低或消除风险的常用安全控制</h4><ul>
<li>操作系统完整性控制</li>
<li>访问控制列表 (ACL)</li>
<li>数字签名</li>
<li>消息验证码</li>
</ul>
<div class="note green"><p>推荐问题：如何得知某人无法更改传输中的数据或静态数据？</p></div>



<h4 id="知识检查-14"><a href="#知识检查-14" class="headerlink" title="知识检查"></a>知识检查</h4><ol>
<li>哪一条陈述描述了针对篡改的安全控制？</li>
</ol>
<div class='checkbox'><input type="radio" />
            <p>A. 发件人对电子邮件附件进行加密，以便让收件人知道电子邮件由何人所发。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>B. 系统记录所有操作和用户，明确每个人的责任。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>C. 系统为访问控制列表中列出的用户授予管理访问权限。</p>
            </div>

<p>参考答案：<psw>== C ==</psw></p>
<p>解释：<psw>A. 加密附件是不够的。 对消息进行数字签名，以确保不会发生篡改。B. 这条陈述适用于否认性。C. 这条陈述适用于篡改、信息泄露、拒绝服务和权限提升。</psw></p>
<h3 id="否认性-不宣称对执行的操作负责"><a href="#否认性-不宣称对执行的操作负责" class="headerlink" title="否认性 - 不宣称对执行的操作负责"></a>否认性 - 不宣称对执行的操作负责</h3><p>当有人出于恶意或无意采取某个操作，但声明其他操作时，就会发生否认性。</p>
<p>示例包括：</p>
<ul>
<li>拒绝修改包含敏感操作的日志</li>
<li>使用其他人的帐户以避免被抓</li>
<li>声称没有删除数据库记录</li>
</ul>
<div class="note info"><p>系统日志是攻击者的金矿，不仅可用于操纵，而且可用于收集有关用户、环境和弱点的数据。</p></div>



<h4 id="可能面临否认性攻击风险的元素和交互"><a href="#可能面临否认性攻击风险的元素和交互" class="headerlink" title="可能面临否认性攻击风险的元素和交互"></a>可能面临否认性攻击风险的元素和交互</h4><p>元素</p>
<table>
<thead>
<tr>
<th align="left">名称</th>
<th align="left">形状</th>
<th align="left">定义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">过程</td>
<td align="left"><img src="/img/thread-modeling/process50.png" class="lazyload" data-srcset="/img/thread-modeling/process50.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="process50"></td>
<td align="left">修改输入或将输入重定向到输出的活动</td>
</tr>
<tr>
<td align="left">外部实体</td>
<td align="left"><img src="/img/thread-modeling/external-entity50.png" class="lazyload" data-srcset="/img/thread-modeling/external-entity50.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="external-entity50"></td>
<td align="left">控制措施之外的过程、数据存储，甚至完全成熟的应用程序</td>
</tr>
<tr>
<td align="left">数据存储</td>
<td align="left"><img src="/img/thread-modeling/data-store50.png" class="lazyload" data-srcset="/img/thread-modeling/data-store50.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="data-store50"></td>
<td align="left">永久或临时的数据存储</td>
</tr>
</tbody></table>
<p>交互</p>
<table>
<thead>
<tr>
<th>名称</th>
<th align="left">交互</th>
<th align="left">定义</th>
</tr>
</thead>
<tbody><tr>
<td>过程 &lt;-&gt; 过程</td>
<td align="left"><img src="/img/thread-modeling/process-process.png" class="lazyload" data-srcset="/img/thread-modeling/process-process.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="process-process"></td>
<td align="left">一个任务从任务接收数据或向任务发送数据</td>
</tr>
<tr>
<td>过程 &lt;-&gt; 外部实体</td>
<td align="left"><img src="/img/thread-modeling/process-externalentity.png" class="lazyload" data-srcset="/img/thread-modeling/process-externalentity.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="process-externalentity"></td>
<td align="left">一个任务向用户发送数据或从用户接收数据</td>
</tr>
<tr>
<td>过程 &lt;-&gt; 数据存储</td>
<td align="left"><img src="/img/thread-modeling/process-datastore.png" class="lazyload" data-srcset="/img/thread-modeling/process-datastore.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="process-datastore"></td>
<td align="left">一个任务向数据存储发送数据或从数据存储接收数据</td>
</tr>
</tbody></table>
<h4 id="如何防止否认性攻击"><a href="#如何防止否认性攻击" class="headerlink" title="如何防止否认性攻击"></a>如何防止否认性攻击</h4><p>不可否认性通过创建和保护安全日志来确保每个操作都可以追溯到其来源。</p>
<h4 id="用于降低或消除风险的常用安全控制-2"><a href="#用于降低或消除风险的常用安全控制-2" class="headerlink" title="用于降低或消除风险的常用安全控制"></a>用于降低或消除风险的常用安全控制</h4><ul>
<li>强身份验证</li>
<li>安全日志记录和监视</li>
<li>数字签名</li>
<li>安全时间戳</li>
<li>受信任的第三方</li>
</ul>
<div class="note green"><p>推荐问题：是否可以将每个操作与身份绑定？</p></div>



<h4 id="知识检查-15"><a href="#知识检查-15" class="headerlink" title="知识检查"></a>知识检查</h4><ol>
<li>哪一条陈述描述了针对否认性的安全控制？</li>
</ol>
<div class='checkbox'><input type="radio" />
            <p>A. 发送方对消息进行数字签名，以便接收方了解消息的来源。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>B. 系统记录所有操作和用户，明确每个人的责任。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>C. 系统为访问控制列表中列出的用户授予管理访问权限。</p>
            </div>

<p>参考答案：<psw>== B ==</psw></p>
<p>解释：<psw>A. 此消息适用于欺骗。B. 这条陈述适用于否认性。C. 这条陈述适用于篡改、信息泄露、拒绝服务和权限提升。</psw></p>
<h3 id="信息泄漏-查看不应查看的数据"><a href="#信息泄漏-查看不应查看的数据" class="headerlink" title="信息泄漏 - 查看不应查看的数据"></a>信息泄漏 - 查看不应查看的数据</h3><p>向未经授权的个人公开敏感数据时，会发生信息泄漏。 无论是在有意或无意的情况下，都有可能发生信息泄露。</p>
<p>示例包括：</p>
<ul>
<li>系统通过错误消息泄露敏感数据</li>
<li>用户访问安全控制较弱的未授权文档和文件夹</li>
<li>用户访问流经非安全网络的数据</li>
</ul>
<h4 id="可能面临信息泄漏风险的元素和交互"><a href="#可能面临信息泄漏风险的元素和交互" class="headerlink" title="可能面临信息泄漏风险的元素和交互"></a>可能面临信息泄漏风险的元素和交互</h4><p>元素</p>
<table>
<thead>
<tr>
<th align="left">名称</th>
<th align="left">形状</th>
<th align="left">定义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">过程</td>
<td align="left"><img src="/img/thread-modeling/process50.png" class="lazyload" data-srcset="/img/thread-modeling/process50.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="process50"></td>
<td align="left">修改输入或将输入重定向到输出的活动</td>
</tr>
<tr>
<td align="left">数据存储</td>
<td align="left"><img src="/img/thread-modeling/data-store50.png" class="lazyload" data-srcset="/img/thread-modeling/data-store50.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="data-store50"></td>
<td align="left">永久或临时的数据存储</td>
</tr>
<tr>
<td align="left">数据流</td>
<td align="left"><img src="/img/thread-modeling/data-flow50.png" class="lazyload" data-srcset="/img/thread-modeling/data-flow50.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="data-flow50"></td>
<td align="left">元素之间的数据移动</td>
</tr>
</tbody></table>
<p>交互</p>
<table>
<thead>
<tr>
<th align="left">名称</th>
<th align="left">交互</th>
<th align="left">定义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">过程 &lt;-&gt; 过程</td>
<td align="left"><img src="/img/thread-modeling/process-process.png" class="lazyload" data-srcset="/img/thread-modeling/process-process.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="process-process"></td>
<td align="left">一个任务将数据发送到另一个任务</td>
</tr>
<tr>
<td align="left">过程 &lt;-&gt; 外部实体</td>
<td align="left"><img src="file:///Users/tari/Sites/TARI0510.github.io/source/img/thread-modeling/process-externalentity.png?lastModify=1617599435" class="lazyload" data-srcset="file:///Users/tari/Sites/TARI0510.github.io/source/img/thread-modeling/process-externalentity.png?lastModify=1617599435" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="process-externalentity"></td>
<td align="left">一个任务向用户发送数据或从用户接收数据</td>
</tr>
<tr>
<td align="left">过程 &lt;-&gt; 数据存储</td>
<td align="left"><img src="/img/thread-modeling/process-datastore.png" class="lazyload" data-srcset="/img/thread-modeling/process-datastore.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="process-datastore"></td>
<td align="left">一个任务向数据存储发送数据或从数据存储接收数据</td>
</tr>
<tr>
<td align="left">数据流 &lt;-&gt; 信任边界</td>
<td align="left"><img src="/img/thread-modeling/flow-trustboundary-7599331.png" class="lazyload" data-srcset="/img/thread-modeling/flow-trustboundary-7599331.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="flow-trustboundary"></td>
<td align="left">通过 Internet 将数据从受信任的环境传输给某人（反之亦然）</td>
</tr>
</tbody></table>
<h4 id="如何防止信息泄漏"><a href="#如何防止信息泄漏" class="headerlink" title="如何防止信息泄漏"></a>如何防止信息泄漏</h4><p>机密性确保数据受到保护。</p>
<p>示例包括：</p>
<ul>
<li>应用访问控制列表，以确保合适的用户可以访问适当的数据</li>
<li>加密静态数据、传输中数据和正在使用的数据</li>
<li>强制实施 SSL/TLS 以保护传输</li>
<li>使用 IPSec 隧道保护跨终结点的通信</li>
</ul>
<h4 id="用于降低或消除风险的常用安全控制-3"><a href="#用于降低或消除风险的常用安全控制-3" class="headerlink" title="用于降低或消除风险的常用安全控制"></a>用于降低或消除风险的常用安全控制</h4><ul>
<li>加密</li>
<li>访问控制列表 (ACL)</li>
</ul>
<div class="note green"><p>推荐问题：是否可以确保没有人能查看我的传输中的数据和静态数据？</p></div>



<h4 id="知识检查-16"><a href="#知识检查-16" class="headerlink" title="知识检查"></a>知识检查</h4><ol>
<li>哪一条陈述描述了针对信息泄漏的安全控制？</li>
</ol>
<div class='checkbox'><input type="radio" />
            <p>A. 发送方对消息进行数字签名，以便接收方了解消息的来源。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>B. 系统为访问控制列表中列出的用户授予管理访问权限。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>C. 系统记录所有操作和用户，明确每个人的责任。</p>
            </div>

<p>参考答案：<psw>== A ==</psw></p>
<p>解释：<psw>A. 此消息适用于欺骗。B. 这条陈述适用于篡改、信息泄露、拒绝服务和权限提升。C. 这条陈述适用于否认性。</psw></p>
<h3 id="拒绝服务-系统繁忙"><a href="#拒绝服务-系统繁忙" class="headerlink" title="拒绝服务 - 系统繁忙"></a>拒绝服务 - 系统繁忙</h3><p>当攻击者导致系统不可用时，将发生拒绝服务。</p>
<p>示例包括：</p>
<ul>
<li>向网络发送大量请求</li>
<li>占用内存和 CPU 进程</li>
<li>请求数量过多导致数据存储崩溃</li>
</ul>
<h4 id="可能面临拒绝服务风险的元素和交互"><a href="#可能面临拒绝服务风险的元素和交互" class="headerlink" title="可能面临拒绝服务风险的元素和交互"></a>可能面临拒绝服务风险的元素和交互</h4><p>元素</p>
<table>
<thead>
<tr>
<th align="left">名称</th>
<th align="left">形状</th>
<th align="left">定义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">过程</td>
<td align="left"><img src="/img/thread-modeling/process50.png" class="lazyload" data-srcset="/img/thread-modeling/process50.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="process50"></td>
<td align="left">修改输入或将输入重定向到输出的活动</td>
</tr>
<tr>
<td align="left">数据存储</td>
<td align="left"><img src="/img/thread-modeling/data-store50.png" class="lazyload" data-srcset="/img/thread-modeling/data-store50.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="data-store50"></td>
<td align="left">永久或临时的数据存储</td>
</tr>
<tr>
<td align="left">数据流</td>
<td align="left"><img src="/img/thread-modeling/data-flow50.png" class="lazyload" data-srcset="/img/thread-modeling/data-flow50.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="data-flow50"></td>
<td align="left">元素之间的数据移动</td>
</tr>
</tbody></table>
<p>交互</p>
<table>
<thead>
<tr>
<th align="left">名称</th>
<th align="left">交互</th>
<th align="left">定义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">过程 &lt;-&gt; 过程</td>
<td align="left"><img src="/img/thread-modeling/process-process.png" class="lazyload" data-srcset="/img/thread-modeling/process-process.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="process-process"></td>
<td align="left">一个任务将数据发送到另一个任务</td>
</tr>
<tr>
<td align="left">过程 &lt;-&gt; 外部实体</td>
<td align="left"><img src="file:///Users/tari/Sites/TARI0510.github.io/source/img/thread-modeling/process-externalentity.png?lastModify=1617599435" class="lazyload" data-srcset="file:///Users/tari/Sites/TARI0510.github.io/source/img/thread-modeling/process-externalentity.png?lastModify=1617599435" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="process-externalentity"></td>
<td align="left">一个任务向用户发送数据或从用户接收数据</td>
</tr>
<tr>
<td align="left">过程 &lt;-&gt; 数据存储</td>
<td align="left"><img src="/img/thread-modeling/process-datastore.png" class="lazyload" data-srcset="/img/thread-modeling/process-datastore.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="process-datastore"></td>
<td align="left">一个任务向数据存储发送数据或从数据存储接收数据</td>
</tr>
<tr>
<td align="left">数据流 &lt;-&gt; 信任边界</td>
<td align="left"><img src="/img/thread-modeling/flow-trustboundary-7599331.png" class="lazyload" data-srcset="/img/thread-modeling/flow-trustboundary-7599331.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="flow-trustboundary"></td>
<td align="left">通过 Internet 将数据从受信任的环境传输给某人（反之亦然）</td>
</tr>
</tbody></table>
<h4 id="如何防止拒绝服务"><a href="#如何防止拒绝服务" class="headerlink" title="如何防止拒绝服务"></a>如何防止拒绝服务</h4><p>可用性确保系统为用户启动且正常运行。 示例包括：</p>
<ul>
<li>使用网络访问控制列表控制传入和传出的流量</li>
<li>使用弹性资源管理不断增加或减少的使用量</li>
<li>监视系统以检测是否出现异常</li>
<li>启用操作系统标志来处理内存和 CPU 进程</li>
</ul>
<h4 id="用于降低或消除风险的常用安全控制-4"><a href="#用于降低或消除风险的常用安全控制-4" class="headerlink" title="用于降低或消除风险的常用安全控制"></a>用于降低或消除风险的常用安全控制</h4><ul>
<li>访问控制列表 (ACL)</li>
<li>筛选</li>
<li>配额</li>
<li>授权</li>
<li>高可用性</li>
</ul>
<div class="note green"><p>推荐问题：我的服务在某些地区是否会被限制资源？</p></div>



<h4 id="知识检查-17"><a href="#知识检查-17" class="headerlink" title="知识检查"></a>知识检查</h4><ol>
<li>哪一条陈述描述了针对拒绝服务的安全控制？</li>
</ol>
<div class='checkbox'><input type="radio" />
            <p>A. 发送方对消息进行数字签名，以便接收方了解消息的来源。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>B. 系统记录所有操作和用户，明确每个人的责任。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>C. 系统依靠弹性资源来处理接收到的更多请求。</p>
            </div>

<p>参考答案：<psw>== C ==</psw></p>
<p>解释：<psw>A. 此消息适用于欺骗。B. 这条陈述适用于否认性C. 这条陈述适用于拒绝服务。</psw></p>
<h3 id="权限提升-拥有本不应该有用的权限"><a href="#权限提升-拥有本不应该有用的权限" class="headerlink" title="权限提升 - 拥有本不应该有用的权限"></a>权限提升 - 拥有本不应该有用的权限</h3><p>个人未经许可访问资源时，就会发生权限提升。 示例包括：</p>
<ul>
<li>利用输入处理逻辑或内存中的弱点来提取数据</li>
<li>查找并使用特权帐户破坏服务（与欺骗和篡改威胁结合使用）</li>
</ul>
<h4 id="可能面临权限提升-风险的元素和交互"><a href="#可能面临权限提升-风险的元素和交互" class="headerlink" title="可能面临权限提升 风险的元素和交互"></a>可能面临权限提升 风险的元素和交互</h4><p>元素</p>
<table>
<thead>
<tr>
<th align="left">名称</th>
<th align="left">形状</th>
<th align="left">定义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">过程</td>
<td align="left"><img src="/img/thread-modeling/process50.png" class="lazyload" data-srcset="/img/thread-modeling/process50.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="process50"></td>
<td align="left">修改输入或将输入重定向到输出的活动</td>
</tr>
</tbody></table>
<p>交互</p>
<table>
<thead>
<tr>
<th align="left">名称</th>
<th align="left">交互</th>
<th align="left">定义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">过程 &lt;-&gt; 过程</td>
<td align="left"><img src="/img/thread-modeling/process-process.png" class="lazyload" data-srcset="/img/thread-modeling/process-process.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="process-process"></td>
<td align="left">一个任务将数据发送到另一个任务</td>
</tr>
<tr>
<td align="left">过程 &lt;-&gt; 外部实体</td>
<td align="left"><img src="/img/thread-modeling/process-externalentity.png" class="lazyload" data-srcset="/img/thread-modeling/process-externalentity.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="process-externalentity"></td>
<td align="left">任务接收来自用户的数据</td>
</tr>
<tr>
<td align="left">过程 &lt;-&gt; 数据存储</td>
<td align="left"><img src="/img/thread-modeling/process-datastore.png" class="lazyload" data-srcset="/img/thread-modeling/process-datastore.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="process-datastore"></td>
<td align="left">任务接收来自数据存储的数据</td>
</tr>
</tbody></table>
<h4 id="如何防止权限提升"><a href="#如何防止权限提升" class="headerlink" title="如何防止权限提升"></a>如何防止权限提升</h4><p>授权确保用户拥有适当的权限。 示例包括：</p>
<ul>
<li>实现授权机制以验证对数据和资源的权限</li>
<li>应用安全控制，以使用最少的访问权限运行服务</li>
<li>监视访问以检测异常和未经授权的访问尝试。</li>
</ul>
<h4 id="用于降低或消除风险的常用安全控制-5"><a href="#用于降低或消除风险的常用安全控制-5" class="headerlink" title="用于降低或消除风险的常用安全控制"></a>用于降低或消除风险的常用安全控制</h4><ul>
<li>访问控制列表 (ACL)</li>
<li>基于角色的访问控制 (RBAC)</li>
<li>基于组的访问</li>
<li>权限</li>
<li>输入验证</li>
</ul>
<div class="note green"><p>推荐问题：如何得知用户可以执行此操作？</p></div>



<h4 id="知识检查-18"><a href="#知识检查-18" class="headerlink" title="知识检查"></a>知识检查</h4><ol>
<li>哪一条陈述描述了针对权限提升的安全控制？</li>
</ol>
<div class='checkbox'><input type="radio" />
            <p>A. 系统使用尽可能少的权限运行进程。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>B. 发送方对消息进行数字签名，以便接收方了解消息的来源。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>C. 系统记录所有操作和用户，明确每个人的责任。</p>
            </div>

<p>参考答案：<psw>== A ==</psw></p>
<p>解释：<psw>A. 这条陈述适用于权限提升。B. 此消息适用于欺骗。C. 这条陈述适用于否认性。</psw></p>
<h3 id="小结-4"><a href="#小结-4" class="headerlink" title="小结"></a>小结</h3><h4 id="摘要-2"><a href="#摘要-2" class="headerlink" title="摘要"></a>摘要</h4><p>威胁建模框架可帮助你生成潜在威胁的列表，并找到降低或消除系统风险的方法。 了解每种威胁类别及其相应的安全控制。</p>
<p>本模块涵盖了以下内容：</p>
<ul>
<li>讨论了威胁建模框架中的每种威胁类别</li>
<li>了解了有助于降低或消除风险的安全控制</li>
</ul>
<div class="note green"><p>你知道吗？ 可以使用许多其他框架来实现不同的目标。 例如，渗透测试团队可将 LINDDUN 用于隐私威胁和攻击树。 攻击树有助于通过“假定违规”思维来确定攻击可能发生的方式。</p></div>



<h4 id="了解详细信息-1"><a href="#了解详细信息-1" class="headerlink" title="了解详细信息"></a>了解详细信息</h4><ul>
<li><a target="_blank" rel="noopener" href="https://www.linddun.org/">LINDDUN</a> - 一种隐私威胁建模方法，支持分析人员系统地查找和解决软件体系结构中的隐私威胁。</li>
<li><a target="_blank" rel="noopener" href="https://www.microsoft.com/security/blog/2016/11/28/disrupting-the-kill-chain/">网络终止链</a> - 介绍典型的工作流，包括攻击者用于渗入组织网络和系统的技术、策略和过程。</li>
<li>补上一个微软安全博客 （ <a target="_blank" rel="noopener" href="https://www.microsoft.com/security/blog/">https://www.microsoft.com/security/blog/</a></li>
</ul>
<h2 id="模块6-设置问题的优先级并应用安全控制措施"><a href="#模块6-设置问题的优先级并应用安全控制措施" class="headerlink" title="模块6 | 设置问题的优先级并应用安全控制措施"></a>模块6 | 设置问题的优先级并应用安全控制措施</h2><h3 id="介绍-2"><a href="#介绍-2" class="headerlink" title="介绍"></a>介绍</h3><p>威胁建模框架可以帮助你生成威胁列表和降低风险的方法，但不会为你确定其优先级。</p>
<p>此外，它不会基于安全控制措施的类型和功能提供分层建议，因此更难确定要实现哪些控制措施。</p>
<h4 id="确实问题的优先级"><a href="#确实问题的优先级" class="headerlink" title="确实问题的优先级"></a>确实问题的优先级</h4><p>确定问题的优先级是威胁建模中一个重要的部分。 在资源有限的情况下，它可以帮助将资源分配给最关键的问题。</p>
<p>示例包括：</p>
<ul>
<li>必须选择是要实现记录所有管理操作的功能，还是使用 SSL/TLS 对流量进行加密</li>
<li>确定是先实现访问控制列表，还是先增强系统的输入验证过程</li>
</ul>
<h4 id="何时设置优先级"><a href="#何时设置优先级" class="headerlink" title="何时设置优先级"></a>何时设置优先级</h4><p>根据每个问题的风险因素对其指定优先级。 此外，选择可与其他措施联用的安全控制措施，可帮助为你的系统提供分层安全保护机制。</p>
<p>此过程可能需要一段时间才能完成。 还需要同事和安全团队的帮助。 请留出足够的时间来与其协作。</p>
<h4 id="学习目标-5"><a href="#学习目标-5" class="headerlink" title="学习目标"></a>学习目标</h4><p>在本模块中，你将能够：</p>
<ul>
<li>对问题分配优先级</li>
<li>对安全控制进行分类</li>
<li>了解每个安全控制措施类型和功能</li>
</ul>
<div class="note success"><p>无必备知识即可学习 （</p></div>



<h3 id="问题优先级、安全控制措施类型和功能"><a href="#问题优先级、安全控制措施类型和功能" class="headerlink" title="问题优先级、安全控制措施类型和功能"></a>问题优先级、安全控制措施类型和功能</h3><p>威胁建模练习可帮助你发现一些问题，有时还会有意想不到的收获。 缺少优先级可能会让工程师感到不知所措，无法确定要首先解决哪些问题。</p>
<h4 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h4><p>首先，确定问题对于系统的重要程度。 然后，<u>选择有利于以最低的成本提供最大程度保护的安全控制措施</u>。</p>
<h4 id="确定安全问题的优先级"><a href="#确定安全问题的优先级" class="headerlink" title="确定安全问题的优先级"></a>确定安全问题的优先级</h4><p>根据风险严重性来确定安全问题的优先级。 各组织的标签可能不同。 但通常会根据威胁被攻击者利用时带来的风险影响，以从严重到低风险的模式设置优先级标签。</p>
<h4 id="类型和功能"><a href="#类型和功能" class="headerlink" title="类型和功能"></a>类型和功能</h4><p>安全控制具有不同的类型和功能。</p>
<p>有三个主要的类别可帮助你关注安全性的三种形式。</p>
<p>示例包括：</p>
<ul>
<li>物理：摄像头、徽章和围栏</li>
<li>技术：加密、虚拟防火墙和防病毒软件</li>
<li>管理：策略、法规和书面要求</li>
</ul>
<p>功能的意义在于针对潜在威胁每个阶段帮助保护系统。</p>
<p>示例包括：</p>
<ul>
<li>用锁防止入侵</li>
<li>安装摄像头来检测入侵</li>
<li>制定入侵响应计划</li>
<li>修复由入侵导致的破坏</li>
<li>使用标志和其他安全控制措施防患于未然</li>
</ul>
<p>在接下来的几个单元中，我们将了解优先级、类型和功能。</p>
<h3 id="设置安全问题的优先级"><a href="#设置安全问题的优先级" class="headerlink" title="设置安全问题的优先级"></a>设置安全问题的优先级</h3><p>生成包含降低或消除风险的方法的威胁列表。 然后，与同事合作分配优先级。</p>
<h4 id="选择优先级框架"><a href="#选择优先级框架" class="headerlink" title="选择优先级框架"></a>选择优先级框架</h4><p>优先级练习应遵循组织创建的内部安全 bug 栏。</p>
<p>Microsoft 工程师使用的内部 bug 栏类似于下表，供你参考：</p>
<p>Microsoft 工程师使用的内部 bug 栏类似于下表，供你参考：</p>
<table>
<thead>
<tr>
<th align="left">图标</th>
<th align="left">严重性</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><img src="/img/thread-modeling/critical.png" class="lazyload" data-srcset="/img/thread-modeling/critical.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="critical"></td>
<td align="left">严重</td>
<td align="left">可能会对系统用户造成严重影响。 示例包括涉及敏感信息泄漏的行为和需要隐私和法律参与的威胁</td>
</tr>
<tr>
<td align="left"><img src="/img/thread-modeling/important.png" class="lazyload" data-srcset="/img/thread-modeling/important.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="important"></td>
<td align="left">重要说明</td>
<td align="left">可能会对系统用户造成严重影响。 示例包括在没有已知的解决方法时显示系统不可用</td>
</tr>
<tr>
<td align="left"><img src="/img/thread-modeling/moderate.png" class="lazyload" data-srcset="/img/thread-modeling/moderate.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="moderate"></td>
<td align="left">适中</td>
<td align="left">可能对系统用户造成中等程度的影响。 示例包括存在可能的解决方法的可用性问题</td>
</tr>
<tr>
<td align="left"><img src="/img/thread-modeling/low.png" class="lazyload" data-srcset="/img/thread-modeling/low.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="low"></td>
<td align="left">低</td>
<td align="left">可能会对系统用户造成轻微影响</td>
</tr>
<tr>
<td align="left"><img src="/img/thread-modeling/information.png" class="lazyload" data-srcset="/img/thread-modeling/information.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="information"></td>
<td align="left">信息</td>
<td align="left">已考虑、评估潜在威胁并认为它无关紧要</td>
</tr>
</tbody></table>
<h4 id="知识检查-19"><a href="#知识检查-19" class="headerlink" title="知识检查"></a>知识检查</h4><ol>
<li>可能会对用户造成严重影响的问题通常属于哪个优先级？</li>
</ol>
<div class='checkbox'><input type="radio" />
            <p>A. 重要说明。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>B. 严重。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>C. 适中。</p>
            </div>

<p>参考答案：<psw>== A ==</psw></p>
<p>解释：<psw>A. 可能会对系统用户造成严重影响。 示例包括在没有已知的解决方法时显示系统不可用。B. 可能会对系统用户造成严重影响。 示例包括涉及敏感信息泄漏的行为和需要隐私和法律参与的威胁。C. 可能对系统用户造成中等程度的影响。 示例包括存在可能的解决方法的可用性问题。 （Emmm 感觉 B 也行？</psw></p>
<h3 id="安全控制措施类型和功能-1"><a href="#安全控制措施类型和功能-1" class="headerlink" title="安全控制措施类型和功能"></a>安全控制措施类型和功能</h3><p>确定每个问题的优先级后，请查看安全控制措施列表，并选择对你的系统最有益的选项。</p>
<p>最有益的安全控制措施一般会跨多个 STRIDE 类别。 在大多数情况下，实现这些步骤的成本相对较低。</p>
<h4 id="安全控制措施类型"><a href="#安全控制措施类型" class="headerlink" title="安全控制措施类型"></a>安全控制措施类型</h4><p>评估每项安全控制措施时，你会注意到它们属于以下类型之一：</p>
<table>
<thead>
<tr>
<th align="left">图标</th>
<th align="left">类型</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><img src="/img/thread-modeling/physical.png" class="lazyload" data-srcset="/img/thread-modeling/physical.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="physical"></td>
<td align="left">物理</td>
<td align="left">此类控制措施从物理上阻止或检测未经授权的访问。 示例包括入口、徽章、摄像头、照明和抑制系统。</td>
</tr>
<tr>
<td align="left"><img src="/img/thread-modeling/technical.png" class="lazyload" data-srcset="/img/thread-modeling/technical.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="technical"></td>
<td align="left">技术</td>
<td align="left">此类控制措施从逻辑上保护系统。 示例包括防火墙、防病毒软件、访问控制列表和加密。</td>
</tr>
<tr>
<td align="left"><img src="/img/thread-modeling/administrative.png" class="lazyload" data-srcset="/img/thread-modeling/administrative.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="administrative"></td>
<td align="left">管理</td>
<td align="left">此类控制措施指为系统定义流程的策略。 示例包括数据分类、审核和限制。</td>
</tr>
</tbody></table>
<div class="note info"><p>根据系统，你需要应用各种类型的安全控制措施，帮助建立多层保护以提升系统的安全性。</p></div>



<h4 id="安全控制功能"><a href="#安全控制功能" class="headerlink" title="安全控制功能"></a>安全控制功能</h4><p>除了这三种主要类型外，安全控制还具有五个不同的功能，可帮助你应用多个安全层。</p>
<table>
<thead>
<tr>
<th align="left">函数</th>
<th align="left">说明</th>
<th align="left">示例</th>
</tr>
</thead>
<tbody><tr>
<td align="left">预防</td>
<td align="left">此策略是否有助于降低此威胁的概率或影响？</td>
<td align="left">锁定、防火墙、数据分类。</td>
</tr>
<tr>
<td align="left">检测</td>
<td align="left">此策略是否有助于识别所发生的系统攻击？</td>
<td align="left">监视、诱捕系统、审核日志。</td>
</tr>
<tr>
<td align="left">纠正</td>
<td align="left">此策略是否有助于控制如何响应传入攻击？</td>
<td align="left">物理修复、系统修补程序、事件响应计划。</td>
</tr>
<tr>
<td align="left">恢复</td>
<td align="left">此风险缓解措施是否有助于服务从攻击中恢复？</td>
<td align="left">热站点、系统备份、灾难恢复计划。</td>
</tr>
<tr>
<td align="left">阻碍</td>
<td align="left">此风险缓解措施是否有助于阻止攻击者访问系统？</td>
<td align="left">时限、最低权限、授权使用策略。</td>
</tr>
</tbody></table>
<div class="note green"><p>根据问题的优先级，可以考虑在系统被破坏之前、破坏过程中和破坏之后使用多项安全控制功能来保护它。</p></div>



<h4 id="如何综合利用所有信息"><a href="#如何综合利用所有信息" class="headerlink" title="如何综合利用所有信息"></a>如何综合利用所有信息</h4><p>它们与安全控制措施类型共同形成一个矩阵，可帮助你做出正确的选择。 以下是一些示例：</p>
<table>
<thead>
<tr>
<th align="left">功能</th>
<th align="left">物理</th>
<th align="left">逻辑</th>
<th align="left">管理</th>
</tr>
</thead>
<tbody><tr>
<td align="left">预防</td>
<td align="left">锁定</td>
<td align="left">防火墙</td>
<td align="left">数据分类</td>
</tr>
<tr>
<td align="left">检测</td>
<td align="left">监视</td>
<td align="left">诱捕系统</td>
<td align="left">审核日志</td>
</tr>
<tr>
<td align="left">纠正</td>
<td align="left">物理修复</td>
<td align="left">系统修补程序</td>
<td align="left">事件响应计划</td>
</tr>
<tr>
<td align="left">恢复</td>
<td align="left">热站点</td>
<td align="left">系统备份</td>
<td align="left">灾难恢复计划</td>
</tr>
<tr>
<td align="left">阻碍</td>
<td align="left">时限</td>
<td align="left">最低权限</td>
<td align="left">授权使用策略</td>
</tr>
</tbody></table>
<h4 id="知识检查-20"><a href="#知识检查-20" class="headerlink" title="知识检查"></a>知识检查</h4><ol>
<li>管理安全控制措施有什么示例？</li>
</ol>
<div class='checkbox'><input type="radio" />
            <p>A. 创建事件响应计划。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>B. 安装新防火墙。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>C. 在入口添加徽章扫描仪。</p>
            </div>

<ol start="2">
<li>管理安全控制措施有什么示例？</li>
</ol>
<div class='checkbox'><input type="radio" />
            <p>A. 创建事件响应计划。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>B. 安装新防火墙。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>C. 在入口添加徽章扫描仪。</p>
            </div>

<p>参考答案：</p>
<ol>
<li><psw>== A ==</psw></li>
<li><psw>== C ==</psw></li>
</ol>
<p>解释：</p>
<ol>
<li><psw>A. 此条目适用于管理型安全控制措施。B. 此条目适用于逻辑型（可能还有物理型）安全控制措施。C. 此条目适用于物理型安全控制措施。</psw></li>
<li><psw>A. 此条目适用于预防性安全控制功能。B. 此条目适用于检测性安全控制功能。C. 此条目适用于矫正性安全控制功能。</psw></li>
</ol>
<h3 id="小结-5"><a href="#小结-5" class="headerlink" title="小结"></a>小结</h3><p>威胁建模框架会为你提供威胁列表，并提供降低或消除风险的方法。 但是，它不会为你确定威胁的优先级。 此外，没有基于其类型和功能的分层安全控制建议。</p>
<p>你了解了如何确定问题的优先级，以及如何根据类型和功能应用恰当的安全控制层。</p>
<p>在本模块中，你已经学习了以下内容：</p>
<ul>
<li>了解了如何确定问题的优先级</li>
<li>分类安全控制</li>
<li>了解每个型安全控制措施和功能</li>
</ul>
<h2 id="模块7-使用推荐工具创建数据流图"><a href="#模块7-使用推荐工具创建数据流图" class="headerlink" title="模块7 | 使用推荐工具创建数据流图"></a>模块7 | 使用推荐工具创建数据流图</h2><h3 id="简介-2"><a href="#简介-2" class="headerlink" title="简介"></a>简介</h3><p>数据流关系图是系统工作方式的图形化表示形式。 这包括所有数据存储、进程、外部实体、信任边界和数据流。</p>
<h4 id="如何创建数据流关系图"><a href="#如何创建数据流关系图" class="headerlink" title="如何创建数据流关系图"></a>如何创建数据流关系图</h4><p>你可以使用任何画布（物理的或虚拟的）来创建数据流关系图。 但是，确实需要了解威胁建模的原理，才能正确地对其进行分析。</p>
<p>某些应用程序提供的多种工具，它们可以通过威胁生成引擎和风险降低策略，帮助你创建数据流关系图。 其他工具仅提供创建数据流关系图的功能。</p>
<h4 id="目标-4"><a href="#目标-4" class="headerlink" title="目标"></a>目标</h4><p>该学习路径的目标是让你了解威胁建模的基础知识，以便在任何地方、任何画布上进行威胁建模。</p>
<p>为了帮助你实现这个目标，我们会在介绍过程中推荐一些工具。</p>
<h4 id="学习目标-6"><a href="#学习目标-6" class="headerlink" title="学习目标"></a>学习目标</h4><p>在本模块中，你将学习以下内容：</p>
<ul>
<li>详细了解了 Threat Modeling Tool</li>
<li>详细了解 Visio</li>
</ul>
<div class="note success"><p>无必备知识即可学习 （</p></div>



<h3 id="建议的工具"><a href="#建议的工具" class="headerlink" title="建议的工具"></a>建议的工具</h3><p>威胁建模将对你的数据流关系图应用一个框架，以帮助找到降低或消除风险的威胁和方法。</p>
<p>某些工具可帮助你创建数据流关系图，另一些还可以帮助你进行威胁生成练习。 根据你在威胁建模方面的专业水平，其中一些工具可能会很有帮助。</p>
<h4 id="详细了解-Threat-Modeling-Tool"><a href="#详细了解-Threat-Modeling-Tool" class="headerlink" title="详细了解 Threat Modeling Tool"></a>详细了解 Threat Modeling Tool</h4><p>在接下来的几个单元中，你将了解有关一些工具的详细信息：</p>
<ul>
<li>Threat Modeling Tool 提供多种工具，可用于创建数据流关系图并对其进行分析，以查找潜在威胁和风险降低策略<ul>
<li>在线安装版，<a target="_blank" rel="noopener" href="https://www.microsoft.com/en-us/securityengineering/sdl/threatmodeling">https://www.microsoft.com/en-us/securityengineering/sdl/threatmodeling</a></li>
<li>离线安装版，<a target="_blank" rel="noopener" href="https://www.microsoft.com/en-us/download/details.aspx?id=49168">https://www.microsoft.com/en-us/download/details.aspx?id=49168</a> （2016）</li>
<li>想装其他离线版本的，Guguru 一下 <u>microsoft threat modeling tool offline installer</u> 就好了</li>
</ul>
</li>
<li>Visio 提供了一个干净的画布，帮助你创建数据流关系图<ul>
<li>Visio，（要钱的 打扰了</li>
</ul>
</li>
</ul>
<p>我们将在接下来的几个单元中进行介绍。</p>
<h3 id="Threat-Modeling-Tool"><a href="#Threat-Modeling-Tool" class="headerlink" title="Threat Modeling Tool"></a>Threat Modeling Tool</h3><p>Microsoft Threat Modeling Tool 由 Microsoft 发布，并获得威胁建模社区进行认可，可以帮助工程师创建数据流关系图并将 STRIDE 应用于其威胁建模工作。</p>
<p>Threat Modeling Tool 提供：</p>
<ul>
<li>可自定义的模板</li>
<li>威胁生成引擎，其中包含威胁和风险降低策略</li>
</ul>
<p>默认模板称为“SDL TM 知识库”，提供一组基本元素和威胁生成功能。 只要对数据流关系图和 STRIDE 有基本的了解即可使用。</p>
<h4 id="STRIDE-回顾"><a href="#STRIDE-回顾" class="headerlink" title="STRIDE 回顾"></a>STRIDE 回顾</h4><p>STRIDE 是六个主要威胁类别的首字母缩写：</p>
<ul>
<li>欺骗 - 冒充某人或某物</li>
<li>篡改 - 未经授权更改数据</li>
<li>否认性 - 不宣称对执行的操作负责</li>
<li>信息泄露 - 在未获得权限的情况下查看数据</li>
<li>拒绝服务 - 使系统过载</li>
<li>权限提升 - 拥有本不应拥有的权限</li>
</ul>
<h4 id="高级用户部分"><a href="#高级用户部分" class="headerlink" title="高级用户部分"></a>高级用户部分</h4><p>对于更高级的用户，可以在三个主要部分对模板进行自定义。</p>
<h5 id="模具"><a href="#模具" class="headerlink" title="模具"></a>模具</h5><p>进程、外部实体、数据存储、数据流和信任边界构成了父元素。</p>
<p><img src="/img/thread-modeling/parentstencils.jpeg" class="lazyload" data-srcset="/img/thread-modeling/parentstencils.jpeg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="parentstencils"></p>
<p>你还可以创建子元素，以帮助为其他上下文、可操作的威胁生成和风险降低策略提供粒度。</p>
<p><img src="/img/thread-modeling/expandedflowstencils.jpeg" class="lazyload" data-srcset="/img/thread-modeling/expandedflowstencils.jpeg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="expandedflowstencils"></p>
<h6 id="子元素的工作原理示例"><a href="#子元素的工作原理示例" class="headerlink" title="子元素的工作原理示例"></a>子元素的工作原理示例</h6><p>父元素提供了选择 HTTP 和 HTTPS 子元素的选项。</p>
<p>HTTP 应生成更多的威胁，因为篡改、信息泄露和欺骗威胁常见于未加密通道。</p>
<p><strong>使用 HTTP</strong></p>
<p><img src="/img/thread-modeling/http.jpeg" class="lazyload" data-srcset="/img/thread-modeling/http.jpeg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="http"></p>
<p><strong>使用 HTTPS</strong></p>
<p><img src="/img/thread-modeling/https.jpeg" class="lazyload" data-srcset="/img/thread-modeling/https.jpeg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="https"></p>
<h6 id="如何添加元素属性"><a href="#如何添加元素属性" class="headerlink" title="如何添加元素属性"></a>如何添加元素属性</h6><p>如果有必须包括在默认模板中的其他属性，可以在管理员视图中将其添加到每个元素。</p>
<p><img src="/img/thread-modeling/stencilpropertiesadmin.jpeg" class="lazyload" data-srcset="/img/thread-modeling/stencilpropertiesadmin.jpeg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="stencilpropertiesadmin"></p>
<p>当用户将该元素拖放到画布上时，将看到自己的更改。</p>
<p><img src="/img/thread-modeling/stencilproperties.jpeg" class="lazyload" data-srcset="/img/thread-modeling/stencilproperties.jpeg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="stencilproperties"></p>
<h5 id="威胁属性"><a href="#威胁属性" class="headerlink" title="威胁属性"></a>威胁属性</h5><p>使用属性可以创建为每个生成的威胁填充的字段，就像使用模具属性可以为每个元素创建字段一样。</p>
<p><u><strong>请记住：目标是以最简单的方式获得尽可能多的上下文。</strong></u></p>
<h6 id="威胁属性的示例"><a href="#威胁属性的示例" class="headerlink" title="威胁属性的示例"></a>威胁属性的示例</h6><p><strong>管理员视图</strong></p>
<p>添加可为你提供更多上下文和可操作步骤的字段。 示例包括：</p>
<ul>
<li>问题优先级 - 了解需要首先处理哪些问题</li>
<li>超链接 - 将问题链接到联机文档</li>
<li>外部风险映射 - 通过使用可靠的第三方源（如 OWASP Top 10 和 CWE 详细信息），使用与其他组织相同的语言来描述风险</li>
</ul>
<p><img src="/img/thread-modeling/threatadminview.jpeg" class="lazyload" data-srcset="/img/thread-modeling/threatadminview.jpeg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="threatadminview"></p>
<p>啊这，超链接和外部风险在哪 （</p>
<p><strong>用户视图</strong></p>
<p>Threat Modeling Tool 用户将在分析其数据流关系图时看到这些更改。</p>
<p><img src="/img/thread-modeling/threatuserview.jpeg" class="lazyload" data-srcset="/img/thread-modeling/threatuserview.jpeg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="threatuserview"></p>
<h4 id="威胁和风险降低策略"><a href="#威胁和风险降低策略" class="headerlink" title="威胁和风险降低策略"></a>威胁和风险降低策略</h4><p>这一部分是 Threat Modeling Tool 的核心。 威胁生成引擎考察独立元素和已连接的元素，以确定生成哪个威胁。</p>
<h5 id="威胁生成的原理"><a href="#威胁生成的原理" class="headerlink" title="威胁生成的原理"></a>威胁生成的原理</h5><h6 id="步骤-1-指定源和目标"><a href="#步骤-1-指定源和目标" class="headerlink" title="步骤 1 - 指定源和目标"></a>步骤 1 - 指定源和目标</h6><p>威胁生成引擎使用简单的句子来生成威胁。 示例包括：</p>
<ul>
<li>目标为[元素名称]</li>
<li>源为[元素名称]</li>
</ul>
<p>你还可以在标题和说明中使用元素名称。 格式为：“{target.Name}”或“{source.Name}”</p>
<h6 id="步骤-2-合并源和目标"><a href="#步骤-2-合并源和目标" class="headerlink" title="步骤 2 - 合并源和目标"></a>步骤 2 - 合并源和目标</h6><p>你可以精确规定如何生成威胁。 用 AND OR 运算符组合目标、源及其各个属性。 示例包括：</p>
<ul>
<li>target.[property name] is ‘Yes’ <strong>AND</strong> source.[property name] is ‘No’</li>
<li>流交叉[信任边界名称]</li>
</ul>
<h6 id="步骤-3-生成或忽略威胁"><a href="#步骤-3-生成或忽略威胁" class="headerlink" title="步骤 3 - 生成或忽略威胁"></a>步骤 3 - 生成或忽略威胁</h6><p>威胁生成引擎使用两个字段来生成或忽略威胁：</p>
<ul>
<li><strong>Include</strong> - 如果在此字段中添加的句子为 true，则会生成威胁</li>
<li><strong>Exclude</strong> - 如果在此字段中添加的句子为 true，则不会生成威胁</li>
</ul>
<p>下面是默认模板的实际示例，以便将这些步骤结合在一起：</p>
<ul>
<li><strong>威胁：</strong> 跨站点脚本</li>
<li><strong>Include:</strong> (target is [Web Server]) <strong>OR</strong> (target is [Web Application])</li>
<li><strong>Exclude:</strong> (target.[Sanitizes Output] is ‘Yes’) <strong>AND</strong> (target.[Sanitizes Input] is ‘Yes’)</li>
</ul>
<p>仅在以下情况时才会生成上述跨站点脚本威胁：</p>
<ul>
<li>进程是 Web 服务器或 Web 应用程序</li>
<li>未净化输入和输出</li>
</ul>
<p><img src="/img/thread-modeling/includeexclude.jpeg" class="lazyload" data-srcset="/img/thread-modeling/includeexclude.jpeg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="includeexclude"></p>
<div class="note info"><p>Microsoft Threat Modeling Tool 模板创建 主题很复杂，本学习路径中不会进行充分讨论。</p></div>



<h4 id="知识检查-21"><a href="#知识检查-21" class="headerlink" title="知识检查"></a>知识检查</h4><ol>
<li>Threat Modeling Tool 不提供哪些优势？</li>
</ol>
<div class='checkbox'><input type="radio" />
            <p>A. 生成的威胁基于整个关系图，而不仅是每个元素或每次交互。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>B. 可以更改威胁、模具和模具属性。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>C. 生成每个威胁时，都会包含降低或消除风险的方法。</p>
            </div>

<p>参考答案：<psw>== A ==</psw></p>
<p>解释：<psw>A. 该工具仅考察各个元素和各次交互。B. 可以更改字段。C. 某些模板只包含威胁，但较新版本确实包含风险降低策略。</psw></p>
<h3 id="Visio"><a href="#Visio" class="headerlink" title="Visio"></a>Visio</h3><p>Visio 归为 Microsoft 所有，其功能强大，可帮助任何人创建优质的流程图和数据流关系图。</p>
<h4 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h4><p>Visio 提供拖放功能和关系图批注功能。 在为系统创建关系图时，这两种功能都很有用。</p>
<h4 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h4><p>该应用程序不提供自动威胁建模功能。 因此，没有威胁生成引擎来帮助工程师集体讨论威胁和风险降低策略。</p>
<div class="note info"><p>如果使用 Visio，你将负责对每个元素和交互进行手动威胁建模。</p></div>



<h4 id="知识检查-22"><a href="#知识检查-22" class="headerlink" title="知识检查"></a>知识检查</h4><ol>
<li>Visio 不提供哪些优势？</li>
</ol>
<div class='checkbox'><input type="radio" />
            <p>A. 使用默认模具提供拖放功能。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>B. 输出一系列生成的威胁，帮助工程师集体讨论可以如何降低或消除风险。</p>
            </div>

<div class='checkbox'><input type="radio" />
            <p>C. 让工程师可以为数据流图表添加批注以提供服务上下文。</p>
            </div>

<p>参考答案：<psw>== A ==</psw></p>
<p>解释：<psw>A. 它确实提供拖放功能。B. Visio 没有威胁生成引擎。C. 它提供批注功能。</psw></p>
<h3 id="小结-6"><a href="#小结-6" class="headerlink" title="小结"></a>小结</h3><p>你可以使用任何画布（物理的或虚拟的）来创建数据流关系图。 Microsoft 的工程师推荐几个工具来帮助你进行威胁建模。</p>
<p>你了解了可用于创建数据流关系图的不同工具。</p>
<p>在本模块中，你已经学习了以下内容：</p>
<ul>
<li>详细了解了 Threat Modeling Tool</li>
<li>详细了解了 Visio</li>
</ul>
<div class="note info"><p>还有很多其他工具可以帮助你解决威胁建模需求。 其中某些工具需要付费订阅才能使用，另一些则完全开放源代码。 你甚至可以使用白板，其学习难度较低，但以威胁建模专业知识为使用前提，并且难以保存。</p></div>



<h4 id="了解详细信息-2"><a href="#了解详细信息-2" class="headerlink" title="了解详细信息"></a>了解详细信息</h4><div class="tag link"><a class="link-card" title="Threat Modeling Tool" target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/security/develop/threat-modeling-tool"><div class="left"><img src="https://s.getwinpcsoft.com/icons/png/128/5216/5216902.png" class="lazyload" data-srcset="https://s.getwinpcsoft.com/icons/png/128/5216/5216902.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="/></div><div class="right"><p class="text">Threat Modeling Tool</p><p class="url">https://docs.microsoft.com/en-us/azure/security/develop/threat-modeling-tool</p></div></a></div>

<div class="tag link"><a class="link-card" title="Visio" target="_blank" rel="noopener" href="https://www.microsoft.com/en-us/microsoft-365/visio/flowchart-software"><div class="left"><img src="https://img-prod-cms-rt-microsoft-com.akamaized.net/cms/api/am/imageFileData/RE4k7FT?ver=a8bc" class="lazyload" data-srcset="https://img-prod-cms-rt-microsoft-com.akamaized.net/cms/api/am/imageFileData/RE4k7FT?ver=a8bc" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="/></div><div class="right"><p class="text">Visio</p><p class="url">https://www.microsoft.com/en-us/microsoft-365/visio/flowchart-software</p></div></a></div>



<p>完结撒花~ ~</p>

  </div>
  
  
    
    <div class='footer'>
       <!-- 参考资料、相关资料等 -->
      
       <!-- 相关文章 -->
      
      <!-- 版权声明组件 -->
      
        
          <div class='copyright'>
            <blockquote>
              
                
                  <p>博客内容遵循 署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0) 协议</p>

                
              
                
                  <p>本文永久链接是：<a href="https://tari.moe/p/2021/thread-modeling/">https://tari.moe/p/2021/thread-modeling/</a></p>
                
              
            </blockquote>
          </div>
        
      
      <!-- 打赏组件 -->
      
    </div>
  
  
    


  <div class='article-meta' id="bottom">
    <div class='new-meta-box'>
      
        
          
  
  <div class="new-meta-item meta-tags"><a class="tag" href="/tags/SDL/" rel="nofollow"><i class="fas fa-hashtag fa-fw" aria-hidden="true"></i><p>SDL</p></a></div> <div class="new-meta-item meta-tags"><a class="tag" href="/tags/%E5%A8%81%E8%83%81%E5%BB%BA%E6%A8%A1/" rel="nofollow"><i class="fas fa-hashtag fa-fw" aria-hidden="true"></i><p>威胁建模</p></a></div>
  <span hidden itemprop="keywords">SDL 威胁建模</span>


        
      
    </div>
    <!-- Custom Files bottomMeta begin -->
    
    <!-- Custom Files bottomMeta end -->
  </div>


  
  

  
    <div class="prev-next">
      
        <a class='prev' href='/p/2021/ctfshow-unserialize/'>
          <p class='title'><i class="fa-solid fa-chevron-left" aria-hidden="true"></i>ctfshow 反序列化篇</p>
          <p class='content'>

感觉排序不是很友好..因为难度不是相对递增的
建议顺序 web254-258、web260、web262-web266、web259、web261、web275-276
然后 web277-...</p>
        </a>
      
      
        <a class='next' href='/p/2021/2021hfctf/'>
          <p class='title'>2021HFCTF Web Writeup<i class="fa-solid fa-chevron-right" aria-hidden="true"></i></p>
          <p class='content'>internal_system 挺有意思的，复现完学到了刷多 （
签到题考点：PHP供应链攻击
php 近期爆的漏洞，一开始就看到了，

喔？你说这个我可就不困了，（我是个爱看新闻的好孩子 逃
...</p>
        </a>
      
    </div>
  
  <!-- Custom Files postEnd begin-->
  
  <!-- Custom Files postEnd end-->
</article>


  


  <article class="post white-box shadow floatable blur" id="comments">
    <span hidden>
      <meta itemprop="discussionUrl" content="/p/2021/thread-modeling/index.html#comments">
    </span>
    <p ct><i class='fas fa-comments'></i> 评论</p>
    

    <div id="layoutHelper-comments"></div>

  </article>






</div>
<aside id='l_side' itemscope itemtype="http://schema.org/WPSideBar">
  

  
    
    
      
    
  


<div class="widget-sticky pjax">

  
  


  <section class="widget toc-wrapper desktop mobile " id="toc-div" >
    
  <header>
    
      <i class="fas fa-list fa-fw" aria-hidden="true"></i><span class='name'>文档目录</span>
    
  </header>


    <div class='content'>
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A8%81%E8%83%81%E5%BB%BA%E6%A8%A1%E7%AE%80%E4%BB%8B"><span class="toc-text">威胁建模简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%95%E6%97%B6%E4%BD%BF%E7%94%A8%E5%A8%81%E8%83%81%E5%BB%BA%E6%A8%A1"><span class="toc-text">何时使用威胁建模</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%81%E5%8F%AF%E4%BB%A5%E8%BF%9B%E8%A1%8C%E5%A8%81%E8%83%81%E5%BB%BA%E6%A8%A1"><span class="toc-text">谁可以进行威胁建模</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87"><span class="toc-text">学习目标</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%9D%971-%E5%A8%81%E8%83%81%E5%BB%BA%E6%A8%A1%E9%98%B6%E6%AE%B5"><span class="toc-text">模块1 | 威胁建模阶段</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A41-%E8%AE%BE%E8%AE%A1"><span class="toc-text">步骤1 - 设计</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87"><span class="toc-text">目标</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%90%E5%87%BA%E6%9C%89%E5%85%B3%E7%B3%BB%E7%BB%9F%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-text">提出有关系统的问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E6%B5%81%E5%85%B3%E7%B3%BB%E5%9B%BE"><span class="toc-text">创建数据流关系图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%BE%E8%A7%A3%E5%B7%A5%E5%85%B7"><span class="toc-text">图解工具</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E5%9B%BE%E5%85%83%E7%B4%A0"><span class="toc-text">关系图元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%B5%81%E5%9B%BE%E6%A0%87%E4%B8%AD%E5%BA%94%E5%8C%85%E5%90%AB%E7%9A%84%E4%BF%A1%E6%81%AF%E9%87%8F"><span class="toc-text">数据流图标中应包含的信息量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E5%9B%BE%E5%B1%82%E6%AC%A1"><span class="toc-text">关系图层次</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%A5%E5%85%B7"><span class="toc-text">工具</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E6%A3%80%E6%9F%A5"><span class="toc-text">知识检查</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A42-%E4%B8%AD%E6%96%AD"><span class="toc-text">步骤2 - 中断</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-1"><span class="toc-text">目标</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A1%AE%E5%AE%9A%E6%96%B9%E6%B3%95%E4%BE%A7%E9%87%8D%E7%82%B9"><span class="toc-text">确定方法侧重点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%89%E6%8B%A9%E5%A8%81%E8%83%81%E6%A1%86%E6%9E%B6"><span class="toc-text">选择威胁框架</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E6%A3%80%E6%9F%A5-1"><span class="toc-text">知识检查</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A43-%E4%BF%AE%E5%A4%8D"><span class="toc-text">步骤3 - 修复</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-2"><span class="toc-text">目标</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%A8%81%E8%83%81%E8%B7%9F%E5%A2%9E%E5%B7%A5%E4%BD%9C%E6%B5%81"><span class="toc-text">设置威胁跟增工作流</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%A1%AE%E5%AE%9A%E5%A8%81%E8%83%81%E7%9A%84%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-text">确定威胁的优先级</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E4%BB%BB%E5%8A%A1"><span class="toc-text">创建任务</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%84%E4%BC%B0%E5%A8%81%E8%83%81%E6%9C%89%E6%95%88%E6%80%A7%E5%92%8C%E6%88%90%E6%9C%AC"><span class="toc-text">评估威胁有效性和成本</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E6%8E%A7%E5%88%B6%E6%8E%AA%E6%96%BD%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%8A%9F%E8%83%BD"><span class="toc-text">安全控制措施类型和功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BA%E6%AF%8F%E4%B8%AA%E9%97%AE%E9%A2%98%E6%B7%BB%E5%8A%A0%E5%AE%89%E5%85%A8%E6%8E%A7%E5%88%B6%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF"><span class="toc-text">为每个问题添加安全控制详细信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E6%A3%80%E6%9F%A5-2"><span class="toc-text">知识检查</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A44-%E9%AA%8C%E8%AF%81"><span class="toc-text">步骤4 - 验证</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-3"><span class="toc-text">目标</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%AA%8C%E8%AF%81%E8%A6%81%E6%B1%82%E5%92%8C%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="toc-text">验证要求和设置默认值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E9%AA%8C%E8%AF%81"><span class="toc-text">执行验证</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E6%A3%80%E6%9F%A5-3"><span class="toc-text">知识检查</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93"><span class="toc-text">小结</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%91%98%E8%A6%81"><span class="toc-text">摘要</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%8E%E7%BB%AD%E6%AD%A5%E9%AA%A4"><span class="toc-text">后续步骤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%86%E8%A7%A3%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF"><span class="toc-text">了解详细信息</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%9D%972-%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E6%B5%81%E5%85%B3%E7%B3%BB%E5%9B%BE%E5%85%83%E7%B4%A0%E5%88%9B%E5%BB%BA%E5%A8%81%E8%83%81%E6%A8%A1%E5%9E%8B"><span class="toc-text">模块2 | 使用数据流关系图元素创建威胁模型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-text">简介</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%95%E6%97%B6%E4%BD%BF%E7%94%A8%E5%85%83%E7%B4%A0"><span class="toc-text">何时使用元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87-1"><span class="toc-text">学习目标</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%B5%81%E5%85%B3%E7%B3%BB%E5%9B%BE%E5%85%83%E7%B4%A0"><span class="toc-text">数据流关系图元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%87%E7%A8%8B-%E4%BB%BB%E5%8A%A1%E5%85%83%E7%B4%A0"><span class="toc-text">过程 - 任务元素</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%95%E6%97%B6%E4%BD%BF%E7%94%A8%E8%BF%87%E7%A8%8B%E5%85%83%E7%B4%A0"><span class="toc-text">何时使用过程元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8C%85%E6%8B%AC%E4%B8%8A%E4%B8%8B%E6%96%87"><span class="toc-text">包括上下文</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E6%A3%80%E6%9F%A5-4"><span class="toc-text">知识检查</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8-%E5%AD%98%E5%82%A8%E5%85%83%E7%B4%A0"><span class="toc-text">数据存储 - 存储元素</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%95%E6%97%B6%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E5%85%83%E7%B4%A0"><span class="toc-text">何时使用数据存储元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8C%85%E5%90%AB%E4%B8%8A%E4%B8%8B%E6%96%87"><span class="toc-text">包含上下文</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E6%A3%80%E6%9F%A5-5"><span class="toc-text">知识检查</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E9%83%A8%E5%AE%9E%E4%BD%93-%E6%97%A0%E6%8E%A7%E5%88%B6%E5%85%83%E7%B4%A0"><span class="toc-text">外部实体 - 无控制元素</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%95%E6%97%B6%E4%BD%BF%E7%94%A8%E5%A4%96%E9%83%A8%E5%AE%9E%E4%BD%93%E5%85%83%E7%B4%A0"><span class="toc-text">何时使用外部实体元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8C%85%E5%90%AB%E4%B8%8A%E4%B8%8B%E6%96%87-1"><span class="toc-text">包含上下文</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E6%A3%80%E6%9F%A5-6"><span class="toc-text">知识检查</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%B5%81-%E4%BC%A0%E8%BE%93%E5%85%83%E7%B4%A0%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-text">数据流 - 传输元素中的数据</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%95%E6%97%B6%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E6%B5%81%E5%85%83%E7%B4%A0"><span class="toc-text">何时使用数据流元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8C%85%E5%90%AB%E4%B8%8A%E4%B8%8B%E6%96%87-2"><span class="toc-text">包含上下文</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E6%A3%80%E6%9F%A5-7"><span class="toc-text">知识检查</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%A1%E4%BB%BB%E8%BE%B9%E7%95%8C-%E4%BF%A1%E4%BB%BB%E5%8C%BA%E5%9F%9F%E6%9B%B4%E6%94%B9%E5%85%83%E7%B4%A0"><span class="toc-text">信任边界 - 信任区域更改元素</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%95%E6%97%B6%E4%BD%BF%E7%94%A8%E4%BF%A1%E4%BB%BB%E8%BE%B9%E7%95%8C%E5%85%83%E7%B4%A0"><span class="toc-text">何时使用信任边界元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8C%85%E5%90%AB%E4%B8%8A%E4%B8%8B%E6%96%87-3"><span class="toc-text">包含上下文</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E6%A3%80%E6%9F%A5-8"><span class="toc-text">知识检查</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-1"><span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%9D%973-%E6%8F%90%E4%BE%9B%E5%85%B7%E6%9C%89%E9%80%82%E5%BD%93%E6%B7%B1%E5%BA%A6%E5%B1%82%E7%9A%84%E4%B8%8A%E4%B8%8B%E6%96%87"><span class="toc-text">模块3 | 提供具有适当深度层的上下文</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D"><span class="toc-text">介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B7%B1%E5%BA%A6%E5%B1%82%E7%9A%84%E9%87%8D%E8%A6%81%E6%80%A7"><span class="toc-text">深度层的重要性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87-2"><span class="toc-text">学习目标</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%B5%81%E5%85%B3%E7%B3%BB%E5%9B%BE%E6%B7%B1%E5%BA%A6%E5%B1%82"><span class="toc-text">数据流关系图深度层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC-0-%E5%B1%82-%E7%B3%BB%E7%BB%9F%E5%B1%82"><span class="toc-text">第 0 层 - 系统层</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%95%E6%97%B6%E4%BD%BF%E7%94%A8%E7%B3%BB%E7%BB%9F%E5%B1%82"><span class="toc-text">何时使用系统层</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3%E7%B3%BB%E7%BB%9F%E9%83%A8%E5%88%86"><span class="toc-text">深入了解系统部分</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E6%A3%80%E6%9F%A5-9"><span class="toc-text">知识检查</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC-1-%E5%B1%82-%E8%BF%87%E7%A8%8B%E5%B1%82"><span class="toc-text">第 1 层 - 过程层</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%95%E6%97%B6%E4%BD%BF%E7%94%A8%E8%BF%87%E7%A8%8B%E5%B1%82"><span class="toc-text">何时使用过程层</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3%E7%B3%BB%E7%BB%9F%E9%83%A8%E5%88%86-1"><span class="toc-text">深入了解系统部分</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E6%A3%80%E6%9F%A5-10"><span class="toc-text">知识检查</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC-2-%E5%B1%82-%E5%AD%90%E8%BF%87%E7%A8%8B%E5%B1%82"><span class="toc-text">第 2 层 - 子过程层</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%95%E6%97%B6%E4%BD%BF%E7%94%A8%E5%AD%90%E8%BF%87%E7%A8%8B%E5%B1%82"><span class="toc-text">何时使用子过程层</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3%E7%B3%BB%E7%BB%9F%E5%AD%90%E9%83%A8%E5%88%86"><span class="toc-text">深入了解系统子部分</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC-3-%E5%B1%82-%E8%BE%83%E4%BD%8E%E7%BA%A7%E5%88%AB%E5%B1%82"><span class="toc-text">第 3 层 - 较低级别层</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%95%E6%97%B6%E4%BD%BF%E7%94%A8%E4%BD%8E%E7%BA%A7%E5%88%AB%E5%B1%82"><span class="toc-text">何时使用低级别层</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-2"><span class="toc-text">小结</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%91%98%E8%A6%81-1"><span class="toc-text">摘要</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E6%A3%80%E6%9F%A5-11"><span class="toc-text">知识检查</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%9D%974-%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE%E6%B5%81%E5%85%B3%E7%B3%BB%E5%9B%BE%E5%85%B3%E6%B3%A8%E9%80%82%E5%BD%93%E7%9A%84%E5%A8%81%E8%83%81%E6%A8%A1%E5%9E%8B"><span class="toc-text">模块4 | 处理数据流关系图关注适当的威胁模型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B-1"><span class="toc-text">简介</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8D%E7%82%B9%E5%85%B3%E6%B3%A8%E9%87%8D%E8%A6%81%E6%96%B9%E9%9D%A2"><span class="toc-text">重点关注重要方面</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87-3"><span class="toc-text">学习目标</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A8%81%E8%83%81%E5%BB%BA%E6%A8%A1%E9%92%88%E5%AF%B9%E6%80%A7%E6%96%B9%E6%B3%95"><span class="toc-text">威胁建模针对性方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BE%A7%E9%87%8D%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-text">侧重系统的方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BE%A7%E9%87%8D%E6%94%BB%E5%87%BB%E8%80%85%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-text">侧重攻击者的方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BE%A7%E9%87%8D%E8%B5%84%E4%BA%A7%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-text">侧重资产的方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%92%88%E5%AF%B9%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%92%8C%E5%85%B6%E4%BB%96%E6%96%B9%E9%9D%A2%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-text">针对系统的和其他方面的方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BE%A7%E9%87%8D%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%B9%E6%B3%95%E7%9A%84%E9%87%8D%E8%A6%81%E6%80%A7"><span class="toc-text">侧重系统的方法的重要性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E6%A3%80%E6%9F%A5-12"><span class="toc-text">知识检查</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-3"><span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%9D%975-%E4%BD%BF%E7%94%A8%E6%A1%86%E6%9E%B6%E8%AF%86%E5%88%AB%E5%A8%81%E8%83%81%E5%B9%B6%E6%89%BE%E5%88%B0%E5%87%8F%E5%B0%91%E6%88%96%E6%B6%88%E9%99%A4%E9%A3%8E%E9%99%A9%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-text">模块5 | 使用框架识别威胁并找到减少或消除风险的方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D-1"><span class="toc-text">介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%95%E6%97%B6%E4%BD%BF%E7%94%A8%E6%A1%86%E6%9E%B6"><span class="toc-text">何时使用框架</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A2%84%E6%9C%9F%E7%BB%93%E6%9E%9C"><span class="toc-text">预期结果</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87-4"><span class="toc-text">学习目标</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A8%81%E8%83%81%E5%BB%BA%E6%A8%A1%E6%A1%86%E6%9E%B6"><span class="toc-text">威胁建模框架</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A8%81%E8%83%81%E7%B1%BB%E5%88%AB"><span class="toc-text">威胁类别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E6%8E%A7%E5%88%B6%E7%B1%BB%E5%88%AB"><span class="toc-text">安全控制类别</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AC%BA%E9%AA%97-%E5%86%92%E5%85%85%E6%9F%90%E4%BA%BA%E6%88%96%E6%9F%90%E7%89%A9"><span class="toc-text">欺骗 - 冒充某人或某物</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AF%E8%83%BD%E9%9D%A2%E4%B8%B4%E6%AC%BA%E9%AA%97%E6%94%BB%E5%87%BB%E9%A3%8E%E9%99%A9%E7%9A%84%E5%85%83%E7%B4%A0%E5%92%8C%E4%BA%A4%E4%BA%92"><span class="toc-text">可能面临欺骗攻击风险的元素和交互</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E9%98%B2%E6%AD%A2%E6%AC%BA%E9%AA%97%E6%94%BB%E5%87%BB"><span class="toc-text">如何防止欺骗攻击</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8%E4%BA%8E%E9%99%8D%E4%BD%8E%E6%88%96%E6%B6%88%E9%99%A4%E9%A3%8E%E9%99%A9%E7%9A%84%E5%B8%B8%E7%94%A8%E5%AE%89%E5%85%A8%E6%8E%A7%E5%88%B6"><span class="toc-text">用于降低或消除风险的常用安全控制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E6%A3%80%E6%9F%A5-13"><span class="toc-text">知识检查</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AF%A1%E6%94%B9-%E6%9C%AA%E7%BB%8F%E6%8E%88%E6%9D%83%E6%9B%B4%E6%94%B9%E6%95%B0%E6%8D%AE"><span class="toc-text">篡改 - 未经授权更改数据</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AF%E8%83%BD%E9%9D%A2%E4%B8%B4%E7%AF%A1%E6%94%B9%E6%94%BB%E5%87%BB%E9%A3%8E%E9%99%A9%E7%9A%84%E5%85%83%E7%B4%A0%E5%92%8C%E4%BA%A4%E4%BA%92"><span class="toc-text">可能面临篡改攻击风险的元素和交互</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E9%98%B2%E6%AD%A2%E7%AF%A1%E6%94%B9"><span class="toc-text">如何防止篡改</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8%E4%BA%8E%E9%99%8D%E4%BD%8E%E6%88%96%E6%B6%88%E9%99%A4%E9%A3%8E%E9%99%A9%E7%9A%84%E5%B8%B8%E7%94%A8%E5%AE%89%E5%85%A8%E6%8E%A7%E5%88%B6-1"><span class="toc-text">用于降低或消除风险的常用安全控制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E6%A3%80%E6%9F%A5-14"><span class="toc-text">知识检查</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%A6%E8%AE%A4%E6%80%A7-%E4%B8%8D%E5%AE%A3%E7%A7%B0%E5%AF%B9%E6%89%A7%E8%A1%8C%E7%9A%84%E6%93%8D%E4%BD%9C%E8%B4%9F%E8%B4%A3"><span class="toc-text">否认性 - 不宣称对执行的操作负责</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AF%E8%83%BD%E9%9D%A2%E4%B8%B4%E5%90%A6%E8%AE%A4%E6%80%A7%E6%94%BB%E5%87%BB%E9%A3%8E%E9%99%A9%E7%9A%84%E5%85%83%E7%B4%A0%E5%92%8C%E4%BA%A4%E4%BA%92"><span class="toc-text">可能面临否认性攻击风险的元素和交互</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E9%98%B2%E6%AD%A2%E5%90%A6%E8%AE%A4%E6%80%A7%E6%94%BB%E5%87%BB"><span class="toc-text">如何防止否认性攻击</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8%E4%BA%8E%E9%99%8D%E4%BD%8E%E6%88%96%E6%B6%88%E9%99%A4%E9%A3%8E%E9%99%A9%E7%9A%84%E5%B8%B8%E7%94%A8%E5%AE%89%E5%85%A8%E6%8E%A7%E5%88%B6-2"><span class="toc-text">用于降低或消除风险的常用安全控制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E6%A3%80%E6%9F%A5-15"><span class="toc-text">知识检查</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%A1%E6%81%AF%E6%B3%84%E6%BC%8F-%E6%9F%A5%E7%9C%8B%E4%B8%8D%E5%BA%94%E6%9F%A5%E7%9C%8B%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-text">信息泄漏 - 查看不应查看的数据</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AF%E8%83%BD%E9%9D%A2%E4%B8%B4%E4%BF%A1%E6%81%AF%E6%B3%84%E6%BC%8F%E9%A3%8E%E9%99%A9%E7%9A%84%E5%85%83%E7%B4%A0%E5%92%8C%E4%BA%A4%E4%BA%92"><span class="toc-text">可能面临信息泄漏风险的元素和交互</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E9%98%B2%E6%AD%A2%E4%BF%A1%E6%81%AF%E6%B3%84%E6%BC%8F"><span class="toc-text">如何防止信息泄漏</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8%E4%BA%8E%E9%99%8D%E4%BD%8E%E6%88%96%E6%B6%88%E9%99%A4%E9%A3%8E%E9%99%A9%E7%9A%84%E5%B8%B8%E7%94%A8%E5%AE%89%E5%85%A8%E6%8E%A7%E5%88%B6-3"><span class="toc-text">用于降低或消除风险的常用安全控制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E6%A3%80%E6%9F%A5-16"><span class="toc-text">知识检查</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%92%E7%BB%9D%E6%9C%8D%E5%8A%A1-%E7%B3%BB%E7%BB%9F%E7%B9%81%E5%BF%99"><span class="toc-text">拒绝服务 - 系统繁忙</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AF%E8%83%BD%E9%9D%A2%E4%B8%B4%E6%8B%92%E7%BB%9D%E6%9C%8D%E5%8A%A1%E9%A3%8E%E9%99%A9%E7%9A%84%E5%85%83%E7%B4%A0%E5%92%8C%E4%BA%A4%E4%BA%92"><span class="toc-text">可能面临拒绝服务风险的元素和交互</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E9%98%B2%E6%AD%A2%E6%8B%92%E7%BB%9D%E6%9C%8D%E5%8A%A1"><span class="toc-text">如何防止拒绝服务</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8%E4%BA%8E%E9%99%8D%E4%BD%8E%E6%88%96%E6%B6%88%E9%99%A4%E9%A3%8E%E9%99%A9%E7%9A%84%E5%B8%B8%E7%94%A8%E5%AE%89%E5%85%A8%E6%8E%A7%E5%88%B6-4"><span class="toc-text">用于降低或消除风险的常用安全控制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E6%A3%80%E6%9F%A5-17"><span class="toc-text">知识检查</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E6%8B%A5%E6%9C%89%E6%9C%AC%E4%B8%8D%E5%BA%94%E8%AF%A5%E6%9C%89%E7%94%A8%E7%9A%84%E6%9D%83%E9%99%90"><span class="toc-text">权限提升 - 拥有本不应该有用的权限</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AF%E8%83%BD%E9%9D%A2%E4%B8%B4%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E9%A3%8E%E9%99%A9%E7%9A%84%E5%85%83%E7%B4%A0%E5%92%8C%E4%BA%A4%E4%BA%92"><span class="toc-text">可能面临权限提升 风险的元素和交互</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E9%98%B2%E6%AD%A2%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87"><span class="toc-text">如何防止权限提升</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8%E4%BA%8E%E9%99%8D%E4%BD%8E%E6%88%96%E6%B6%88%E9%99%A4%E9%A3%8E%E9%99%A9%E7%9A%84%E5%B8%B8%E7%94%A8%E5%AE%89%E5%85%A8%E6%8E%A7%E5%88%B6-5"><span class="toc-text">用于降低或消除风险的常用安全控制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E6%A3%80%E6%9F%A5-18"><span class="toc-text">知识检查</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-4"><span class="toc-text">小结</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%91%98%E8%A6%81-2"><span class="toc-text">摘要</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%86%E8%A7%A3%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF-1"><span class="toc-text">了解详细信息</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%9D%976-%E8%AE%BE%E7%BD%AE%E9%97%AE%E9%A2%98%E7%9A%84%E4%BC%98%E5%85%88%E7%BA%A7%E5%B9%B6%E5%BA%94%E7%94%A8%E5%AE%89%E5%85%A8%E6%8E%A7%E5%88%B6%E6%8E%AA%E6%96%BD"><span class="toc-text">模块6 | 设置问题的优先级并应用安全控制措施</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D-2"><span class="toc-text">介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A1%AE%E5%AE%9E%E9%97%AE%E9%A2%98%E7%9A%84%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-text">确实问题的优先级</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%95%E6%97%B6%E8%AE%BE%E7%BD%AE%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-text">何时设置优先级</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87-5"><span class="toc-text">学习目标</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E4%BC%98%E5%85%88%E7%BA%A7%E3%80%81%E5%AE%89%E5%85%A8%E6%8E%A7%E5%88%B6%E6%8E%AA%E6%96%BD%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%8A%9F%E8%83%BD"><span class="toc-text">问题优先级、安全控制措施类型和功能</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95"><span class="toc-text">方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A1%AE%E5%AE%9A%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98%E7%9A%84%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-text">确定安全问题的优先级</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%8A%9F%E8%83%BD"><span class="toc-text">类型和功能</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98%E7%9A%84%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-text">设置安全问题的优先级</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%89%E6%8B%A9%E4%BC%98%E5%85%88%E7%BA%A7%E6%A1%86%E6%9E%B6"><span class="toc-text">选择优先级框架</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E6%A3%80%E6%9F%A5-19"><span class="toc-text">知识检查</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E6%8E%A7%E5%88%B6%E6%8E%AA%E6%96%BD%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%8A%9F%E8%83%BD-1"><span class="toc-text">安全控制措施类型和功能</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E6%8E%A7%E5%88%B6%E6%8E%AA%E6%96%BD%E7%B1%BB%E5%9E%8B"><span class="toc-text">安全控制措施类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E6%8E%A7%E5%88%B6%E5%8A%9F%E8%83%BD"><span class="toc-text">安全控制功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E7%BB%BC%E5%90%88%E5%88%A9%E7%94%A8%E6%89%80%E6%9C%89%E4%BF%A1%E6%81%AF"><span class="toc-text">如何综合利用所有信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E6%A3%80%E6%9F%A5-20"><span class="toc-text">知识检查</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-5"><span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%9D%977-%E4%BD%BF%E7%94%A8%E6%8E%A8%E8%8D%90%E5%B7%A5%E5%85%B7%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E6%B5%81%E5%9B%BE"><span class="toc-text">模块7 | 使用推荐工具创建数据流图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B-2"><span class="toc-text">简介</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E6%B5%81%E5%85%B3%E7%B3%BB%E5%9B%BE"><span class="toc-text">如何创建数据流关系图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-4"><span class="toc-text">目标</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87-6"><span class="toc-text">学习目标</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BB%BA%E8%AE%AE%E7%9A%84%E5%B7%A5%E5%85%B7"><span class="toc-text">建议的工具</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%A6%E7%BB%86%E4%BA%86%E8%A7%A3-Threat-Modeling-Tool"><span class="toc-text">详细了解 Threat Modeling Tool</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Threat-Modeling-Tool"><span class="toc-text">Threat Modeling Tool</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#STRIDE-%E5%9B%9E%E9%A1%BE"><span class="toc-text">STRIDE 回顾</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%AB%98%E7%BA%A7%E7%94%A8%E6%88%B7%E9%83%A8%E5%88%86"><span class="toc-text">高级用户部分</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A8%A1%E5%85%B7"><span class="toc-text">模具</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A8%81%E8%83%81%E5%B1%9E%E6%80%A7"><span class="toc-text">威胁属性</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A8%81%E8%83%81%E5%92%8C%E9%A3%8E%E9%99%A9%E9%99%8D%E4%BD%8E%E7%AD%96%E7%95%A5"><span class="toc-text">威胁和风险降低策略</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A8%81%E8%83%81%E7%94%9F%E6%88%90%E7%9A%84%E5%8E%9F%E7%90%86"><span class="toc-text">威胁生成的原理</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E6%A3%80%E6%9F%A5-21"><span class="toc-text">知识检查</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Visio"><span class="toc-text">Visio</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%98%E7%82%B9"><span class="toc-text">优点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%BA%E7%82%B9"><span class="toc-text">缺点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E6%A3%80%E6%9F%A5-22"><span class="toc-text">知识检查</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-6"><span class="toc-text">小结</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%86%E8%A7%A3%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF-2"><span class="toc-text">了解详细信息</span></a></li></ol></li></ol></li></ol>
    </div>
  </section>

  

</div>


<!-- 没有 pjax 占位会报错 万恶的 pjax -->

  <div class="pjax">
    <!-- pjax占位 -->
  </div>

  <div class="pjax">
    <!-- pjax占位 -->
  </div>

  <div class="pjax">
    <!-- pjax占位 -->
  </div>

  <div class="pjax">
    <!-- pjax占位 -->
  </div>

  <div class="pjax">
    <!-- pjax占位 -->
  </div>

  <div class="pjax">
    <!-- pjax占位 -->
  </div>

  <div class="pjax">
    <!-- pjax占位 -->
  </div>

  <div class="pjax">
    <!-- pjax占位 -->
  </div>

  <!-- Custom Files side begin -->
  
  <!-- Custom Files side end -->
</aside>



          <!--此文件用来存放一些不方便取值的变量-->
<!--思路大概是将值藏到重加载的区域内-->

<pjax>
<script>
  window.pdata={}
  pdata.ispage=true;
  pdata.commentPath="";
  pdata.commentPlaceholder="";
  pdata.commentConfig={};
  //  see: /layout/_partial/scripts/_ctrl/coverCtrl.ejs
  
    // header
    var l_header=document.getElementById("l_header");
    
    l_header.classList.add("show");
    
    
      // cover
      var cover_wrapper=document.querySelector('#l_cover .cover-wrapper');
      var scroll_down=document.getElementById('scroll-down');
      cover_wrapper.id="none";
      cover_wrapper.style.display="none";
      scroll_down.style.display="none";
    
  
</script>
</pjax>
        </div>
        
  
  <footer class="footer clearfix"  itemscope itemtype="http://schema.org/WPFooter">
    <br><br>
    
      
        本站使用
        <a href="https://github.com/volantis-x/hexo-theme-volantis/#5.7.7" target="_blank" class="codename">Volantis</a>
        作为主题
      
    
      
        
          <div><p><span id="lc-sv">本站总访问量为 <span id='number'><i class="fas fa-circle-notch fa-spin fa-fw" aria-hidden="true"></i></span> 次</span> <span id="lc-uv">访客数为 <span id='number'><i class="fas fa-circle-notch fa-spin fa-fw" aria-hidden="true"></i></span> 人</span></p>
</div>
        
      
    
      
        
          <div><p>本站托管于 <a target="_blank" rel="noopener" href="https://pages.github.com/">Github Page</a> &amp;&amp; CDN 使用 <a target="_blank" rel="noopener" href="https://www.jsdelivr.com/">JSDELIVR</a></p>
</div>
        
      
    
      
        <div><p>博客内容遵循 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0) 协议</a></p>
</div>
      
    
      
        <div class='copyright'>
        <p><a href="/">Copyright © 2019-2022 TARI TARI</a></p>

        </div>
      
    
    <!-- Custom Files footer begin-->
    
    <!-- Custom Files footer end-->
  </footer>


        <a id="s-top" class="fa-solid fa-arrow-up fa-fw" href="/" onclick="return false;" title="top"></a>
      </div>
    </div>
    <div>
      <script>
  /******************** volantis.dom ********************************/
  // 页面选择器 将dom对象缓存起来 see: /source/js/app.js etc.
  volantis.dom.bodyAnchor = volantis.dom.$(document.getElementById("safearea")); // 页面主体
  volantis.dom.topBtn = volantis.dom.$(document.getElementById('s-top')); // 向上
  volantis.dom.wrapper = volantis.dom.$(document.getElementById('wrapper')); // 整个导航栏
  volantis.dom.coverAnchor = volantis.dom.$(document.querySelector('#l_cover .cover-wrapper')); // 1个
  volantis.dom.switcher = volantis.dom.$(document.querySelector('#l_header .switcher .s-search')); // 搜索按钮   移动端 1个
  volantis.dom.header = volantis.dom.$(document.getElementById('l_header')); // 移动端导航栏
  volantis.dom.search = volantis.dom.$(document.querySelector('#l_header .m_search')); // 搜索框 桌面端 移动端 1个
  volantis.dom.mPhoneList = volantis.dom.$(document.querySelectorAll('#l_header .m-phone .list-v')); //  手机端 子菜单 多个
</script>

<script>
  
  volantis.css("https://unpkg.com/volantis-static@0.0.1654736714924/libs/@fortawesome/fontawesome-free/css/all.min.css");
  
  
  
</script>

<!-- required -->


<!-- internal -->

<script src="/js/app.js"></script>






<!-- rightmenu要在darkmode之前（ToggleButton） darkmode要在comments之前（volantis.dark.push）-->



<script>
  function loadIssuesJS() {
    
      const sites_api = document.getElementById('sites-api');
      if (sites_api != undefined && typeof SitesJS === 'undefined') {
        volantis.js("/js/plugins/tags/sites.js")
      }
    
    
      const friends_api = document.getElementById('friends-api');
      if (friends_api != undefined && typeof FriendsJS === 'undefined') {
        volantis.js("/js/plugins/tags/friends.js")
      }
    
    
      const contributors_api = document.getElementById('contributors-api');
      if (contributors_api != undefined && typeof ContributorsJS === 'undefined') {
        volantis.js("/js/plugins/tags/contributors.js")
      }
    
  };
  loadIssuesJS()
  volantis.pjax.push(()=>{
    loadIssuesJS();
  })

</script>




  <script defer src="https://unpkg.com/volantis-static@0.0.1654736714924/libs/vanilla-lazyload/dist/lazyload.min.js"></script>
<script>
  // https://www.npmjs.com/package/vanilla-lazyload
  // Set the options globally
  // to make LazyLoad self-initialize
  window.lazyLoadOptions = {
    elements_selector: ".lazyload",
    threshold: 0
  };
  // Listen to the initialization event
  // and get the instance of LazyLoad
  window.addEventListener(
    "LazyLoad::Initialized",
    function (event) {
      window.lazyLoadInstance = event.detail.instance;
    },
    false
  );
  document.addEventListener('DOMContentLoaded', function () {
    lazyLoadInstance.update();
  });
  document.addEventListener('pjax:complete', function () {
    lazyLoadInstance.update();
  });
</script>




  

<script>
  window.FPConfig = {
	delay: 0,
	ignoreKeywords: ["#"],
	maxRPS: 6,
	hoverDelay: 0
  };
</script>
<script defer src="https://unpkg.com/volantis-static@0.0.1654736714924/libs/flying-pages/flying-pages.min.js"></script>









      <script type="text/javascript">
  volantis.layoutHelper("comments",`<div id="gitalk-container"></div>`)
  function pjax_gitalk() {
    if(!document.querySelector("#gitalk-container"))return;
    let path = pdata.commentPath;
    if (path.length == 0) {
      let defaultPath = '';
      path = defaultPath || decodeURI(window.location.pathname);
    }
    if (document.getElementById('gitalk-container') != null) {
      var gitalk = new Gitalk(
        Object.assign(
          Object.assign({"js":"https://unpkg.com/gitalk@1/dist/gitalk.min.js","clientID":"71041770cc5d77158add","clientSecret":"e6825eb932dd754c2690903ffea01232bf0fc87f","repo":"tarimoe.github.io","owner":"tarimoe","admin":["tarimoe"],"path":null}, {
            id: path,
            distractionFreeMode: false  // Facebook-like distraction free mode
          }),
        pdata.commentConfig)
      );
      gitalk.render('gitalk-container');
    }
  }
  volantis.js('https://unpkg.com/gitalk@1/dist/gitalk.min.js').then(pjax_gitalk)
  volantis.pjax.push(pjax_gitalk);
</script>

    





<!-- optional -->

  <script>
  const SearchServiceDataPathRoot = ("/" || "/").endsWith("/") ?
    "/" || "/" :
    "//" || "/";
  const SearchServiceDataPath = SearchServiceDataPathRoot + "content.json";

  function loadSearchScript() {
    // see: layout/_partial/scripts/_ctrl/cdnCtrl.ejs
    return volantis.js("/js/search/hexo.js");
  }

  function loadSearchService() {
    loadSearchScript();
    document.querySelectorAll(".input.u-search-input").forEach((e) => {
      e.removeEventListener("focus", loadSearchService, false);
    });

    document.querySelectorAll(".u-search-form").forEach((e) => {
      e.addEventListener("submit", (event) => {
        event.preventDefault();
      }, false);
    });
  }

  // 打开并搜索 字符串 s
  function OpenSearch(s) {
    if (typeof SearchService === 'undefined')
      loadSearchScript().then(() => {
        SearchService.setQueryText(s);
        SearchService.search();
      });
    else {
      SearchService.setQueryText(s);
      SearchService.search();
    }
  }

  // 访问含有 ?s=xxx  的链接时打开搜索 // 与搜索引擎 structured data 相关: /scripts/helpers/structured-data/lib/config.js
  if (window.location.search && /^\?s=/g.test(window.location.search)) {
    let queryText = decodeURI(window.location.search)
      .replace(/\ /g, "-")
      .replace(/^\?s=/g, "");
    OpenSearch(queryText);
  }

  // 搜索输入框获取焦点时加载搜索
  document.querySelectorAll(".input.u-search-input").forEach((e) => {
    e.addEventListener("focus", loadSearchService, false);
  });
</script>







  <script>



  function pjax_highlightjs_copyCode(){
    if (!(document.querySelector(".highlight .code pre") ||
      document.querySelector(".article pre code"))) {
      return;
    }
    VolantisApp.utilCopyCode(".highlight .code pre, .article pre code")
  }
  volantis.requestAnimationFrame(pjax_highlightjs_copyCode)
  volantis.pjax.push(pjax_highlightjs_copyCode)

</script>




  <script defer>

  const LCCounter = {
    app_id: 'drHoUTNkw1UylDdn7MwkAry5-MdYXbMMI',
    app_key: 'JgkgW3M15DEOEujk1nYGmmIx',
    custom_api_server: '',

    // 查询存储的记录
    getRecord(Counter, url, title) {
      return new Promise(function (resolve, reject) {
        Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({url})))
          .then(resp => resp.json())
          .then(({results, code, error}) => {
            if (code === 401) {
              throw error;
            }
            if (results && results.length > 0) {
              var record = results[0];
              resolve(record);
            } else {
              Counter('post', '/classes/Counter', {url, title: title, times: 0})
                .then(resp => resp.json())
                .then((record, error) => {
                  if (error) {
                    throw error;
                  }
                  resolve(record);
                }).catch(error => {
                console.error('Failed to create', error);
                reject(error);
              });
            }
          }).catch((error) => {
          console.error('LeanCloud Counter Error:', error);
          reject(error);
        });
      })
    },

    // 发起自增请求
    increment(Counter, incrArr) {
      return new Promise(function (resolve, reject) {
        Counter('post', '/batch', {
          "requests": incrArr
        }).then((res) => {
          res = res.json();
          if (res.error) {
            throw res.error;
          }
          resolve(res);
        }).catch((error) => {
          console.error('Failed to save visitor count', error);
          reject(error);
        });
      });
    },

    // 构建自增请求体
    buildIncrement(objectId) {
      return {
        "method": "PUT",
        "path": `/1.1/classes/Counter/${ objectId }`,
        "body": {
          "times": {
            '__op': 'Increment',
            'amount': 1
          }
        }
      }
    },

    // 校验是否为有效的 UV
    validUV() {
      var key = 'LeanCloudUVTimestamp';
      var flag = localStorage.getItem(key);
      if (flag) {
        // 距离标记小于 24 小时则不计为 UV
        if (new Date().getTime() - parseInt(flag) <= 86400000) {
          return false;
        }
      }
      localStorage.setItem(key, new Date().getTime().toString());
      return true;
    },

    addCount(Counter) {
      var enableIncr = '' === 'true' && window.location.hostname !== 'localhost';
      enableIncr = true;
      var getterArr = [];
      var incrArr = [];
      // 请求 PV 并自增
      var pvCtn = document.querySelector('#lc-sv');
      if (pvCtn || enableIncr) {
        var pvGetter = this.getRecord(Counter, 'https://tari.moe' + '/#lc-sv', 'Visits').then((record) => {
          incrArr.push(this.buildIncrement(record.objectId))
          var eles = document.querySelectorAll('#lc-sv #number');
          if (eles.length > 0) {
            eles.forEach((el,index,array)=>{
              el.innerText = record.times + 1;
              if (pvCtn) {
                pvCtn.style.display = 'inline';
              }
            })
          }
        });
        getterArr.push(pvGetter);
      }

      // 请求 UV 并自增
      var uvCtn = document.querySelector('#lc-uv');
      if (uvCtn || enableIncr) {
        var uvGetter = this.getRecord(Counter, 'https://tari.moe' + '/#lc-uv', 'Visitors').then((record) => {
          var vuv = this.validUV();
          vuv && incrArr.push(this.buildIncrement(record.objectId))
          var eles = document.querySelectorAll('#lc-uv #number');
          if (eles.length > 0) {
            eles.forEach((el,index,array)=>{
              el.innerText = record.times + (vuv ? 1 : 0);
              if (uvCtn) {
                uvCtn.style.display = 'inline';
              }
            })
          }
        });
        getterArr.push(uvGetter);
      }

      // 请求文章的浏览数，如果是当前页面就自增
      var allPV = document.querySelectorAll('#lc-pv');
      if (allPV.length > 0 || enableIncr) {
        for (i = 0; i < allPV.length; i++) {
          let pv = allPV[i];
          let title = pv.getAttribute('data-title');
          var url = 'https://tari.moe' + pv.getAttribute('data-path');
          if (url) {
            var viewGetter = this.getRecord(Counter, url, title).then((record) => {
              // 是当前页面就自增
              let curPath = window.location.pathname;
              if (curPath.includes('index.html')) {
                curPath = curPath.substring(0, curPath.lastIndexOf('index.html'));
              }
              if (pv.getAttribute('data-path') == curPath) {
                incrArr.push(this.buildIncrement(record.objectId));
              }
              if (pv) {
                var ele = pv.querySelector('#lc-pv #number');
                if (ele) {
                  if (pv.getAttribute('data-path') == curPath) {
                    ele.innerText = (record.times || 0) + 1;
                  } else {
                    ele.innerText = record.times || 0;
                  }
                  pv.style.display = 'inline';
                }
              }
            });
            getterArr.push(viewGetter);
          }
        }
      }

      // 如果启动计数自增，批量发起自增请求
      if (enableIncr) {
        Promise.all(getterArr).then(() => {
          incrArr.length > 0 && this.increment(Counter, incrArr);
        })
      }

    },


    fetchData(api_server) {
      var Counter = (method, url, data) => {
        return fetch(`${ api_server }/1.1${ url }`, {
          method,
          headers: {
            'X-LC-Id': this.app_id,
            'X-LC-Key': this.app_key,
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      this.addCount(Counter);
    },

    refreshCounter() {
      var api_server = this.app_id.slice(-9) !== '-MdYXbMMI' ? this.custom_api_server : `https://${ this.app_id.slice(0, 8).toLowerCase() }.api.lncldglobal.com`;
      if (api_server) {
        this.fetchData(api_server);
      } else {
        fetch('https://app-router.leancloud.cn/2/route?appId=' + this.app_id)
          .then(resp => resp.json())
          .then(({api_server}) => {
            this.fetchData('https://' + api_server);
          });
      }
    }

  };

  LCCounter.refreshCounter();

  document.addEventListener('pjax:complete', function () {
    LCCounter.refreshCounter();
  });
</script>










  <script>
  function load_swiper() {
    if (!document.querySelectorAll(".swiper-container")[0]) return;
    volantis.css("https://unpkg.com/volantis-static@0.0.1654736714924/libs/swiper/swiper-bundle.min.css");
    volantis.js("https://unpkg.com/volantis-static@0.0.1654736714924/libs/swiper/swiper-bundle.min.js").then(() => {
      pjax_swiper();
    });
  }

  load_swiper();

  function pjax_swiper() {
    volantis.swiper = new Swiper('.swiper-container', {
      slidesPerView: 'auto',
      spaceBetween: 8,
      centeredSlides: true,
      loop: true,
      pagination: {
        el: '.swiper-pagination',
        clickable: true,
      },
      navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
      },
    });
  }

  volantis.pjax.push(() => {
    if (!document.querySelectorAll(".swiper-container")[0]) return;
    if (typeof volantis.swiper === "undefined") {
      load_swiper();
    } else {
      pjax_swiper();
    }
  });
</script>


<!-- pjax 标签必须存在于所有页面 否则 pjax error -->
<pjax>

</pjax>

<script>
  function listennSidebarTOC() {
    const navItems = document.querySelectorAll(".toc li");
    if (!navItems.length) return;
    let targets = []
    const sections = [...navItems].map((element) => {
      const link = element.querySelector(".toc-link");
      const target = document.getElementById(
        decodeURI(link.getAttribute("href")).replace("#", "")
      );
      targets.push(target)
      // 解除 a 标签 href 的 锚点定位, a 标签 href 的 锚点定位 会随机启用?? 产生错位???
      link.setAttribute("onclick","return false;")
      link.setAttribute("toc-action","toc-"+decodeURI(link.getAttribute("href")).replace("#", ""))
      link.setAttribute("href","/")
      // 配置 点击 触发新的锚点定位
      link.addEventListener("click", (event) => {
        event.preventDefault();
        // 这里的 addTop 是通过错位使得 toc 自动展开.
        volantis.scroll.to(target,{addTop: 5, observer:true})
        // Anchor id
        history.pushState(null, document.title, "#" + target.id);
      });
      return target;
    });

    function activateNavByIndex(target) {
      if (target.classList.contains("active-current")) return;

      document.querySelectorAll(".toc .active").forEach((element) => {
        element.classList.remove("active", "active-current");
      });
      target.classList.add("active", "active-current");
      let parent = target.parentNode;
      while (!parent.matches(".toc")) {
        if (parent.matches("li")) parent.classList.add("active");
        parent = parent.parentNode;
      }
    }

    // 方案一：
    volantis.activateNavIndex=0
    activateNavByIndex(navItems[volantis.activateNavIndex])
    volantis.scroll.push(()=>{
      if (targets[0].getBoundingClientRect().top >= 0) {
        volantis.activateNavIndex = 0
      }else if (targets[targets.length-1].getBoundingClientRect().top < 0) {
        volantis.activateNavIndex = targets.length-1
      } else {
        for (let index = 0; index < targets.length; index++) {
          const target0 = targets[index];
          const target1 = targets[(index+1)%targets.length];
          if (target0.getBoundingClientRect().top < 0&&target1.getBoundingClientRect().top >= 0) {
            volantis.activateNavIndex=index
            break;
          }
        }
      }
      activateNavByIndex(navItems[volantis.activateNavIndex])
    })

    // 方案二：
    // IntersectionObserver 不是完美精确到像素级别 也不是低延时性的
    // function findIndex(entries) {
    //   let index = 0;
    //   let entry = entries[index];
    //   if (entry.boundingClientRect.top > 0) {
    //     index = sections.indexOf(entry.target);
    //     return index === 0 ? 0 : index - 1;
    //   }
    //   for (; index < entries.length; index++) {
    //     if (entries[index].boundingClientRect.top <= 0) {
    //       entry = entries[index];
    //     } else {
    //       return sections.indexOf(entry.target);
    //     }
    //   }
    //   return sections.indexOf(entry.target);
    // }
    // function createIntersectionObserver(marginTop) {
    //   marginTop = Math.floor(marginTop + 10000);
    //   let intersectionObserver = new IntersectionObserver(
    //     (entries, observe) => {
    //       let scrollHeight = document.documentElement.scrollHeight;
    //       if (scrollHeight > marginTop) {
    //         observe.disconnect();
    //         createIntersectionObserver(scrollHeight);
    //         return;
    //       }
    //       let index = findIndex(entries);
    //       activateNavByIndex(navItems[index]);
    //     }, {
    //       rootMargin: marginTop + "px 0px -100% 0px",
    //       threshold: 0,
    //     }
    //   );
    //   sections.forEach((element) => {
    //     element && intersectionObserver.observe(element);
    //   });
    // }
    // createIntersectionObserver(document.documentElement.scrollHeight);
  }

  document.addEventListener("DOMContentLoaded", ()=>{
    volantis.requestAnimationFrame(listennSidebarTOC)
  });
  document.addEventListener("pjax:success", ()=>{
    volantis.requestAnimationFrame(listennSidebarTOC)
  });
</script>



<script>
  document.onreadystatechange = function () {
    if (document.readyState == 'complete') {
      // 页面加载完毕 样式加载失败，或是当前网速慢，或是开启了省流模式
      const { saveData, effectiveType } = navigator.connection || navigator.mozConnection || navigator.webkitConnection || {}
      if (getComputedStyle(document.querySelector("#safearea"), null)["display"] == "none" || saveData || /2g/.test(effectiveType)) {
        document.querySelectorAll(".reveal").forEach(function (e) {
          e.style["opacity"] = "1";
        });
        document.querySelector("#safearea").style["display"] = "block";
      }
    }
  }
</script>


  <script type="application/ld+json">[{"@context":"http://schema.org","@type":"Organization","name":"TARI TARI","url":"https://tari.moe/","logo":{"@type":"ImageObject","url":"https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png","width":192,"height":192}},{"@context":"http://schema.org","@type":"Person","name":"TARI TARI","image":{"@type":"ImageObject","url":"https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png"},"url":"https://tari.moe/","sameAs":["https://github.com/volantis-x"],"description":"tari,tarimoe,taritari"},{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://tari.moe/","name":"TARI TARI"}},{"@type":"ListItem","position":2,"item":{"@id":"https://tari.moe/categories/SDL/","name":"SDL"}},{"@type":"ListItem","position":2,"item":{"@id":"https://tari.moe/categories/SDL/威胁建模/","name":"威胁建模"}},{"@type":"ListItem","position":3,"item":{"@id":"https://tari.moe//p/2021/thread-modeling/","name":"威胁建模安全基础知识"}}]},{"@context":"http://schema.org","@type":"WebSite","name":"TARI TARI","url":"https://tari.moe/","keywords":"tarimoe,tari","description":"tari,tarimoe,taritari","author":{"@type":"Person","name":"TARI TARI","image":{"@type":"ImageObject","url":"https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png"},"url":"https://tari.moe/","description":"tari,tarimoe,taritari"},"publisher":{"@type":"Organization","name":"TARI TARI","url":"https://tari.moe/","logo":{"@type":"ImageObject","url":"https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png","width":192,"height":192}},"potentialAction":{"@type":"SearchAction","name":"Site Search","target":{"@type":"EntryPoint","urlTemplate":"https://tari.moe?s={search_term_string}"},"query-input":"required name=search_term_string"}},{"@context":"http://schema.org","@type":"BlogPosting","headline":"威胁建模安全基础知识","description":"tari,tarimoe,taritari","inLanguage":["zh-CN","en","default"],"mainEntityOfPage":{"@type":"WebPage","@id":"https://tari.moe/p/2021/thread-modeling/"},"author":{"@type":"Person","name":"TARI TARI","image":{"@type":"ImageObject","url":"https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png"},"url":"https://tari.moe/"},"publisher":{"@type":"Organization","name":"TARI TARI","logo":{"@type":"ImageObject","url":"https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png","width":192,"height":192}},"url":"https://tari.moe/p/2021/thread-modeling/","wordCount":0,"datePublished":"2021-04-04T04:54:33.000Z","dateModified":"2022-02-01T04:24:06.068Z","articleSection":"SDL","keywords":"SDL,威胁建模","image":{"@type":"ImageObject","url":"https://unpkg.com/volantis-static@0.0.1654736714924/media/org.volantis/blog/favicon/android-chrome-192x192.png","width":192,"height":192}}]</script>



      
        <!--
  pjax重载区域接口：
  1.  <pjax></pjax> 标签 pjax 标签必须存在于所有页面 否则 pjax error
  2.  script[data-pjax]
  3.  .pjax-reload script
  4.  .pjax
-->



<script src="https://unpkg.com/volantis-static@0.0.1654736714924/libs/pjax/pjax.min.js"></script>


<script>
    var pjax;
    document.addEventListener('DOMContentLoaded', function () {
      pjax = new Pjax({
        elements: 'a[href]:not([href^="#"]):not([href="javascript:void(0)"]):not([pjax-fancybox]):not([onclick="return false;"]):not([onclick="return!1"]):not([target="_blank"]):not([target="view_window"]):not([href$=".xml"])',
        selectors: [
          "head title",
          "head meta[name=keywords]",
          "head meta[name=description]",
          
          "#l_main",
          "#pjax-header-nav-list",
          ".pjax",
          "pjax", // <pjax></pjax> 标签
          "script[data-pjax], .pjax-reload script" // script标签添加data-pjax 或 script标签外层添加.pjax-reload 的script代码段重载
        ],
        cacheBust: false,   // url 地址追加时间戳，用以避免浏览器缓存
        timeout: 5000,
        
      });
    });

    document.addEventListener('pjax:send', function (e) {
      //window.stop(); // 相当于点击了浏览器的停止按钮

      try {
        var currentUrl = window.location.pathname;
        var targetUrl = e.triggerElement.href;
        var banUrl = [""];
        if (banUrl[0] != "") {
          banUrl.forEach(item => {
            if(currentUrl.indexOf(item) != -1 || targetUrl.indexOf(item) != -1) {
              window.location.href = targetUrl;
            }
          });
        }
      } catch (error) {}

      // 使用 volantis.pjax.send 方法传入pjax:send回调函数 参见layout/_partial/scripts/global.ejs
      volantis.pjax.method.send.start();
    });

    document.addEventListener('pjax:complete', function () {
      // 使用 volantis.pjax.push 方法传入重载函数 参见layout/_partial/scripts/global.ejs
      volantis.pjax.method.complete.start();
    });

    document.addEventListener('pjax:error', function (e) {
      if(volantis.debug) {
        console.error(e);
        console.log('pjax error: \n' + JSON.stringify(e));
      }else{
        // 使用 volantis.pjax.error 方法传入pjax:error回调函数 参见layout/_partial/scripts/global.ejs
        volantis.pjax.method.error.start();
        window.location.href = e.triggerElement.href;
      }
    });
</script>

      
    </div>
    <!-- import body_end begin-->
    <!-- import body_end end-->
    <!-- Custom Files bodyEnd begin-->
    
    <!-- Custom Files bodyEnd end-->
  <script async>window.onload=function(){var a=document.createElement('script'),b=document.getElementsByTagName('script')[0];a.type='text/javascript',a.async=!0,a.src='/sw-register.js?v='+Date.now(),b.parentNode.insertBefore(a,b)};</script></body></html>